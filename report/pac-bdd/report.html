<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title id="head-title">report.html</title>
      <style type="text/css">body {
  font-family: Helvetica, Arial, sans-serif;
  font-size: 12px;
  /* do not increase min-width as some may use split screens */
  min-width: 800px;
  color: #999;
}

h1 {
  font-size: 24px;
  color: black;
}

h2 {
  font-size: 16px;
  color: black;
}

p {
  color: black;
}

a {
  color: #999;
}

table {
  border-collapse: collapse;
}

/******************************
 * SUMMARY INFORMATION
 ******************************/
#environment td {
  padding: 5px;
  border: 1px solid #e6e6e6;
  vertical-align: top;
}
#environment tr:nth-child(odd) {
  background-color: #f6f6f6;
}
#environment ul {
  margin: 0;
  padding: 0 20px;
}

/******************************
 * TEST RESULT COLORS
 ******************************/
span.passed,
.passed .col-result {
  color: green;
}

span.skipped,
span.xfailed,
span.rerun,
.skipped .col-result,
.xfailed .col-result,
.rerun .col-result {
  color: orange;
}

span.error,
span.failed,
span.xpassed,
.error .col-result,
.failed .col-result,
.xpassed .col-result {
  color: red;
}

.col-links__extra {
  margin-right: 3px;
}

/******************************
 * RESULTS TABLE
 *
 * 1. Table Layout
 * 2. Extra
 * 3. Sorting items
 *
 ******************************/
/*------------------
 * 1. Table Layout
 *------------------*/
#results-table {
  border: 1px solid #e6e6e6;
  color: #999;
  font-size: 12px;
  width: 100%;
}
#results-table th,
#results-table td {
  padding: 5px;
  border: 1px solid #e6e6e6;
  text-align: left;
}
#results-table th {
  font-weight: bold;
}

/*------------------
 * 2. Extra
 *------------------*/
.logwrapper {
  max-height: 230px;
  overflow-y: scroll;
  background-color: #e6e6e6;
}
.logwrapper.expanded {
  max-height: none;
}
.logwrapper.expanded .logexpander:after {
  content: "collapse [-]";
}
.logwrapper .logexpander {
  z-index: 1;
  position: sticky;
  top: 10px;
  width: max-content;
  border: 1px solid;
  border-radius: 3px;
  padding: 5px 7px;
  margin: 10px 0 10px calc(100% - 80px);
  cursor: pointer;
  background-color: #e6e6e6;
}
.logwrapper .logexpander:after {
  content: "expand [+]";
}
.logwrapper .logexpander:hover {
  color: #000;
  border-color: #000;
}
.logwrapper .log {
  min-height: 40px;
  position: relative;
  top: -50px;
  height: calc(100% + 50px);
  border: 1px solid #e6e6e6;
  color: black;
  display: block;
  font-family: "Courier New", Courier, monospace;
  padding: 5px;
  padding-right: 80px;
  white-space: pre-wrap;
}

div.media {
  border: 1px solid #e6e6e6;
  float: right;
  height: 240px;
  margin: 0 5px;
  overflow: hidden;
  width: 320px;
}

.media-container {
  display: grid;
  grid-template-columns: 25px auto 25px;
  align-items: center;
  flex: 1 1;
  overflow: hidden;
  height: 200px;
}

.media-container--fullscreen {
  grid-template-columns: 0px auto 0px;
}

.media-container__nav--right,
.media-container__nav--left {
  text-align: center;
  cursor: pointer;
}

.media-container__viewport {
  cursor: pointer;
  text-align: center;
  height: inherit;
}
.media-container__viewport img,
.media-container__viewport video {
  object-fit: cover;
  width: 100%;
  max-height: 100%;
}

.media__name,
.media__counter {
  display: flex;
  flex-direction: row;
  justify-content: space-around;
  flex: 0 0 25px;
  align-items: center;
}

.collapsible td:not(.col-links) {
  cursor: pointer;
}
.collapsible td:not(.col-links):hover::after {
  color: #bbb;
  font-style: italic;
  cursor: pointer;
}

.col-result {
  width: 130px;
}
.col-result:hover::after {
  content: " (hide details)";
}

.col-result.collapsed:hover::after {
  content: " (show details)";
}

#environment-header h2:hover::after {
  content: " (hide details)";
  color: #bbb;
  font-style: italic;
  cursor: pointer;
  font-size: 12px;
}

#environment-header.collapsed h2:hover::after {
  content: " (show details)";
  color: #bbb;
  font-style: italic;
  cursor: pointer;
  font-size: 12px;
}

/*------------------
 * 3. Sorting items
 *------------------*/
.sortable {
  cursor: pointer;
}
.sortable.desc:after {
  content: " ";
  position: relative;
  left: 5px;
  bottom: -12.5px;
  border: 10px solid #4caf50;
  border-bottom: 0;
  border-left-color: transparent;
  border-right-color: transparent;
}
.sortable.asc:after {
  content: " ";
  position: relative;
  left: 5px;
  bottom: 12.5px;
  border: 10px solid #4caf50;
  border-top: 0;
  border-left-color: transparent;
  border-right-color: transparent;
}

.hidden, .summary__reload__button.hidden {
  display: none;
}

.summary__data {
  flex: 0 0 550px;
}
.summary__reload {
  flex: 1 1;
  display: flex;
  justify-content: center;
}
.summary__reload__button {
  flex: 0 0 300px;
  display: flex;
  color: white;
  font-weight: bold;
  background-color: #4caf50;
  text-align: center;
  justify-content: center;
  align-items: center;
  border-radius: 3px;
  cursor: pointer;
}
.summary__reload__button:hover {
  background-color: #46a049;
}
.summary__spacer {
  flex: 0 0 550px;
}

.controls {
  display: flex;
  justify-content: space-between;
}

.filters,
.collapse {
  display: flex;
  align-items: center;
}
.filters button,
.collapse button {
  color: #999;
  border: none;
  background: none;
  cursor: pointer;
  text-decoration: underline;
}
.filters button:hover,
.collapse button:hover {
  color: #ccc;
}

.filter__label {
  margin-right: 10px;
}

      </style>
    
  </head>
  <body>
    <h1 id="title">report.html</h1>
    <p>Report generated on 12-Jan-2026 at 19:55:26 by <a href="https://pypi.python.org/pypi/pytest-html">pytest-html</a>
        v4.1.1</p>
    <div id="environment-header">
      <h2>Environment</h2>
    </div>
    <table id="environment"></table>
    <!-- TEMPLATES -->
      <template id="template_environment_row">
      <tr>
        <td></td>
        <td></td>
      </tr>
    </template>
    <template id="template_results-table__body--empty">
      <tbody class="results-table-row">
        <tr id="not-found-message">
          <td colspan="4">No results found. Check the filters.</th>
        </tr>
    </template>
    <template id="template_results-table__tbody">
      <tbody class="results-table-row">
        <tr class="collapsible">
        </tr>
        <tr class="extras-row">
          <td class="extra" colspan="4">
            <div class="extraHTML"></div>
            <div class="media">
              <div class="media-container">
                  <div class="media-container__nav--left"><</div>
                  <div class="media-container__viewport">
                    <img src="" />
                    <video controls>
                      <source src="" type="video/mp4">
                    </video>
                  </div>
                  <div class="media-container__nav--right">></div>
                </div>
                <div class="media__name"></div>
                <div class="media__counter"></div>
            </div>
            <div class="logwrapper">
              <div class="logexpander"></div>
              <div class="log"></div>
            </div>
          </td>
        </tr>
      </tbody>
    </template>
    <!-- END TEMPLATES -->
    <div class="summary">
      <div class="summary__data">
        <h2>Summary</h2>
        <div class="additional-summary prefix">
        </div>
        <p class="run-count">61 tests took 59 ms.</p>
        <p class="filter">(Un)check the boxes to filter the results.</p>
        <div class="summary__reload">
          <div class="summary__reload__button hidden" onclick="location.reload()">
            <div>There are still tests running. <br />Reload this page to get the latest results!</div>
          </div>
        </div>
        <div class="summary__spacer"></div>
        <div class="controls">
          <div class="filters">
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="failed" />
            <span class="failed">55 Failed,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="passed" />
            <span class="passed">6 Passed,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="skipped" disabled/>
            <span class="skipped">0 Skipped,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="xfailed" disabled/>
            <span class="xfailed">0 Expected failures,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="xpassed" disabled/>
            <span class="xpassed">0 Unexpected passes,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="error" disabled/>
            <span class="error">0 Errors,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="rerun" disabled/>
            <span class="rerun">0 Reruns</span>
          </div>
          <div class="collapse">
            <button id="show_all_details">Show all details</button>&nbsp;/&nbsp;<button id="hide_all_details">Hide all details</button>
          </div>
        </div>
      </div>
      <div class="additional-summary summary">
      </div>
      <div class="additional-summary postfix">
      </div>
    </div>
    <table id="results-table">
      <thead id="results-table-head">
        <tr>
          <th class="sortable" data-column-type="result">Result</th>
          <th class="sortable" data-column-type="testId">Test</th>
          <th class="sortable" data-column-type="duration">Duration</th>
          <th>Links</th>
        </tr>
      </thead>
    </table>
  </body>
  <footer>
    <div id="data-container" data-jsonblob="{&#34;environment&#34;: {&#34;Python&#34;: &#34;3.13.2&#34;, &#34;Platform&#34;: &#34;Linux-6.8.0-90-generic-x86_64-with-glibc2.39&#34;, &#34;Packages&#34;: {&#34;pytest&#34;: &#34;8.4.2&#34;, &#34;pluggy&#34;: &#34;1.6.0&#34;}, &#34;Plugins&#34;: {&#34;html&#34;: &#34;4.1.1&#34;, &#34;bdd&#34;: &#34;8.1.0&#34;, &#34;metadata&#34;: &#34;3.1.1&#34;, &#34;asyncio&#34;: &#34;1.3.0&#34;, &#34;md-report&#34;: &#34;0.7.0&#34;, &#34;anyio&#34;: &#34;4.12.0&#34;}}, &#34;tests&#34;: {&#34;test_fixture.py::test_dummy_fixture&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;test_fixture.py::test_dummy_fixture&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_fixture.py::test_dummy_fixture&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;test_fixture.py::test_dummy_async_fixture&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;test_fixture.py::test_dummy_async_fixture&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_fixture.py::test_dummy_async_fixture&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;test_openapi.py::test_swagger_flow_service&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_openapi.py::test_swagger_flow_service&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_openapi.py::test_swagger_flow_service&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;def test_swagger_flow_service():\n        url = &amp;#x27;???&amp;#x27;\n&amp;gt;       _test_swagger(\n            url,\n            &amp;quot;docs/norme/XP_Z12-013_SWAGGER_Annexes_A_et_B_V1.2/ANNEXE A - PR XP Z12-013 - AFNOR-Flow_Service-1.1.0-swagger.json&amp;quot;,\n        )\n\ntest_openapi.py:20: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nurl = &amp;#x27;???&amp;#x27;, swagger = &amp;#x27;docs/norme/XP_Z12-013_SWAGGER_Annexes_A_et_B_V1.2/ANNEXE A - PR XP Z12-013 - AFNOR-Flow_Service-1.1.0-swagger.json&amp;#x27;\n\n    def _test_swagger(url: str, swagger: str):\n        &amp;quot;&amp;quot;&amp;quot;\n            V\u00e9rifier si une API respecte une definition Swagger/OpenAPI\n    \n        Cette API doit respecter le versioning indiqu\u00e9 dans l\u2019URL de la route API du Swagger. Dans un objectif de\n        simplification le versioning des routes n\u2019est pas affich\u00e9 dans le pr\u00e9sent document;\n        Dans cette API publi\u00e9e par le Fournisseur API ce dernier peut :\n        \u2022Avoir une URL sp\u00e9cifique en amont du versioning\n        \u2022Ajouter des propri\u00e9t\u00e9s aux objets dans les requ\u00eates.\n        \u2022Ajouter des param\u00e8tres aux routes dans les requ\u00eates.\n        \u2022Ajouter des propri\u00e9t\u00e9s aux objets dans les r\u00e9ponses.\n        \u2022Ajouter des codes erreurs dans les r\u00e9ponses.\n        &amp;quot;&amp;quot;&amp;quot;\n&amp;gt;       raise NotImplementedError(&amp;quot;swagger compliance non test\u00e9&amp;quot;)\nE       NotImplementedError: swagger compliance non test\u00e9\n\ntest_openapi.py:14: NotImplementedError\n&#34;}], &#34;test_openapi.py::test_swagger_directory_service&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_openapi.py::test_swagger_directory_service&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_openapi.py::test_swagger_directory_service&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;def test_swagger_directory_service():\n        url = &amp;quot;???&amp;quot;\n&amp;gt;       _test_swagger(\n            url,\n            &amp;quot;docs/norme/XP_Z12-013_SWAGGER_Annexes_A_et_B_V1.2/ANNEXE B - PR XP Z12-013 - AFNOR-Directory_Service-1.1.0-swagger.json&amp;quot;,\n        )\n\ntest_openapi.py:28: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nurl = &amp;#x27;???&amp;#x27;, swagger = &amp;#x27;docs/norme/XP_Z12-013_SWAGGER_Annexes_A_et_B_V1.2/ANNEXE B - PR XP Z12-013 - AFNOR-Directory_Service-1.1.0-swagger.json&amp;#x27;\n\n    def _test_swagger(url: str, swagger: str):\n        &amp;quot;&amp;quot;&amp;quot;\n            V\u00e9rifier si une API respecte une definition Swagger/OpenAPI\n    \n        Cette API doit respecter le versioning indiqu\u00e9 dans l\u2019URL de la route API du Swagger. Dans un objectif de\n        simplification le versioning des routes n\u2019est pas affich\u00e9 dans le pr\u00e9sent document;\n        Dans cette API publi\u00e9e par le Fournisseur API ce dernier peut :\n        \u2022Avoir une URL sp\u00e9cifique en amont du versioning\n        \u2022Ajouter des propri\u00e9t\u00e9s aux objets dans les requ\u00eates.\n        \u2022Ajouter des param\u00e8tres aux routes dans les requ\u00eates.\n        \u2022Ajouter des propri\u00e9t\u00e9s aux objets dans les r\u00e9ponses.\n        \u2022Ajouter des codes erreurs dans les r\u00e9ponses.\n        &amp;quot;&amp;quot;&amp;quot;\n&amp;gt;       raise NotImplementedError(&amp;quot;swagger compliance non test\u00e9&amp;quot;)\nE       NotImplementedError: swagger compliance non test\u00e9\n\ntest_openapi.py:14: NotImplementedError\n&#34;}], &#34;test_pac0.py::test_pac0_import_services&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_pac0.py::test_pac0_import_services&#34;, &#34;duration&#34;: &#34;9 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_pac0.py::test_pac0_import_services&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;9 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;+ Exception Group Traceback (most recent call last):\n  |   File &amp;quot;/home/philippe/src/PA_Communautaire/packages/pac-bdd/test_pac0.py&amp;quot;, line 17, in test_pac0_import_services\n  |     async with asyncio.TaskGroup() as tg:\n  |                ~~~~~~~~~~~~~~~~~^^\n  |   File &amp;quot;/home/philippe/.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/asyncio/taskgroups.py&amp;quot;, line 71, in __aexit__\n  |     return await self._aexit(et, exc)\n  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  |   File &amp;quot;/home/philippe/.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/asyncio/taskgroups.py&amp;quot;, line 173, in _aexit\n  |     raise BaseExceptionGroup(\n  |     ...&amp;lt;2 lines&amp;gt;...\n  |     ) from None\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Traceback (most recent call last):\n    |   File &amp;quot;/home/philippe/src/PA_Communautaire/packages/pac-bdd/test_pac0.py&amp;quot;, line 18, in test_pac0_import_services\n    |     task1 = tg.create_task(api_gateway_main.app.run())\n    |                            ^^^^^^^^^^^^^^^^^^^^^^^^\n    | AttributeError: &amp;#x27;FastAPI&amp;#x27; object has no attribute &amp;#x27;run&amp;#x27;\n    +------------------------------------\n&#34;}], &#34;test_scenario.py::test_trackingid_fourni&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_trackingid_fourni&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_trackingid_fourni&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;file /home/philippe/src/PA_Communautaire/packages/pac-bdd/.venv/lib/python3.13/site-packages/pytest_bdd/scenario.py, line 296\n          def scenario_wrapper(request: FixtureRequest, _pytest_bdd_example: dict[str, str]) -&amp;gt; Any:\nE       fixture &amp;#x27;world1pac&amp;#x27; not found\n&amp;gt;       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _pytest_bdd_example, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, auth, author, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_metadata_in_junit_xml, metadata, monkeypatch, pac, peppol_context, peppol_service, pytestbdd_stepdef_given_#{enterprise_id} ne supporte que les factures UBL, pytestbdd_stepdef_given_#{entity_id} accessible via Chorus Pro sur PEPPOL, pytestbdd_stepdef_given_#{pa_id1} et #{pa_id2} enregistr\u00e9es mutuellement sur PEPPOL, pytestbdd_stepdef_given_l&amp;#x27;entit\u00e9 publique #{entity_id} avec le SIRET &amp;quot;{siret}&amp;quot;, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} avec le SIREN &amp;quot;{siren}&amp;quot;, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} avec le SIRET &amp;quot;{siret}&amp;quot;, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} enregistr\u00e9e sur PEPPOL, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} enregistr\u00e9e sur PEPPOL avec scheme &amp;quot;{scheme}&amp;quot;, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} enregistr\u00e9e sur la PA #{pa_id}, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} enregistr\u00e9e sur la PA #{pa_id} via PEPPOL, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} non enregistr\u00e9e sur PEPPOL, pytestbdd_stepdef_given_la PA #{pa_id}, pytestbdd_stepdef_given_la facture #{invoice_id} de #{sender_id} \u00e0 #{recipient_id}, pytestbdd_stepdef_given_la racine SML &amp;quot;{zone}&amp;quot;, pytestbdd_stepdef_given_le SML de test &amp;quot;{sml_zone}&amp;quot;, pytestbdd_stepdef_given_le SMP de #{enterprise_id} accessible \u00e0 &amp;quot;{smp_url}&amp;quot;, pytestbdd_stepdef_given_le SMP de #{enterprise_id} disponible apr\u00e8s {delay:d} secondes, pytestbdd_stepdef_given_le SMP de #{enterprise_id} d\u00e9finitivement indisponible, pytestbdd_stepdef_given_le SMP de #{enterprise_id} indisponible la premi\u00e8re fois, pytestbdd_stepdef_given_le SMP de #{enterprise_id} temporairement indisponible (HTTP 503), pytestbdd_stepdef_given_le destinataire de #{invoice_id} est #{enterprise_id}, pytestbdd_stepdef_given_le service PEPPOL configur\u00e9 en mode &amp;quot;{mode}&amp;quot;, pytestbdd_stepdef_given_le service PEPPOL simul\u00e9 avec:, pytestbdd_stepdef_given_trace, pytestbdd_stepdef_given_un SML de test lent, pytestbdd_stepdef_given_un timeout configur\u00e9 \u00e0 {timeout:d} secondes, pytestbdd_stepdef_given_un utilisateur, pytestbdd_stepdef_given_un utilisateur de la PA #{pa}, pytestbdd_stepdef_given_une facture #{invoice_id} re\u00e7ue via AS4 depuis une PA distante, pytestbdd_stepdef_then_PEPPOL retourne &amp;quot;{error_code}&amp;quot;, pytestbdd_stepdef_then_PEPPOL retourne l&amp;#x27;endpoint Chorus Pro via Pagero, pytestbdd_stepdef_then_PEPPOL retourne l&amp;#x27;endpoint de #{pa_id}, pytestbdd_stepdef_then_j&amp;#x27;obtiens &amp;quot;{result}&amp;quot;, pytestbdd_stepdef_then_j&amp;#x27;obtiens l&amp;#x27;URL du SMP &amp;quot;{smp_url}&amp;quot;, pytestbdd_stepdef_then_j&amp;#x27;obtiens l&amp;#x27;endpoint de la PA responsable, pytestbdd_stepdef_then_j&amp;#x27;obtiens le code de retour {code}, pytestbdd_stepdef_then_j&amp;#x27;obtiens le statut &amp;quot;{status}&amp;quot;, pytestbdd_stepdef_then_j&amp;#x27;obtiens le statut #{status}, pytestbdd_stepdef_then_j&amp;#x27;obtiens sur le canal &amp;#x27;healthcheck_resp&amp;#x27; le message &amp;#x27;toto&amp;#x27;, pytestbdd_stepdef_then_j&amp;#x27;obtiens sur le canal &amp;#x27;{canal}&amp;#x27; un message, pytestbdd_stepdef_then_j&amp;#x27;obtiens un num\u00e9ro de t\u00e2che, pytestbdd_stepdef_then_j&amp;#x27;obtiens une erreur &amp;quot;{error_code}&amp;quot;, pytestbdd_stepdef_then_j&amp;#x27;obtiens une erreur DNS &amp;quot;{error}&amp;quot;, pytestbdd_stepdef_then_j&amp;#x27;obtiens une erreur HTTP {status_code:d}, pytestbdd_stepdef_then_j&amp;#x27;obtiens une r\u00e9ponse DNS valide, pytestbdd_stepdef_then_j&amp;#x27;obtiens une r\u00e9ponse SML valide, pytestbdd_stepdef_then_j&amp;#x27;obtiens une r\u00e9ponse SMP valide, pytestbdd_stepdef_then_l&amp;#x27;adresse de l&amp;#x27;endpoint est &amp;quot;{address}&amp;quot;, pytestbdd_stepdef_then_l&amp;#x27;endpoint AS4 est &amp;quot;{endpoint}&amp;quot;, pytestbdd_stepdef_then_l&amp;#x27;identification par {facon} porte le code &amp;quot;{code}&amp;quot;, pytestbdd_stepdef_then_la destination est &amp;quot;{destination}&amp;quot;, pytestbdd_stepdef_then_la facture #{invoice_id} est rout\u00e9e vers #{pa_id} via PEPPOL, pytestbdd_stepdef_then_la facture est livr\u00e9e localement \u00e0 #{enterprise_id}, pytestbdd_stepdef_then_la facture est livr\u00e9e \u00e0 #{enterprise_id}, pytestbdd_stepdef_then_la facture est mise en file d&amp;#x27;attente pour retry, pytestbdd_stepdef_then_la facture est transmise au PPF, pytestbdd_stepdef_then_la facture est transmise au PPF_1, pytestbdd_stepdef_then_la facture est transmise au service de routage, pytestbdd_stepdef_then_la facture est transmise \u00e0 #{pa_id} via AS4, pytestbdd_stepdef_then_la facture est transmise \u00e0 #{pa_id} via AS4_1, pytestbdd_stepdef_then_la facture est transmise \u00e0 Chorus Pro, pytestbdd_stepdef_then_la facture est valid\u00e9e, pytestbdd_stepdef_then_la facture n&amp;#x27;est PAS transmise au service de routage, pytestbdd_stepdef_then_la facture passe par l&amp;#x27;annuaire local, pytestbdd_stepdef_then_la facture passe par le service de validation, pytestbdd_stepdef_then_la premi\u00e8re tentative \u00e9choue, pytestbdd_stepdef_then_la requ\u00eate SMP \u00e9choue avec HTTP {status_code:d}, pytestbdd_stepdef_then_la r\u00e9ponse SMP est sign\u00e9e, pytestbdd_stepdef_then_la r\u00e9solution SML r\u00e9ussit, pytestbdd_stepdef_then_la seconde tentative r\u00e9ussit, pytestbdd_stepdef_then_la signature est valide, pytestbdd_stepdef_then_le certificat est au format X.509, pytestbdd_stepdef_then_le certificat est pr\u00e9sent et valide, pytestbdd_stepdef_then_le certificat est sign\u00e9 par une autorit\u00e9 PEPPOL valide, pytestbdd_stepdef_then_le certificat n&amp;#x27;est pas expir\u00e9, pytestbdd_stepdef_then_le certificat n&amp;#x27;est pas r\u00e9voqu\u00e9, pytestbdd_stepdef_then_le code erreur est &amp;quot;{error_code}&amp;quot;, pytestbdd_stepdef_then_le destinataire #{enterprise_id} est trouv\u00e9 localement, pytestbdd_stepdef_then_le destinataire #{enterprise_id} n&amp;#x27;est pas trouv\u00e9 localement, pytestbdd_stepdef_then_le hostname SML est &amp;quot;B-{{hash}}.iso6523-actorid-upis.{sml_zone}&amp;quot;, pytestbdd_stepdef_then_le lookup PEPPOL r\u00e9ussit, pytestbdd_stepdef_then_le lookup PEPPOL \u00e9choue, pytestbdd_stepdef_then_le message erreur contient &amp;quot;{text}&amp;quot;, pytestbdd_stepdef_then_le process identifier est &amp;quot;{process_id}&amp;quot;, pytestbdd_stepdef_then_le routage \u00e9choue d\u00e9finitivement, pytestbdd_stepdef_then_le service de routage consulte PEPPOL, pytestbdd_stepdef_then_le service de routage consulte PEPPOL pour #{enterprise_id}, pytestbdd_stepdef_then_le service de routage ne consulte PAS PEPPOL, pytestbdd_stepdef_then_le signataire est le SMP enregistr\u00e9, pytestbdd_stepdef_then_le transport profile est &amp;quot;{transport_profile}&amp;quot;, pytestbdd_stepdef_then_les document types support\u00e9s incluent:, pytestbdd_stepdef_then_trace, pytestbdd_stepdef_then_un accus\u00e9 de r\u00e9ception AS4 est envoy\u00e9, pytestbdd_stepdef_then_un message d&amp;#x27;erreur est publi\u00e9 sur &amp;quot;{channel}&amp;quot;, pytestbdd_stepdef_then_une seconde tentative est programm\u00e9e apr\u00e8s {delay:d} secondes, pytestbdd_stepdef_when_j&amp;#x27;appele l&amp;#x27;API {verb} {path}, pytestbdd_stepdef_when_j&amp;#x27;interroge la t\u00e2che, pytestbdd_stepdef_when_j&amp;#x27;interroge le SML via DNS, pytestbdd_stepdef_when_j&amp;#x27;\u00e9coute le canal &amp;#x27;{canal}&amp;#x27;, pytestbdd_stepdef_when_je calcule l&amp;#x27;empreinte md5 de &amp;quot;{msg}&amp;quot;, pytestbdd_stepdef_when_je calcule l&amp;#x27;empreinte {facon} &amp;quot;{id}&amp;quot;, pytestbdd_stepdef_when_je calcule l&amp;#x27;h\u00f4te SML pour {facon} &amp;quot;{id}&amp;quot;, pytestbdd_stepdef_when_je d\u00e9finis un contr\u00f4le de conformit\u00e9 m\u00e9tier fournisseur, pytestbdd_stepdef_when_je d\u00e9pose la facture #{invoice_id}, pytestbdd_stepdef_when_je d\u00e9pose la facture #{invoice} sur #{pa}, pytestbdd_stepdef_when_je d\u00e9pose pour contr\u00f4le la facture @{invoice}, pytestbdd_stepdef_when_je d\u00e9pose une facture, pytestbdd_stepdef_when_je publie le message &amp;#x27;{msg}&amp;#x27; sur le canal &amp;#x27;{canal}&amp;#x27;, pytestbdd_stepdef_when_je recherche le participant PEPPOL pour #{enterprise_id}, pytestbdd_stepdef_when_je recherche le participant PEPPOL pour le SIREN &amp;quot;{siren}&amp;quot;, pytestbdd_stepdef_when_je recherche le participant PEPPOL pour le SIRET &amp;quot;{siret}&amp;quot;, pytestbdd_stepdef_when_je recherche les m\u00e9tadonn\u00e9es SMP pour #{enterprise_id}, pytestbdd_stepdef_when_je r\u00e9cup\u00e8re la liste des document types pour #{enterprise_id}, pytestbdd_stepdef_when_je r\u00e9cup\u00e8re les m\u00e9tadonn\u00e9es SMP pour #{enterprise_id}, pytestbdd_stepdef_when_l&amp;#x27;adresse de contr\u00f4le &amp;quot;{url}&amp;quot;, pytestbdd_stepdef_when_la PA #{pa_id} re\u00e7oit la facture #{invoice_id} via AS4, pytestbdd_stepdef_when_la requ\u00eate DNS prend plus de {timeout:d} secondes, pytestbdd_stepdef_when_le document type est &amp;quot;{doc_type}&amp;quot;, pytestbdd_stepdef_when_le service de routage consulte PEPPOL pour #{enterprise_id}, pytestbdd_stepdef_when_trace, pytestbdd_stepdef_when_un utilisateur de #{pa_id} d\u00e9pose la facture #{invoice_id}, pytestbdd_stepdef_when_{retries:d} tentatives \u00e9chouent, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, user, world\n&amp;gt;       use &amp;#x27;pytest --fixtures [testpath]&amp;#x27; for help on them.\n\n/home/philippe/src/PA_Communautaire/packages/pac-bdd/.venv/lib/python3.13/site-packages/pytest_bdd/scenario.py:296\n&#34;}], &#34;test_scenario.py::test_trackingid_absent&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_trackingid_absent&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_trackingid_absent&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;file /home/philippe/src/PA_Communautaire/packages/pac-bdd/.venv/lib/python3.13/site-packages/pytest_bdd/scenario.py, line 296\n          def scenario_wrapper(request: FixtureRequest, _pytest_bdd_example: dict[str, str]) -&amp;gt; Any:\nE       fixture &amp;#x27;world1pac&amp;#x27; not found\n&amp;gt;       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _pytest_bdd_example, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, auth, author, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_metadata_in_junit_xml, metadata, monkeypatch, pac, peppol_context, peppol_service, pytestbdd_stepdef_given_#{enterprise_id} ne supporte que les factures UBL, pytestbdd_stepdef_given_#{entity_id} accessible via Chorus Pro sur PEPPOL, pytestbdd_stepdef_given_#{pa_id1} et #{pa_id2} enregistr\u00e9es mutuellement sur PEPPOL, pytestbdd_stepdef_given_l&amp;#x27;entit\u00e9 publique #{entity_id} avec le SIRET &amp;quot;{siret}&amp;quot;, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} avec le SIREN &amp;quot;{siren}&amp;quot;, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} avec le SIRET &amp;quot;{siret}&amp;quot;, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} enregistr\u00e9e sur PEPPOL, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} enregistr\u00e9e sur PEPPOL avec scheme &amp;quot;{scheme}&amp;quot;, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} enregistr\u00e9e sur la PA #{pa_id}, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} enregistr\u00e9e sur la PA #{pa_id} via PEPPOL, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} non enregistr\u00e9e sur PEPPOL, pytestbdd_stepdef_given_la PA #{pa_id}, pytestbdd_stepdef_given_la facture #{invoice_id} de #{sender_id} \u00e0 #{recipient_id}, pytestbdd_stepdef_given_la racine SML &amp;quot;{zone}&amp;quot;, pytestbdd_stepdef_given_le SML de test &amp;quot;{sml_zone}&amp;quot;, pytestbdd_stepdef_given_le SMP de #{enterprise_id} accessible \u00e0 &amp;quot;{smp_url}&amp;quot;, pytestbdd_stepdef_given_le SMP de #{enterprise_id} disponible apr\u00e8s {delay:d} secondes, pytestbdd_stepdef_given_le SMP de #{enterprise_id} d\u00e9finitivement indisponible, pytestbdd_stepdef_given_le SMP de #{enterprise_id} indisponible la premi\u00e8re fois, pytestbdd_stepdef_given_le SMP de #{enterprise_id} temporairement indisponible (HTTP 503), pytestbdd_stepdef_given_le destinataire de #{invoice_id} est #{enterprise_id}, pytestbdd_stepdef_given_le service PEPPOL configur\u00e9 en mode &amp;quot;{mode}&amp;quot;, pytestbdd_stepdef_given_le service PEPPOL simul\u00e9 avec:, pytestbdd_stepdef_given_trace, pytestbdd_stepdef_given_un SML de test lent, pytestbdd_stepdef_given_un timeout configur\u00e9 \u00e0 {timeout:d} secondes, pytestbdd_stepdef_given_un utilisateur, pytestbdd_stepdef_given_un utilisateur de la PA #{pa}, pytestbdd_stepdef_given_une facture #{invoice_id} re\u00e7ue via AS4 depuis une PA distante, pytestbdd_stepdef_then_PEPPOL retourne &amp;quot;{error_code}&amp;quot;, pytestbdd_stepdef_then_PEPPOL retourne l&amp;#x27;endpoint Chorus Pro via Pagero, pytestbdd_stepdef_then_PEPPOL retourne l&amp;#x27;endpoint de #{pa_id}, pytestbdd_stepdef_then_j&amp;#x27;obtiens &amp;quot;{result}&amp;quot;, pytestbdd_stepdef_then_j&amp;#x27;obtiens l&amp;#x27;URL du SMP &amp;quot;{smp_url}&amp;quot;, pytestbdd_stepdef_then_j&amp;#x27;obtiens l&amp;#x27;endpoint de la PA responsable, pytestbdd_stepdef_then_j&amp;#x27;obtiens le code de retour {code}, pytestbdd_stepdef_then_j&amp;#x27;obtiens le statut &amp;quot;{status}&amp;quot;, pytestbdd_stepdef_then_j&amp;#x27;obtiens le statut #{status}, pytestbdd_stepdef_then_j&amp;#x27;obtiens sur le canal &amp;#x27;healthcheck_resp&amp;#x27; le message &amp;#x27;toto&amp;#x27;, pytestbdd_stepdef_then_j&amp;#x27;obtiens sur le canal &amp;#x27;{canal}&amp;#x27; un message, pytestbdd_stepdef_then_j&amp;#x27;obtiens un num\u00e9ro de t\u00e2che, pytestbdd_stepdef_then_j&amp;#x27;obtiens une erreur &amp;quot;{error_code}&amp;quot;, pytestbdd_stepdef_then_j&amp;#x27;obtiens une erreur DNS &amp;quot;{error}&amp;quot;, pytestbdd_stepdef_then_j&amp;#x27;obtiens une erreur HTTP {status_code:d}, pytestbdd_stepdef_then_j&amp;#x27;obtiens une r\u00e9ponse DNS valide, pytestbdd_stepdef_then_j&amp;#x27;obtiens une r\u00e9ponse SML valide, pytestbdd_stepdef_then_j&amp;#x27;obtiens une r\u00e9ponse SMP valide, pytestbdd_stepdef_then_l&amp;#x27;adresse de l&amp;#x27;endpoint est &amp;quot;{address}&amp;quot;, pytestbdd_stepdef_then_l&amp;#x27;endpoint AS4 est &amp;quot;{endpoint}&amp;quot;, pytestbdd_stepdef_then_l&amp;#x27;identification par {facon} porte le code &amp;quot;{code}&amp;quot;, pytestbdd_stepdef_then_la destination est &amp;quot;{destination}&amp;quot;, pytestbdd_stepdef_then_la facture #{invoice_id} est rout\u00e9e vers #{pa_id} via PEPPOL, pytestbdd_stepdef_then_la facture est livr\u00e9e localement \u00e0 #{enterprise_id}, pytestbdd_stepdef_then_la facture est livr\u00e9e \u00e0 #{enterprise_id}, pytestbdd_stepdef_then_la facture est mise en file d&amp;#x27;attente pour retry, pytestbdd_stepdef_then_la facture est transmise au PPF, pytestbdd_stepdef_then_la facture est transmise au PPF_1, pytestbdd_stepdef_then_la facture est transmise au service de routage, pytestbdd_stepdef_then_la facture est transmise \u00e0 #{pa_id} via AS4, pytestbdd_stepdef_then_la facture est transmise \u00e0 #{pa_id} via AS4_1, pytestbdd_stepdef_then_la facture est transmise \u00e0 Chorus Pro, pytestbdd_stepdef_then_la facture est valid\u00e9e, pytestbdd_stepdef_then_la facture n&amp;#x27;est PAS transmise au service de routage, pytestbdd_stepdef_then_la facture passe par l&amp;#x27;annuaire local, pytestbdd_stepdef_then_la facture passe par le service de validation, pytestbdd_stepdef_then_la premi\u00e8re tentative \u00e9choue, pytestbdd_stepdef_then_la requ\u00eate SMP \u00e9choue avec HTTP {status_code:d}, pytestbdd_stepdef_then_la r\u00e9ponse SMP est sign\u00e9e, pytestbdd_stepdef_then_la r\u00e9solution SML r\u00e9ussit, pytestbdd_stepdef_then_la seconde tentative r\u00e9ussit, pytestbdd_stepdef_then_la signature est valide, pytestbdd_stepdef_then_le certificat est au format X.509, pytestbdd_stepdef_then_le certificat est pr\u00e9sent et valide, pytestbdd_stepdef_then_le certificat est sign\u00e9 par une autorit\u00e9 PEPPOL valide, pytestbdd_stepdef_then_le certificat n&amp;#x27;est pas expir\u00e9, pytestbdd_stepdef_then_le certificat n&amp;#x27;est pas r\u00e9voqu\u00e9, pytestbdd_stepdef_then_le code erreur est &amp;quot;{error_code}&amp;quot;, pytestbdd_stepdef_then_le destinataire #{enterprise_id} est trouv\u00e9 localement, pytestbdd_stepdef_then_le destinataire #{enterprise_id} n&amp;#x27;est pas trouv\u00e9 localement, pytestbdd_stepdef_then_le hostname SML est &amp;quot;B-{{hash}}.iso6523-actorid-upis.{sml_zone}&amp;quot;, pytestbdd_stepdef_then_le lookup PEPPOL r\u00e9ussit, pytestbdd_stepdef_then_le lookup PEPPOL \u00e9choue, pytestbdd_stepdef_then_le message erreur contient &amp;quot;{text}&amp;quot;, pytestbdd_stepdef_then_le process identifier est &amp;quot;{process_id}&amp;quot;, pytestbdd_stepdef_then_le routage \u00e9choue d\u00e9finitivement, pytestbdd_stepdef_then_le service de routage consulte PEPPOL, pytestbdd_stepdef_then_le service de routage consulte PEPPOL pour #{enterprise_id}, pytestbdd_stepdef_then_le service de routage ne consulte PAS PEPPOL, pytestbdd_stepdef_then_le signataire est le SMP enregistr\u00e9, pytestbdd_stepdef_then_le transport profile est &amp;quot;{transport_profile}&amp;quot;, pytestbdd_stepdef_then_les document types support\u00e9s incluent:, pytestbdd_stepdef_then_trace, pytestbdd_stepdef_then_un accus\u00e9 de r\u00e9ception AS4 est envoy\u00e9, pytestbdd_stepdef_then_un message d&amp;#x27;erreur est publi\u00e9 sur &amp;quot;{channel}&amp;quot;, pytestbdd_stepdef_then_une seconde tentative est programm\u00e9e apr\u00e8s {delay:d} secondes, pytestbdd_stepdef_when_j&amp;#x27;appele l&amp;#x27;API {verb} {path}, pytestbdd_stepdef_when_j&amp;#x27;interroge la t\u00e2che, pytestbdd_stepdef_when_j&amp;#x27;interroge le SML via DNS, pytestbdd_stepdef_when_j&amp;#x27;\u00e9coute le canal &amp;#x27;{canal}&amp;#x27;, pytestbdd_stepdef_when_je calcule l&amp;#x27;empreinte md5 de &amp;quot;{msg}&amp;quot;, pytestbdd_stepdef_when_je calcule l&amp;#x27;empreinte {facon} &amp;quot;{id}&amp;quot;, pytestbdd_stepdef_when_je calcule l&amp;#x27;h\u00f4te SML pour {facon} &amp;quot;{id}&amp;quot;, pytestbdd_stepdef_when_je d\u00e9finis un contr\u00f4le de conformit\u00e9 m\u00e9tier fournisseur, pytestbdd_stepdef_when_je d\u00e9pose la facture #{invoice_id}, pytestbdd_stepdef_when_je d\u00e9pose la facture #{invoice} sur #{pa}, pytestbdd_stepdef_when_je d\u00e9pose pour contr\u00f4le la facture @{invoice}, pytestbdd_stepdef_when_je d\u00e9pose une facture, pytestbdd_stepdef_when_je publie le message &amp;#x27;{msg}&amp;#x27; sur le canal &amp;#x27;{canal}&amp;#x27;, pytestbdd_stepdef_when_je recherche le participant PEPPOL pour #{enterprise_id}, pytestbdd_stepdef_when_je recherche le participant PEPPOL pour le SIREN &amp;quot;{siren}&amp;quot;, pytestbdd_stepdef_when_je recherche le participant PEPPOL pour le SIRET &amp;quot;{siret}&amp;quot;, pytestbdd_stepdef_when_je recherche les m\u00e9tadonn\u00e9es SMP pour #{enterprise_id}, pytestbdd_stepdef_when_je r\u00e9cup\u00e8re la liste des document types pour #{enterprise_id}, pytestbdd_stepdef_when_je r\u00e9cup\u00e8re les m\u00e9tadonn\u00e9es SMP pour #{enterprise_id}, pytestbdd_stepdef_when_l&amp;#x27;adresse de contr\u00f4le &amp;quot;{url}&amp;quot;, pytestbdd_stepdef_when_la PA #{pa_id} re\u00e7oit la facture #{invoice_id} via AS4, pytestbdd_stepdef_when_la requ\u00eate DNS prend plus de {timeout:d} secondes, pytestbdd_stepdef_when_le document type est &amp;quot;{doc_type}&amp;quot;, pytestbdd_stepdef_when_le service de routage consulte PEPPOL pour #{enterprise_id}, pytestbdd_stepdef_when_trace, pytestbdd_stepdef_when_un utilisateur de #{pa_id} d\u00e9pose la facture #{invoice_id}, pytestbdd_stepdef_when_{retries:d} tentatives \u00e9chouent, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, user, world\n&amp;gt;       use &amp;#x27;pytest --fixtures [testpath]&amp;#x27; for help on them.\n\n/home/philippe/src/PA_Communautaire/packages/pac-bdd/.venv/lib/python3.13/site-packages/pytest_bdd/scenario.py:296\n&#34;}], &#34;test_scenario.py::test_trackingid_doublon&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_trackingid_doublon&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_trackingid_doublon&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;file /home/philippe/src/PA_Communautaire/packages/pac-bdd/.venv/lib/python3.13/site-packages/pytest_bdd/scenario.py, line 296\n          def scenario_wrapper(request: FixtureRequest, _pytest_bdd_example: dict[str, str]) -&amp;gt; Any:\nE       fixture &amp;#x27;world1pac&amp;#x27; not found\n&amp;gt;       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _pytest_bdd_example, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, auth, author, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_metadata_in_junit_xml, metadata, monkeypatch, pac, peppol_context, peppol_service, pytestbdd_stepdef_given_#{enterprise_id} ne supporte que les factures UBL, pytestbdd_stepdef_given_#{entity_id} accessible via Chorus Pro sur PEPPOL, pytestbdd_stepdef_given_#{pa_id1} et #{pa_id2} enregistr\u00e9es mutuellement sur PEPPOL, pytestbdd_stepdef_given_l&amp;#x27;entit\u00e9 publique #{entity_id} avec le SIRET &amp;quot;{siret}&amp;quot;, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} avec le SIREN &amp;quot;{siren}&amp;quot;, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} avec le SIRET &amp;quot;{siret}&amp;quot;, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} enregistr\u00e9e sur PEPPOL, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} enregistr\u00e9e sur PEPPOL avec scheme &amp;quot;{scheme}&amp;quot;, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} enregistr\u00e9e sur la PA #{pa_id}, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} enregistr\u00e9e sur la PA #{pa_id} via PEPPOL, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} non enregistr\u00e9e sur PEPPOL, pytestbdd_stepdef_given_la PA #{pa_id}, pytestbdd_stepdef_given_la facture #{invoice_id} de #{sender_id} \u00e0 #{recipient_id}, pytestbdd_stepdef_given_la racine SML &amp;quot;{zone}&amp;quot;, pytestbdd_stepdef_given_le SML de test &amp;quot;{sml_zone}&amp;quot;, pytestbdd_stepdef_given_le SMP de #{enterprise_id} accessible \u00e0 &amp;quot;{smp_url}&amp;quot;, pytestbdd_stepdef_given_le SMP de #{enterprise_id} disponible apr\u00e8s {delay:d} secondes, pytestbdd_stepdef_given_le SMP de #{enterprise_id} d\u00e9finitivement indisponible, pytestbdd_stepdef_given_le SMP de #{enterprise_id} indisponible la premi\u00e8re fois, pytestbdd_stepdef_given_le SMP de #{enterprise_id} temporairement indisponible (HTTP 503), pytestbdd_stepdef_given_le destinataire de #{invoice_id} est #{enterprise_id}, pytestbdd_stepdef_given_le service PEPPOL configur\u00e9 en mode &amp;quot;{mode}&amp;quot;, pytestbdd_stepdef_given_le service PEPPOL simul\u00e9 avec:, pytestbdd_stepdef_given_trace, pytestbdd_stepdef_given_un SML de test lent, pytestbdd_stepdef_given_un timeout configur\u00e9 \u00e0 {timeout:d} secondes, pytestbdd_stepdef_given_un utilisateur, pytestbdd_stepdef_given_un utilisateur de la PA #{pa}, pytestbdd_stepdef_given_une facture #{invoice_id} re\u00e7ue via AS4 depuis une PA distante, pytestbdd_stepdef_then_PEPPOL retourne &amp;quot;{error_code}&amp;quot;, pytestbdd_stepdef_then_PEPPOL retourne l&amp;#x27;endpoint Chorus Pro via Pagero, pytestbdd_stepdef_then_PEPPOL retourne l&amp;#x27;endpoint de #{pa_id}, pytestbdd_stepdef_then_j&amp;#x27;obtiens &amp;quot;{result}&amp;quot;, pytestbdd_stepdef_then_j&amp;#x27;obtiens l&amp;#x27;URL du SMP &amp;quot;{smp_url}&amp;quot;, pytestbdd_stepdef_then_j&amp;#x27;obtiens l&amp;#x27;endpoint de la PA responsable, pytestbdd_stepdef_then_j&amp;#x27;obtiens le code de retour {code}, pytestbdd_stepdef_then_j&amp;#x27;obtiens le statut &amp;quot;{status}&amp;quot;, pytestbdd_stepdef_then_j&amp;#x27;obtiens le statut #{status}, pytestbdd_stepdef_then_j&amp;#x27;obtiens sur le canal &amp;#x27;healthcheck_resp&amp;#x27; le message &amp;#x27;toto&amp;#x27;, pytestbdd_stepdef_then_j&amp;#x27;obtiens sur le canal &amp;#x27;{canal}&amp;#x27; un message, pytestbdd_stepdef_then_j&amp;#x27;obtiens un num\u00e9ro de t\u00e2che, pytestbdd_stepdef_then_j&amp;#x27;obtiens une erreur &amp;quot;{error_code}&amp;quot;, pytestbdd_stepdef_then_j&amp;#x27;obtiens une erreur DNS &amp;quot;{error}&amp;quot;, pytestbdd_stepdef_then_j&amp;#x27;obtiens une erreur HTTP {status_code:d}, pytestbdd_stepdef_then_j&amp;#x27;obtiens une r\u00e9ponse DNS valide, pytestbdd_stepdef_then_j&amp;#x27;obtiens une r\u00e9ponse SML valide, pytestbdd_stepdef_then_j&amp;#x27;obtiens une r\u00e9ponse SMP valide, pytestbdd_stepdef_then_l&amp;#x27;adresse de l&amp;#x27;endpoint est &amp;quot;{address}&amp;quot;, pytestbdd_stepdef_then_l&amp;#x27;endpoint AS4 est &amp;quot;{endpoint}&amp;quot;, pytestbdd_stepdef_then_l&amp;#x27;identification par {facon} porte le code &amp;quot;{code}&amp;quot;, pytestbdd_stepdef_then_la destination est &amp;quot;{destination}&amp;quot;, pytestbdd_stepdef_then_la facture #{invoice_id} est rout\u00e9e vers #{pa_id} via PEPPOL, pytestbdd_stepdef_then_la facture est livr\u00e9e localement \u00e0 #{enterprise_id}, pytestbdd_stepdef_then_la facture est livr\u00e9e \u00e0 #{enterprise_id}, pytestbdd_stepdef_then_la facture est mise en file d&amp;#x27;attente pour retry, pytestbdd_stepdef_then_la facture est transmise au PPF, pytestbdd_stepdef_then_la facture est transmise au PPF_1, pytestbdd_stepdef_then_la facture est transmise au service de routage, pytestbdd_stepdef_then_la facture est transmise \u00e0 #{pa_id} via AS4, pytestbdd_stepdef_then_la facture est transmise \u00e0 #{pa_id} via AS4_1, pytestbdd_stepdef_then_la facture est transmise \u00e0 Chorus Pro, pytestbdd_stepdef_then_la facture est valid\u00e9e, pytestbdd_stepdef_then_la facture n&amp;#x27;est PAS transmise au service de routage, pytestbdd_stepdef_then_la facture passe par l&amp;#x27;annuaire local, pytestbdd_stepdef_then_la facture passe par le service de validation, pytestbdd_stepdef_then_la premi\u00e8re tentative \u00e9choue, pytestbdd_stepdef_then_la requ\u00eate SMP \u00e9choue avec HTTP {status_code:d}, pytestbdd_stepdef_then_la r\u00e9ponse SMP est sign\u00e9e, pytestbdd_stepdef_then_la r\u00e9solution SML r\u00e9ussit, pytestbdd_stepdef_then_la seconde tentative r\u00e9ussit, pytestbdd_stepdef_then_la signature est valide, pytestbdd_stepdef_then_le certificat est au format X.509, pytestbdd_stepdef_then_le certificat est pr\u00e9sent et valide, pytestbdd_stepdef_then_le certificat est sign\u00e9 par une autorit\u00e9 PEPPOL valide, pytestbdd_stepdef_then_le certificat n&amp;#x27;est pas expir\u00e9, pytestbdd_stepdef_then_le certificat n&amp;#x27;est pas r\u00e9voqu\u00e9, pytestbdd_stepdef_then_le code erreur est &amp;quot;{error_code}&amp;quot;, pytestbdd_stepdef_then_le destinataire #{enterprise_id} est trouv\u00e9 localement, pytestbdd_stepdef_then_le destinataire #{enterprise_id} n&amp;#x27;est pas trouv\u00e9 localement, pytestbdd_stepdef_then_le hostname SML est &amp;quot;B-{{hash}}.iso6523-actorid-upis.{sml_zone}&amp;quot;, pytestbdd_stepdef_then_le lookup PEPPOL r\u00e9ussit, pytestbdd_stepdef_then_le lookup PEPPOL \u00e9choue, pytestbdd_stepdef_then_le message erreur contient &amp;quot;{text}&amp;quot;, pytestbdd_stepdef_then_le process identifier est &amp;quot;{process_id}&amp;quot;, pytestbdd_stepdef_then_le routage \u00e9choue d\u00e9finitivement, pytestbdd_stepdef_then_le service de routage consulte PEPPOL, pytestbdd_stepdef_then_le service de routage consulte PEPPOL pour #{enterprise_id}, pytestbdd_stepdef_then_le service de routage ne consulte PAS PEPPOL, pytestbdd_stepdef_then_le signataire est le SMP enregistr\u00e9, pytestbdd_stepdef_then_le transport profile est &amp;quot;{transport_profile}&amp;quot;, pytestbdd_stepdef_then_les document types support\u00e9s incluent:, pytestbdd_stepdef_then_trace, pytestbdd_stepdef_then_un accus\u00e9 de r\u00e9ception AS4 est envoy\u00e9, pytestbdd_stepdef_then_un message d&amp;#x27;erreur est publi\u00e9 sur &amp;quot;{channel}&amp;quot;, pytestbdd_stepdef_then_une seconde tentative est programm\u00e9e apr\u00e8s {delay:d} secondes, pytestbdd_stepdef_when_j&amp;#x27;appele l&amp;#x27;API {verb} {path}, pytestbdd_stepdef_when_j&amp;#x27;interroge la t\u00e2che, pytestbdd_stepdef_when_j&amp;#x27;interroge le SML via DNS, pytestbdd_stepdef_when_j&amp;#x27;\u00e9coute le canal &amp;#x27;{canal}&amp;#x27;, pytestbdd_stepdef_when_je calcule l&amp;#x27;empreinte md5 de &amp;quot;{msg}&amp;quot;, pytestbdd_stepdef_when_je calcule l&amp;#x27;empreinte {facon} &amp;quot;{id}&amp;quot;, pytestbdd_stepdef_when_je calcule l&amp;#x27;h\u00f4te SML pour {facon} &amp;quot;{id}&amp;quot;, pytestbdd_stepdef_when_je d\u00e9finis un contr\u00f4le de conformit\u00e9 m\u00e9tier fournisseur, pytestbdd_stepdef_when_je d\u00e9pose la facture #{invoice_id}, pytestbdd_stepdef_when_je d\u00e9pose la facture #{invoice} sur #{pa}, pytestbdd_stepdef_when_je d\u00e9pose pour contr\u00f4le la facture @{invoice}, pytestbdd_stepdef_when_je d\u00e9pose une facture, pytestbdd_stepdef_when_je publie le message &amp;#x27;{msg}&amp;#x27; sur le canal &amp;#x27;{canal}&amp;#x27;, pytestbdd_stepdef_when_je recherche le participant PEPPOL pour #{enterprise_id}, pytestbdd_stepdef_when_je recherche le participant PEPPOL pour le SIREN &amp;quot;{siren}&amp;quot;, pytestbdd_stepdef_when_je recherche le participant PEPPOL pour le SIRET &amp;quot;{siret}&amp;quot;, pytestbdd_stepdef_when_je recherche les m\u00e9tadonn\u00e9es SMP pour #{enterprise_id}, pytestbdd_stepdef_when_je r\u00e9cup\u00e8re la liste des document types pour #{enterprise_id}, pytestbdd_stepdef_when_je r\u00e9cup\u00e8re les m\u00e9tadonn\u00e9es SMP pour #{enterprise_id}, pytestbdd_stepdef_when_l&amp;#x27;adresse de contr\u00f4le &amp;quot;{url}&amp;quot;, pytestbdd_stepdef_when_la PA #{pa_id} re\u00e7oit la facture #{invoice_id} via AS4, pytestbdd_stepdef_when_la requ\u00eate DNS prend plus de {timeout:d} secondes, pytestbdd_stepdef_when_le document type est &amp;quot;{doc_type}&amp;quot;, pytestbdd_stepdef_when_le service de routage consulte PEPPOL pour #{enterprise_id}, pytestbdd_stepdef_when_trace, pytestbdd_stepdef_when_un utilisateur de #{pa_id} d\u00e9pose la facture #{invoice_id}, pytestbdd_stepdef_when_{retries:d} tentatives \u00e9chouent, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, user, world\n&amp;gt;       use &amp;#x27;pytest --fixtures [testpath]&amp;#x27; for help on them.\n\n/home/philippe/src/PA_Communautaire/packages/pac-bdd/.venv/lib/python3.13/site-packages/pytest_bdd/scenario.py:296\n&#34;}], &#34;test_scenario.py::test_contr\u00f4le_sha256&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_contr\u00f4le_sha256&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_contr\u00f4le_sha256&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;file /home/philippe/src/PA_Communautaire/packages/pac-bdd/.venv/lib/python3.13/site-packages/pytest_bdd/scenario.py, line 296\n          def scenario_wrapper(request: FixtureRequest, _pytest_bdd_example: dict[str, str]) -&amp;gt; Any:\nE       fixture &amp;#x27;world1pac&amp;#x27; not found\n&amp;gt;       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _pytest_bdd_example, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, auth, author, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_metadata_in_junit_xml, metadata, monkeypatch, pac, peppol_context, peppol_service, pytestbdd_stepdef_given_#{enterprise_id} ne supporte que les factures UBL, pytestbdd_stepdef_given_#{entity_id} accessible via Chorus Pro sur PEPPOL, pytestbdd_stepdef_given_#{pa_id1} et #{pa_id2} enregistr\u00e9es mutuellement sur PEPPOL, pytestbdd_stepdef_given_l&amp;#x27;entit\u00e9 publique #{entity_id} avec le SIRET &amp;quot;{siret}&amp;quot;, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} avec le SIREN &amp;quot;{siren}&amp;quot;, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} avec le SIRET &amp;quot;{siret}&amp;quot;, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} enregistr\u00e9e sur PEPPOL, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} enregistr\u00e9e sur PEPPOL avec scheme &amp;quot;{scheme}&amp;quot;, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} enregistr\u00e9e sur la PA #{pa_id}, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} enregistr\u00e9e sur la PA #{pa_id} via PEPPOL, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} non enregistr\u00e9e sur PEPPOL, pytestbdd_stepdef_given_la PA #{pa_id}, pytestbdd_stepdef_given_la facture #{invoice_id} de #{sender_id} \u00e0 #{recipient_id}, pytestbdd_stepdef_given_la racine SML &amp;quot;{zone}&amp;quot;, pytestbdd_stepdef_given_le SML de test &amp;quot;{sml_zone}&amp;quot;, pytestbdd_stepdef_given_le SMP de #{enterprise_id} accessible \u00e0 &amp;quot;{smp_url}&amp;quot;, pytestbdd_stepdef_given_le SMP de #{enterprise_id} disponible apr\u00e8s {delay:d} secondes, pytestbdd_stepdef_given_le SMP de #{enterprise_id} d\u00e9finitivement indisponible, pytestbdd_stepdef_given_le SMP de #{enterprise_id} indisponible la premi\u00e8re fois, pytestbdd_stepdef_given_le SMP de #{enterprise_id} temporairement indisponible (HTTP 503), pytestbdd_stepdef_given_le destinataire de #{invoice_id} est #{enterprise_id}, pytestbdd_stepdef_given_le service PEPPOL configur\u00e9 en mode &amp;quot;{mode}&amp;quot;, pytestbdd_stepdef_given_le service PEPPOL simul\u00e9 avec:, pytestbdd_stepdef_given_trace, pytestbdd_stepdef_given_un SML de test lent, pytestbdd_stepdef_given_un timeout configur\u00e9 \u00e0 {timeout:d} secondes, pytestbdd_stepdef_given_un utilisateur, pytestbdd_stepdef_given_un utilisateur de la PA #{pa}, pytestbdd_stepdef_given_une facture #{invoice_id} re\u00e7ue via AS4 depuis une PA distante, pytestbdd_stepdef_then_PEPPOL retourne &amp;quot;{error_code}&amp;quot;, pytestbdd_stepdef_then_PEPPOL retourne l&amp;#x27;endpoint Chorus Pro via Pagero, pytestbdd_stepdef_then_PEPPOL retourne l&amp;#x27;endpoint de #{pa_id}, pytestbdd_stepdef_then_j&amp;#x27;obtiens &amp;quot;{result}&amp;quot;, pytestbdd_stepdef_then_j&amp;#x27;obtiens l&amp;#x27;URL du SMP &amp;quot;{smp_url}&amp;quot;, pytestbdd_stepdef_then_j&amp;#x27;obtiens l&amp;#x27;endpoint de la PA responsable, pytestbdd_stepdef_then_j&amp;#x27;obtiens le code de retour {code}, pytestbdd_stepdef_then_j&amp;#x27;obtiens le statut &amp;quot;{status}&amp;quot;, pytestbdd_stepdef_then_j&amp;#x27;obtiens le statut #{status}, pytestbdd_stepdef_then_j&amp;#x27;obtiens sur le canal &amp;#x27;healthcheck_resp&amp;#x27; le message &amp;#x27;toto&amp;#x27;, pytestbdd_stepdef_then_j&amp;#x27;obtiens sur le canal &amp;#x27;{canal}&amp;#x27; un message, pytestbdd_stepdef_then_j&amp;#x27;obtiens un num\u00e9ro de t\u00e2che, pytestbdd_stepdef_then_j&amp;#x27;obtiens une erreur &amp;quot;{error_code}&amp;quot;, pytestbdd_stepdef_then_j&amp;#x27;obtiens une erreur DNS &amp;quot;{error}&amp;quot;, pytestbdd_stepdef_then_j&amp;#x27;obtiens une erreur HTTP {status_code:d}, pytestbdd_stepdef_then_j&amp;#x27;obtiens une r\u00e9ponse DNS valide, pytestbdd_stepdef_then_j&amp;#x27;obtiens une r\u00e9ponse SML valide, pytestbdd_stepdef_then_j&amp;#x27;obtiens une r\u00e9ponse SMP valide, pytestbdd_stepdef_then_l&amp;#x27;adresse de l&amp;#x27;endpoint est &amp;quot;{address}&amp;quot;, pytestbdd_stepdef_then_l&amp;#x27;endpoint AS4 est &amp;quot;{endpoint}&amp;quot;, pytestbdd_stepdef_then_l&amp;#x27;identification par {facon} porte le code &amp;quot;{code}&amp;quot;, pytestbdd_stepdef_then_la destination est &amp;quot;{destination}&amp;quot;, pytestbdd_stepdef_then_la facture #{invoice_id} est rout\u00e9e vers #{pa_id} via PEPPOL, pytestbdd_stepdef_then_la facture est livr\u00e9e localement \u00e0 #{enterprise_id}, pytestbdd_stepdef_then_la facture est livr\u00e9e \u00e0 #{enterprise_id}, pytestbdd_stepdef_then_la facture est mise en file d&amp;#x27;attente pour retry, pytestbdd_stepdef_then_la facture est transmise au PPF, pytestbdd_stepdef_then_la facture est transmise au PPF_1, pytestbdd_stepdef_then_la facture est transmise au service de routage, pytestbdd_stepdef_then_la facture est transmise \u00e0 #{pa_id} via AS4, pytestbdd_stepdef_then_la facture est transmise \u00e0 #{pa_id} via AS4_1, pytestbdd_stepdef_then_la facture est transmise \u00e0 Chorus Pro, pytestbdd_stepdef_then_la facture est valid\u00e9e, pytestbdd_stepdef_then_la facture n&amp;#x27;est PAS transmise au service de routage, pytestbdd_stepdef_then_la facture passe par l&amp;#x27;annuaire local, pytestbdd_stepdef_then_la facture passe par le service de validation, pytestbdd_stepdef_then_la premi\u00e8re tentative \u00e9choue, pytestbdd_stepdef_then_la requ\u00eate SMP \u00e9choue avec HTTP {status_code:d}, pytestbdd_stepdef_then_la r\u00e9ponse SMP est sign\u00e9e, pytestbdd_stepdef_then_la r\u00e9solution SML r\u00e9ussit, pytestbdd_stepdef_then_la seconde tentative r\u00e9ussit, pytestbdd_stepdef_then_la signature est valide, pytestbdd_stepdef_then_le certificat est au format X.509, pytestbdd_stepdef_then_le certificat est pr\u00e9sent et valide, pytestbdd_stepdef_then_le certificat est sign\u00e9 par une autorit\u00e9 PEPPOL valide, pytestbdd_stepdef_then_le certificat n&amp;#x27;est pas expir\u00e9, pytestbdd_stepdef_then_le certificat n&amp;#x27;est pas r\u00e9voqu\u00e9, pytestbdd_stepdef_then_le code erreur est &amp;quot;{error_code}&amp;quot;, pytestbdd_stepdef_then_le destinataire #{enterprise_id} est trouv\u00e9 localement, pytestbdd_stepdef_then_le destinataire #{enterprise_id} n&amp;#x27;est pas trouv\u00e9 localement, pytestbdd_stepdef_then_le hostname SML est &amp;quot;B-{{hash}}.iso6523-actorid-upis.{sml_zone}&amp;quot;, pytestbdd_stepdef_then_le lookup PEPPOL r\u00e9ussit, pytestbdd_stepdef_then_le lookup PEPPOL \u00e9choue, pytestbdd_stepdef_then_le message erreur contient &amp;quot;{text}&amp;quot;, pytestbdd_stepdef_then_le process identifier est &amp;quot;{process_id}&amp;quot;, pytestbdd_stepdef_then_le routage \u00e9choue d\u00e9finitivement, pytestbdd_stepdef_then_le service de routage consulte PEPPOL, pytestbdd_stepdef_then_le service de routage consulte PEPPOL pour #{enterprise_id}, pytestbdd_stepdef_then_le service de routage ne consulte PAS PEPPOL, pytestbdd_stepdef_then_le signataire est le SMP enregistr\u00e9, pytestbdd_stepdef_then_le transport profile est &amp;quot;{transport_profile}&amp;quot;, pytestbdd_stepdef_then_les document types support\u00e9s incluent:, pytestbdd_stepdef_then_trace, pytestbdd_stepdef_then_un accus\u00e9 de r\u00e9ception AS4 est envoy\u00e9, pytestbdd_stepdef_then_un message d&amp;#x27;erreur est publi\u00e9 sur &amp;quot;{channel}&amp;quot;, pytestbdd_stepdef_then_une seconde tentative est programm\u00e9e apr\u00e8s {delay:d} secondes, pytestbdd_stepdef_when_j&amp;#x27;appele l&amp;#x27;API {verb} {path}, pytestbdd_stepdef_when_j&amp;#x27;interroge la t\u00e2che, pytestbdd_stepdef_when_j&amp;#x27;interroge le SML via DNS, pytestbdd_stepdef_when_j&amp;#x27;\u00e9coute le canal &amp;#x27;{canal}&amp;#x27;, pytestbdd_stepdef_when_je calcule l&amp;#x27;empreinte md5 de &amp;quot;{msg}&amp;quot;, pytestbdd_stepdef_when_je calcule l&amp;#x27;empreinte {facon} &amp;quot;{id}&amp;quot;, pytestbdd_stepdef_when_je calcule l&amp;#x27;h\u00f4te SML pour {facon} &amp;quot;{id}&amp;quot;, pytestbdd_stepdef_when_je d\u00e9finis un contr\u00f4le de conformit\u00e9 m\u00e9tier fournisseur, pytestbdd_stepdef_when_je d\u00e9pose la facture #{invoice_id}, pytestbdd_stepdef_when_je d\u00e9pose la facture #{invoice} sur #{pa}, pytestbdd_stepdef_when_je d\u00e9pose pour contr\u00f4le la facture @{invoice}, pytestbdd_stepdef_when_je d\u00e9pose une facture, pytestbdd_stepdef_when_je publie le message &amp;#x27;{msg}&amp;#x27; sur le canal &amp;#x27;{canal}&amp;#x27;, pytestbdd_stepdef_when_je recherche le participant PEPPOL pour #{enterprise_id}, pytestbdd_stepdef_when_je recherche le participant PEPPOL pour le SIREN &amp;quot;{siren}&amp;quot;, pytestbdd_stepdef_when_je recherche le participant PEPPOL pour le SIRET &amp;quot;{siret}&amp;quot;, pytestbdd_stepdef_when_je recherche les m\u00e9tadonn\u00e9es SMP pour #{enterprise_id}, pytestbdd_stepdef_when_je r\u00e9cup\u00e8re la liste des document types pour #{enterprise_id}, pytestbdd_stepdef_when_je r\u00e9cup\u00e8re les m\u00e9tadonn\u00e9es SMP pour #{enterprise_id}, pytestbdd_stepdef_when_l&amp;#x27;adresse de contr\u00f4le &amp;quot;{url}&amp;quot;, pytestbdd_stepdef_when_la PA #{pa_id} re\u00e7oit la facture #{invoice_id} via AS4, pytestbdd_stepdef_when_la requ\u00eate DNS prend plus de {timeout:d} secondes, pytestbdd_stepdef_when_le document type est &amp;quot;{doc_type}&amp;quot;, pytestbdd_stepdef_when_le service de routage consulte PEPPOL pour #{enterprise_id}, pytestbdd_stepdef_when_trace, pytestbdd_stepdef_when_un utilisateur de #{pa_id} d\u00e9pose la facture #{invoice_id}, pytestbdd_stepdef_when_{retries:d} tentatives \u00e9chouent, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, user, world\n&amp;gt;       use &amp;#x27;pytest --fixtures [testpath]&amp;#x27; for help on them.\n\n/home/philippe/src/PA_Communautaire/packages/pac-bdd/.venv/lib/python3.13/site-packages/pytest_bdd/scenario.py:296\n&#34;}], &#34;test_scenario.py::test_healthcheck_api_ok&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_healthcheck_api_ok&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_healthcheck_api_ok&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;file /home/philippe/src/PA_Communautaire/packages/pac-bdd/.venv/lib/python3.13/site-packages/pytest_bdd/scenario.py, line 296\n          def scenario_wrapper(request: FixtureRequest, _pytest_bdd_example: dict[str, str]) -&amp;gt; Any:\nE       fixture &amp;#x27;world1pac&amp;#x27; not found\n&amp;gt;       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _pytest_bdd_example, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, auth, author, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, doctest_namespace, event_loop_policy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_metadata_in_junit_xml, metadata, monkeypatch, pac, peppol_context, peppol_service, pytestbdd_stepdef_given_#{enterprise_id} ne supporte que les factures UBL, pytestbdd_stepdef_given_#{entity_id} accessible via Chorus Pro sur PEPPOL, pytestbdd_stepdef_given_#{pa_id1} et #{pa_id2} enregistr\u00e9es mutuellement sur PEPPOL, pytestbdd_stepdef_given_l&amp;#x27;entit\u00e9 publique #{entity_id} avec le SIRET &amp;quot;{siret}&amp;quot;, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} avec le SIREN &amp;quot;{siren}&amp;quot;, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} avec le SIRET &amp;quot;{siret}&amp;quot;, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} enregistr\u00e9e sur PEPPOL, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} enregistr\u00e9e sur PEPPOL avec scheme &amp;quot;{scheme}&amp;quot;, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} enregistr\u00e9e sur la PA #{pa_id}, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} enregistr\u00e9e sur la PA #{pa_id} via PEPPOL, pytestbdd_stepdef_given_l&amp;#x27;entreprise #{enterprise_id} non enregistr\u00e9e sur PEPPOL, pytestbdd_stepdef_given_la PA #{pa_id}, pytestbdd_stepdef_given_la facture #{invoice_id} de #{sender_id} \u00e0 #{recipient_id}, pytestbdd_stepdef_given_la racine SML &amp;quot;{zone}&amp;quot;, pytestbdd_stepdef_given_le SML de test &amp;quot;{sml_zone}&amp;quot;, pytestbdd_stepdef_given_le SMP de #{enterprise_id} accessible \u00e0 &amp;quot;{smp_url}&amp;quot;, pytestbdd_stepdef_given_le SMP de #{enterprise_id} disponible apr\u00e8s {delay:d} secondes, pytestbdd_stepdef_given_le SMP de #{enterprise_id} d\u00e9finitivement indisponible, pytestbdd_stepdef_given_le SMP de #{enterprise_id} indisponible la premi\u00e8re fois, pytestbdd_stepdef_given_le SMP de #{enterprise_id} temporairement indisponible (HTTP 503), pytestbdd_stepdef_given_le destinataire de #{invoice_id} est #{enterprise_id}, pytestbdd_stepdef_given_le service PEPPOL configur\u00e9 en mode &amp;quot;{mode}&amp;quot;, pytestbdd_stepdef_given_le service PEPPOL simul\u00e9 avec:, pytestbdd_stepdef_given_trace, pytestbdd_stepdef_given_un SML de test lent, pytestbdd_stepdef_given_un timeout configur\u00e9 \u00e0 {timeout:d} secondes, pytestbdd_stepdef_given_un utilisateur, pytestbdd_stepdef_given_un utilisateur de la PA #{pa}, pytestbdd_stepdef_given_une facture #{invoice_id} re\u00e7ue via AS4 depuis une PA distante, pytestbdd_stepdef_then_PEPPOL retourne &amp;quot;{error_code}&amp;quot;, pytestbdd_stepdef_then_PEPPOL retourne l&amp;#x27;endpoint Chorus Pro via Pagero, pytestbdd_stepdef_then_PEPPOL retourne l&amp;#x27;endpoint de #{pa_id}, pytestbdd_stepdef_then_j&amp;#x27;obtiens &amp;quot;{result}&amp;quot;, pytestbdd_stepdef_then_j&amp;#x27;obtiens l&amp;#x27;URL du SMP &amp;quot;{smp_url}&amp;quot;, pytestbdd_stepdef_then_j&amp;#x27;obtiens l&amp;#x27;endpoint de la PA responsable, pytestbdd_stepdef_then_j&amp;#x27;obtiens le code de retour {code}, pytestbdd_stepdef_then_j&amp;#x27;obtiens le statut &amp;quot;{status}&amp;quot;, pytestbdd_stepdef_then_j&amp;#x27;obtiens le statut #{status}, pytestbdd_stepdef_then_j&amp;#x27;obtiens sur le canal &amp;#x27;healthcheck_resp&amp;#x27; le message &amp;#x27;toto&amp;#x27;, pytestbdd_stepdef_then_j&amp;#x27;obtiens sur le canal &amp;#x27;{canal}&amp;#x27; un message, pytestbdd_stepdef_then_j&amp;#x27;obtiens un num\u00e9ro de t\u00e2che, pytestbdd_stepdef_then_j&amp;#x27;obtiens une erreur &amp;quot;{error_code}&amp;quot;, pytestbdd_stepdef_then_j&amp;#x27;obtiens une erreur DNS &amp;quot;{error}&amp;quot;, pytestbdd_stepdef_then_j&amp;#x27;obtiens une erreur HTTP {status_code:d}, pytestbdd_stepdef_then_j&amp;#x27;obtiens une r\u00e9ponse DNS valide, pytestbdd_stepdef_then_j&amp;#x27;obtiens une r\u00e9ponse SML valide, pytestbdd_stepdef_then_j&amp;#x27;obtiens une r\u00e9ponse SMP valide, pytestbdd_stepdef_then_l&amp;#x27;adresse de l&amp;#x27;endpoint est &amp;quot;{address}&amp;quot;, pytestbdd_stepdef_then_l&amp;#x27;endpoint AS4 est &amp;quot;{endpoint}&amp;quot;, pytestbdd_stepdef_then_l&amp;#x27;identification par {facon} porte le code &amp;quot;{code}&amp;quot;, pytestbdd_stepdef_then_la destination est &amp;quot;{destination}&amp;quot;, pytestbdd_stepdef_then_la facture #{invoice_id} est rout\u00e9e vers #{pa_id} via PEPPOL, pytestbdd_stepdef_then_la facture est livr\u00e9e localement \u00e0 #{enterprise_id}, pytestbdd_stepdef_then_la facture est livr\u00e9e \u00e0 #{enterprise_id}, pytestbdd_stepdef_then_la facture est mise en file d&amp;#x27;attente pour retry, pytestbdd_stepdef_then_la facture est transmise au PPF, pytestbdd_stepdef_then_la facture est transmise au PPF_1, pytestbdd_stepdef_then_la facture est transmise au service de routage, pytestbdd_stepdef_then_la facture est transmise \u00e0 #{pa_id} via AS4, pytestbdd_stepdef_then_la facture est transmise \u00e0 #{pa_id} via AS4_1, pytestbdd_stepdef_then_la facture est transmise \u00e0 Chorus Pro, pytestbdd_stepdef_then_la facture est valid\u00e9e, pytestbdd_stepdef_then_la facture n&amp;#x27;est PAS transmise au service de routage, pytestbdd_stepdef_then_la facture passe par l&amp;#x27;annuaire local, pytestbdd_stepdef_then_la facture passe par le service de validation, pytestbdd_stepdef_then_la premi\u00e8re tentative \u00e9choue, pytestbdd_stepdef_then_la requ\u00eate SMP \u00e9choue avec HTTP {status_code:d}, pytestbdd_stepdef_then_la r\u00e9ponse SMP est sign\u00e9e, pytestbdd_stepdef_then_la r\u00e9solution SML r\u00e9ussit, pytestbdd_stepdef_then_la seconde tentative r\u00e9ussit, pytestbdd_stepdef_then_la signature est valide, pytestbdd_stepdef_then_le certificat est au format X.509, pytestbdd_stepdef_then_le certificat est pr\u00e9sent et valide, pytestbdd_stepdef_then_le certificat est sign\u00e9 par une autorit\u00e9 PEPPOL valide, pytestbdd_stepdef_then_le certificat n&amp;#x27;est pas expir\u00e9, pytestbdd_stepdef_then_le certificat n&amp;#x27;est pas r\u00e9voqu\u00e9, pytestbdd_stepdef_then_le code erreur est &amp;quot;{error_code}&amp;quot;, pytestbdd_stepdef_then_le destinataire #{enterprise_id} est trouv\u00e9 localement, pytestbdd_stepdef_then_le destinataire #{enterprise_id} n&amp;#x27;est pas trouv\u00e9 localement, pytestbdd_stepdef_then_le hostname SML est &amp;quot;B-{{hash}}.iso6523-actorid-upis.{sml_zone}&amp;quot;, pytestbdd_stepdef_then_le lookup PEPPOL r\u00e9ussit, pytestbdd_stepdef_then_le lookup PEPPOL \u00e9choue, pytestbdd_stepdef_then_le message erreur contient &amp;quot;{text}&amp;quot;, pytestbdd_stepdef_then_le process identifier est &amp;quot;{process_id}&amp;quot;, pytestbdd_stepdef_then_le routage \u00e9choue d\u00e9finitivement, pytestbdd_stepdef_then_le service de routage consulte PEPPOL, pytestbdd_stepdef_then_le service de routage consulte PEPPOL pour #{enterprise_id}, pytestbdd_stepdef_then_le service de routage ne consulte PAS PEPPOL, pytestbdd_stepdef_then_le signataire est le SMP enregistr\u00e9, pytestbdd_stepdef_then_le transport profile est &amp;quot;{transport_profile}&amp;quot;, pytestbdd_stepdef_then_les document types support\u00e9s incluent:, pytestbdd_stepdef_then_trace, pytestbdd_stepdef_then_un accus\u00e9 de r\u00e9ception AS4 est envoy\u00e9, pytestbdd_stepdef_then_un message d&amp;#x27;erreur est publi\u00e9 sur &amp;quot;{channel}&amp;quot;, pytestbdd_stepdef_then_une seconde tentative est programm\u00e9e apr\u00e8s {delay:d} secondes, pytestbdd_stepdef_when_j&amp;#x27;appele l&amp;#x27;API {verb} {path}, pytestbdd_stepdef_when_j&amp;#x27;interroge la t\u00e2che, pytestbdd_stepdef_when_j&amp;#x27;interroge le SML via DNS, pytestbdd_stepdef_when_j&amp;#x27;\u00e9coute le canal &amp;#x27;{canal}&amp;#x27;, pytestbdd_stepdef_when_je calcule l&amp;#x27;empreinte md5 de &amp;quot;{msg}&amp;quot;, pytestbdd_stepdef_when_je calcule l&amp;#x27;empreinte {facon} &amp;quot;{id}&amp;quot;, pytestbdd_stepdef_when_je calcule l&amp;#x27;h\u00f4te SML pour {facon} &amp;quot;{id}&amp;quot;, pytestbdd_stepdef_when_je d\u00e9finis un contr\u00f4le de conformit\u00e9 m\u00e9tier fournisseur, pytestbdd_stepdef_when_je d\u00e9pose la facture #{invoice_id}, pytestbdd_stepdef_when_je d\u00e9pose la facture #{invoice} sur #{pa}, pytestbdd_stepdef_when_je d\u00e9pose pour contr\u00f4le la facture @{invoice}, pytestbdd_stepdef_when_je d\u00e9pose une facture, pytestbdd_stepdef_when_je publie le message &amp;#x27;{msg}&amp;#x27; sur le canal &amp;#x27;{canal}&amp;#x27;, pytestbdd_stepdef_when_je recherche le participant PEPPOL pour #{enterprise_id}, pytestbdd_stepdef_when_je recherche le participant PEPPOL pour le SIREN &amp;quot;{siren}&amp;quot;, pytestbdd_stepdef_when_je recherche le participant PEPPOL pour le SIRET &amp;quot;{siret}&amp;quot;, pytestbdd_stepdef_when_je recherche les m\u00e9tadonn\u00e9es SMP pour #{enterprise_id}, pytestbdd_stepdef_when_je r\u00e9cup\u00e8re la liste des document types pour #{enterprise_id}, pytestbdd_stepdef_when_je r\u00e9cup\u00e8re les m\u00e9tadonn\u00e9es SMP pour #{enterprise_id}, pytestbdd_stepdef_when_l&amp;#x27;adresse de contr\u00f4le &amp;quot;{url}&amp;quot;, pytestbdd_stepdef_when_la PA #{pa_id} re\u00e7oit la facture #{invoice_id} via AS4, pytestbdd_stepdef_when_la requ\u00eate DNS prend plus de {timeout:d} secondes, pytestbdd_stepdef_when_le document type est &amp;quot;{doc_type}&amp;quot;, pytestbdd_stepdef_when_le service de routage consulte PEPPOL pour #{enterprise_id}, pytestbdd_stepdef_when_trace, pytestbdd_stepdef_when_un utilisateur de #{pa_id} d\u00e9pose la facture #{invoice_id}, pytestbdd_stepdef_when_{retries:d} tentatives \u00e9chouent, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, user, world\n&amp;gt;       use &amp;#x27;pytest --fixtures [testpath]&amp;#x27; for help on them.\n\n/home/philippe/src/PA_Communautaire/packages/pac-bdd/.venv/lib/python3.13/site-packages/pytest_bdd/scenario.py:296\n&#34;}], &#34;test_scenario.py::test_controle_format_facturx&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_controle_format_facturx&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_controle_format_facturx&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;fixturefunc = &amp;lt;function control_invoice at 0x763203f691c0&amp;gt;, request = &amp;lt;FixtureRequest for &amp;lt;Function test_controle_format_facturx&amp;gt;&amp;gt;, kwargs = {}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -&amp;gt; FixtureValue:\n        if inspect.isgeneratorfunction(fixturefunc):\n            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f&amp;quot;{request.fixturename} did not yield a value&amp;quot;) from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n&amp;gt;           fixture_result = fixturefunc(**kwargs)\n                             ^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\n    @when(\n        parsers.parse(&amp;quot;je d\u00e9pose pour contr\u00f4le la facture @{invoice}&amp;quot;),\n    )\n    def control_invoice():\n&amp;gt;       raise NotImplementedError()\nE       NotImplementedError\n\nsrc/pac_bdd/tobeimplemented.py:26: NotImplementedError\n&#34;}], &#34;test_scenario.py::test_d\u00e9marrage_dun_serveur_nats&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_d\u00e9marrage_dun_serveur_nats&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_d\u00e9marrage_dun_serveur_nats&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Given &amp;quot;un serveur NATS disponible&amp;quot;. Line 18 in scenario &amp;quot;D\u00e9marrage d&amp;#x27;un serveur NATS&amp;quot; in the feature &amp;quot;/home/philippe/src/PA_Communautaire/docs/briques/02-esb-central/service_lifecycle.feature&amp;quot;\nAll traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.\n&#34;}], &#34;test_scenario.py::test_connexion_dun_broker_au_serveur_nats&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_connexion_dun_broker_au_serveur_nats&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_connexion_dun_broker_au_serveur_nats&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Given &amp;quot;un serveur NATS disponible&amp;quot;. Line 22 in scenario &amp;quot;Connexion d&amp;#x27;un broker au serveur NATS&amp;quot; in the feature &amp;quot;/home/philippe/src/PA_Communautaire/docs/briques/02-esb-central/service_lifecycle.feature&amp;quot;\nAll traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.\n&#34;}], &#34;test_scenario.py::test_d\u00e9marrage_de_plusieurs_pa&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_d\u00e9marrage_de_plusieurs_pa&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_d\u00e9marrage_de_plusieurs_pa&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Given &amp;quot;2 PA d\u00e9marr\u00e9es&amp;quot;. Line 31 in scenario &amp;quot;D\u00e9marrage de plusieurs PA&amp;quot; in the feature &amp;quot;/home/philippe/src/PA_Communautaire/docs/briques/02-esb-central/service_lifecycle.feature&amp;quot;\nAll traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.\n&#34;}], &#34;test_scenario.py::test_d\u00e9marrage_dun_service_nats_local&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_d\u00e9marrage_dun_service_nats_local&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_d\u00e9marrage_dun_service_nats_local&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Given &amp;quot;un service NATS local&amp;quot;. Line 20 in scenario &amp;quot;D\u00e9marrage d&amp;#x27;un service NATS local&amp;quot; in the feature &amp;quot;/home/philippe/src/PA_Communautaire/docs/briques/02-esb-central/world.feature&amp;quot;\nAll traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.\n&#34;}], &#34;test_scenario.py::test_connexion_\u00e0_un_service_nats_distant&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_connexion_\u00e0_un_service_nats_distant&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_connexion_\u00e0_un_service_nats_distant&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Given &amp;quot;un service NATS local comme r\u00e9f\u00e9rence&amp;quot;. Line 26 in scenario &amp;quot;Connexion \u00e0 un service NATS distant&amp;quot; in the feature &amp;quot;/home/philippe/src/PA_Communautaire/docs/briques/02-esb-central/world.feature&amp;quot;\nAll traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.\n&#34;}], &#34;test_scenario.py::test_d\u00e9marrage_dun_service_peppol_mock&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_d\u00e9marrage_dun_service_peppol_mock&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_d\u00e9marrage_dun_service_peppol_mock&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Given &amp;quot;un service Peppol en mode mock&amp;quot;. Line 32 in scenario &amp;quot;D\u00e9marrage d&amp;#x27;un service Peppol mock&amp;quot; in the feature &amp;quot;/home/philippe/src/PA_Communautaire/docs/briques/02-esb-central/world.feature&amp;quot;\nAll traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.\n&#34;}], &#34;test_scenario.py::test_configuration_des_r\u00e9ponses_peppol_mock&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_configuration_des_r\u00e9ponses_peppol_mock&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_configuration_des_r\u00e9ponses_peppol_mock&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Given &amp;quot;un service Peppol en mode mock&amp;quot;. Line 37 in scenario &amp;quot;Configuration des r\u00e9ponses Peppol mock&amp;quot; in the feature &amp;quot;/home/philippe/src/PA_Communautaire/docs/briques/02-esb-central/world.feature&amp;quot;\nAll traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.\n&#34;}], &#34;test_scenario.py::test_recherche_peppol_dune_entreprise_non_enregistr\u00e9e&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_recherche_peppol_dune_entreprise_non_enregistr\u00e9e&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_recherche_peppol_dune_entreprise_non_enregistr\u00e9e&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Given &amp;quot;un service Peppol en mode mock&amp;quot;. Line 44 in scenario &amp;quot;Recherche Peppol d&amp;#x27;une entreprise non enregistr\u00e9e&amp;quot; in the feature &amp;quot;/home/philippe/src/PA_Communautaire/docs/briques/02-esb-central/world.feature&amp;quot;\nAll traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.\n&#34;}], &#34;test_scenario.py::test_d\u00e9marrage_dun_service_pa&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_d\u00e9marrage_dun_service_pa&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_d\u00e9marrage_dun_service_pa&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Given &amp;quot;un service PA&amp;quot;. Line 50 in scenario &amp;quot;D\u00e9marrage d&amp;#x27;un service PA&amp;quot; in the feature &amp;quot;/home/philippe/src/PA_Communautaire/docs/briques/02-esb-central/world.feature&amp;quot;\nAll traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.\n&#34;}], &#34;test_scenario.py::test_cr\u00e9ation_dun_monde_avec_1_pa&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_cr\u00e9ation_dun_monde_avec_1_pa&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_cr\u00e9ation_dun_monde_avec_1_pa&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Given &amp;quot;un monde avec 1 PA&amp;quot;. Line 60 in scenario &amp;quot;Cr\u00e9ation d&amp;#x27;un monde avec 1 PA&amp;quot; in the feature &amp;quot;/home/philippe/src/PA_Communautaire/docs/briques/02-esb-central/world.feature&amp;quot;\nAll traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.\n&#34;}], &#34;test_scenario.py::test_cr\u00e9ation_dun_monde_avec_2_pa&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_cr\u00e9ation_dun_monde_avec_2_pa&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_cr\u00e9ation_dun_monde_avec_2_pa&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Given &amp;quot;un monde avec 2 PA&amp;quot;. Line 67 in scenario &amp;quot;Cr\u00e9ation d&amp;#x27;un monde avec 2 PA&amp;quot; in the feature &amp;quot;/home/philippe/src/PA_Communautaire/docs/briques/02-esb-central/world.feature&amp;quot;\nAll traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.\n&#34;}], &#34;test_scenario.py::test_cr\u00e9ation_dun_monde_avec_4_pa&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_cr\u00e9ation_dun_monde_avec_4_pa&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_cr\u00e9ation_dun_monde_avec_4_pa&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Given &amp;quot;un monde avec 4 PA&amp;quot;. Line 73 in scenario &amp;quot;Cr\u00e9ation d&amp;#x27;un monde avec 4 PA&amp;quot; in the feature &amp;quot;/home/philippe/src/PA_Communautaire/docs/briques/02-esb-central/world.feature&amp;quot;\nAll traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.\n&#34;}], &#34;test_scenario.py::test_les_pa_partagent_le_m\u00eame_service_nats&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_les_pa_partagent_le_m\u00eame_service_nats&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_les_pa_partagent_le_m\u00eame_service_nats&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Given &amp;quot;un monde avec 2 PA&amp;quot;. Line 81 in scenario &amp;quot;Les PA partagent le m\u00eame service NATS&amp;quot; in the feature &amp;quot;/home/philippe/src/PA_Communautaire/docs/briques/02-esb-central/world.feature&amp;quot;\nAll traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.\n&#34;}], &#34;test_scenario.py::test_les_pa_ont_des_ports_api_distincts&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_les_pa_ont_des_ports_api_distincts&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_les_pa_ont_des_ports_api_distincts&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Given &amp;quot;un monde avec 3 PA&amp;quot;. Line 86 in scenario &amp;quot;Les PA ont des ports API distincts&amp;quot; in the feature &amp;quot;/home/philippe/src/PA_Communautaire/docs/briques/02-esb-central/world.feature&amp;quot;\nAll traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.\n&#34;}], &#34;test_scenario.py::test_toutes_les_pa_r\u00e9pondent_au_healthcheck&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_toutes_les_pa_r\u00e9pondent_au_healthcheck&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_toutes_les_pa_r\u00e9pondent_au_healthcheck&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Given &amp;quot;un monde avec 2 PA&amp;quot;. Line 94 in scenario &amp;quot;Toutes les PA r\u00e9pondent au healthcheck&amp;quot; in the feature &amp;quot;/home/philippe/src/PA_Communautaire/docs/briques/02-esb-central/world.feature&amp;quot;\nAll traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.\n&#34;}], &#34;test_scenario.py::test_information_du_monde&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_information_du_monde&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_information_du_monde&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Given &amp;quot;un monde avec 2 PA&amp;quot;. Line 103 in scenario &amp;quot;Information du monde&amp;quot; in the feature &amp;quot;/home/philippe/src/PA_Communautaire/docs/briques/02-esb-central/world.feature&amp;quot;\nAll traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.\n&#34;}], &#34;test_scenario.py::test_arr\u00eat_propre_du_monde&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_arr\u00eat_propre_du_monde&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_arr\u00eat_propre_du_monde&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Given &amp;quot;un monde avec 2 PA d\u00e9marr\u00e9&amp;quot;. Line 114 in scenario &amp;quot;Arr\u00eat propre du monde&amp;quot; in the feature &amp;quot;/home/philippe/src/PA_Communautaire/docs/briques/02-esb-central/world.feature&amp;quot;\nAll traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.\n&#34;}], &#34;test_scenario.py::test_monde_avec_nats_externe&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_monde_avec_nats_externe&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_monde_avec_nats_externe&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Given &amp;quot;un service NATS local comme r\u00e9f\u00e9rence&amp;quot;. Line 125 in scenario &amp;quot;Monde avec NATS externe&amp;quot; in the feature &amp;quot;/home/philippe/src/PA_Communautaire/docs/briques/02-esb-central/world.feature&amp;quot;\nAll traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.\n&#34;}], &#34;test_scenario.py::test_monde_avec_peppol_personnalis\u00e9&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_monde_avec_peppol_personnalis\u00e9&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_monde_avec_peppol_personnalis\u00e9&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Given &amp;quot;un service Peppol en mode mock comme r\u00e9f\u00e9rence&amp;quot;. Line 131 in scenario &amp;quot;Monde avec Peppol personnalis\u00e9&amp;quot; in the feature &amp;quot;/home/philippe/src/PA_Communautaire/docs/briques/02-esb-central/world.feature&amp;quot;\nAll traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.\n&#34;}], &#34;test_scenario.py::test_d\u00e9p\u00f4t_de_facture_entre_2_pa_via_peppol&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_d\u00e9p\u00f4t_de_facture_entre_2_pa_via_peppol&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_d\u00e9p\u00f4t_de_facture_entre_2_pa_via_peppol&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Given &amp;quot;un monde avec 2 PA&amp;quot;. Line 140 in scenario &amp;quot;D\u00e9p\u00f4t de facture entre 2 PA via Peppol&amp;quot; in the feature &amp;quot;/home/philippe/src/PA_Communautaire/docs/briques/02-esb-central/world.feature&amp;quot;\nAll traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.\n&#34;}], &#34;test_scenario.py::test_healthcheck_message&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_healthcheck_message&#34;, &#34;duration&#34;: &#34;7 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_healthcheck_message&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;7 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;fixturefunc = &amp;lt;function esb_sub_msg at 0x763203f68860&amp;gt;, request = &amp;lt;FixtureRequest for &amp;lt;Function test_healthcheck_message&amp;gt;&amp;gt;, kwargs = {&amp;#x27;world&amp;#x27;: WorldContextOld()}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -&amp;gt; FixtureValue:\n        if inspect.isgeneratorfunction(fixturefunc):\n            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f&amp;quot;{request.fixturename} did not yield a value&amp;quot;) from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n&amp;gt;           fixture_result = fixturefunc(**kwargs)\n                             ^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nsrc/pac_bdd/esb.py:14: in wrapper\n    return asyncio.run(fn(*args, **kwargs))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/asyncio/runners.py:195: in run\n    return runner.run(main)\n           ^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/asyncio/runners.py:118: in run\n    return self._loop.run_until_complete(task)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/asyncio/base_events.py:725: in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\nsrc/pac_bdd/esb.py:72: in esb_sub_msg\n    handle_all.mock.assert_called_once_with(&amp;quot;toto&amp;quot;)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = &amp;lt;MagicMock id=&amp;#x27;129957188497632&amp;#x27;&amp;gt;, args = (&amp;#x27;toto&amp;#x27;,), kwargs = {}, msg = &amp;quot;Expected &amp;#x27;mock&amp;#x27; to be called once. Called 0 times.&amp;quot;\n\n    def assert_called_once_with(self, /, *args, **kwargs):\n        &amp;quot;&amp;quot;&amp;quot;assert that the mock was called exactly once and that that call was\n        with the specified arguments.&amp;quot;&amp;quot;&amp;quot;\n        if not self.call_count == 1:\n            msg = (&amp;quot;Expected &amp;#x27;%s&amp;#x27; to be called once. Called %s times.%s&amp;quot;\n                   % (self._mock_name or &amp;#x27;mock&amp;#x27;,\n                      self.call_count,\n                      self._calls_repr()))\n&amp;gt;           raise AssertionError(msg)\nE           AssertionError: Expected &amp;#x27;mock&amp;#x27; to be called once. Called 0 times.\n\n../../../../.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:988: AssertionError\n\n----------------------------- Captured stdout call -----------------------------\nvvvvv world fixture starts .......\nvvvvv dbg 10\nvvvvv dbg 30\nvvvvv dbg aenter 10\nvvvvv dbg aenter 20\nvvvvv dbg aenter 30\nvvvvv dbg async with 10\nesb_sub canal=&amp;#x27;healthcheck&amp;#x27;...\nesb_pub_msg msg=&amp;#x27;hello&amp;#x27; sur le canal=&amp;#x27;healthcheck&amp;#x27; ...\nrecieving message static ...\n--------------------------- Captured stdout teardown ---------------------------\nvvvvv dbg async with 20\nvvvvv dbg aexit 10\nvvvvv dbg aexit 20\nvvvvv world fixture ends .......\n&#34;}], &#34;test_scenario.py::test_canal_pingpong&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_canal_pingpong&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_canal_pingpong&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Then &amp;quot;j&amp;#x27;obtiens le message &amp;#x27;hello&amp;#x27; sur le canal &amp;#x27;pong&amp;#x27;&amp;quot;. Line 10 in scenario &amp;quot;Canal ping/pong&amp;quot; in the feature &amp;quot;/home/philippe/src/PA_Communautaire/docs/briques/02-esb-central/esb.feature&amp;quot;\nAll traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.\n\n----------------------------- Captured stdout call -----------------------------\nvvvvv world fixture starts .......\nvvvvv dbg 10\nvvvvv dbg 30\nvvvvv dbg aenter 10\nvvvvv dbg aenter 20\nvvvvv dbg aenter 30\nvvvvv dbg async with 10\nesb_sub canal=&amp;#x27;pong&amp;#x27;...\nesb_pub_msg msg=&amp;#x27;hello&amp;#x27; sur le canal=&amp;#x27;ping&amp;#x27; ...\n--------------------------- Captured stdout teardown ---------------------------\nvvvvv dbg async with 20\nvvvvv dbg aexit 10\nvvvvv dbg aexit 20\nvvvvv world fixture ends .......\n&#34;}], &#34;test_scenario.py::test_pa&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_pa&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_pa&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;fixturefunc = &amp;lt;function pa_defined at 0x763203e05940&amp;gt;, request = &amp;lt;FixtureRequest for &amp;lt;Function test_pa&amp;gt;&amp;gt;\nkwargs = {&amp;#x27;pa_id&amp;#x27;: &amp;#x27;pa1&amp;#x27;, &amp;#x27;peppol_context&amp;#x27;: PeppolContext(sml_zone=&amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;, enterprise_id=None, siren=None, siret=None, result=None)}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -&amp;gt; FixtureValue:\n        if inspect.isgeneratorfunction(fixturefunc):\n            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f&amp;quot;{request.fixturename} did not yield a value&amp;quot;) from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n&amp;gt;           fixture_result = fixturefunc(**kwargs)\n                             ^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\npeppol_context = PeppolContext(sml_zone=&amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;, enterprise_id=None, siren=None, siret=None, result=None), pa_id = &amp;#x27;pa1&amp;#x27;\n\n    @given(parsers.parse(&amp;quot;la PA #{pa_id}&amp;quot;))\n    def pa_defined(peppol_context, pa_id: str):\n        &amp;quot;&amp;quot;&amp;quot;D\u00e9finit une PA.&amp;quot;&amp;quot;&amp;quot;\n&amp;gt;       peppol_context[&amp;quot;pas&amp;quot;][pa_id] = {\n        ^^^^^^^^^^^^^^^^^^^^^\n            &amp;quot;id&amp;quot;: pa_id,\n            &amp;quot;enterprises&amp;quot;: [],\n            &amp;quot;endpoint&amp;quot;: f&amp;quot;https://ap.{pa_id}.fr/as4&amp;quot;,\n        }\nE       TypeError: &amp;#x27;PeppolContext&amp;#x27; object is not subscriptable\n\nsrc/pac_bdd/peppol.py:303: TypeError\n&#34;}], &#34;test_scenario.py::test_r\u00e9solution_sml_r\u00e9ussie_pour_un_participant_enregistr\u00e9&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_r\u00e9solution_sml_r\u00e9ussie_pour_un_participant_enregistr\u00e9&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_r\u00e9solution_sml_r\u00e9ussie_pour_un_participant_enregistr\u00e9&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;FixtureRequest for &amp;lt;Function test_r\u00e9solution_sml_r\u00e9ussie_pour_un_participant_enregistr\u00e9&amp;gt;&amp;gt;, argname = &amp;#x27;peppol_service&amp;#x27;\n\n    def getfixturevalue(self, argname: str) -&amp;gt; Any:\n        &amp;quot;&amp;quot;&amp;quot;Dynamically run a named fixture function.\n    \n        Declaring fixtures via function argument is recommended where possible.\n        But if you can only decide whether to use another fixture at test\n        setup time, you may use this function to retrieve it inside a fixture\n        or test function body.\n    \n        This method can be used during the test setup phase or the test run\n        phase, but during the test teardown phase a fixture&amp;#x27;s value may not\n        be available.\n    \n        :param argname:\n            The fixture name.\n        :raises pytest.FixtureLookupError:\n            If the given fixture could not be found.\n        &amp;quot;&amp;quot;&amp;quot;\n        # Note that in addition to the use case described in the docstring,\n        # getfixturevalue() is also called by pytest itself during item and fixture\n        # setup to evaluate the fixtures that are requested statically\n        # (using function parameters, autouse, etc).\n    \n&amp;gt;       fixturedef = self._get_active_fixturedef(argname)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:549: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:640: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1128: in execute\n    result = ihook.pytest_fixture_setup(fixturedef=self, request=request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_hooks.py:512: in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:53: in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:38: in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py:730: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/setuponly.py:36: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1196: in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n                     ^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\npeppol_context = PeppolContext(sml_zone=&amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;, enterprise_id=None, siren=None, siret=None, result=None)\n\n    @pytest.fixture\n    def peppol_service(peppol_context) -&amp;gt; PeppolLookupService:\n        &amp;quot;&amp;quot;&amp;quot;Service PEPPOL configur\u00e9 pour les tests.&amp;quot;&amp;quot;&amp;quot;\n    \n        def mock_dns_resolver(hostname: str) -&amp;gt; Optional[str]:\n            &amp;quot;&amp;quot;&amp;quot;R\u00e9solveur DNS mock pour les tests.&amp;quot;&amp;quot;&amp;quot;\n            return peppol_context[&amp;quot;dns_responses&amp;quot;].get(hostname)\n    \n        service = PeppolLookupService(\n&amp;gt;           environment=peppol_context[&amp;quot;environment&amp;quot;],\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            dns_resolver=mock_dns_resolver,\n        )\nE       TypeError: &amp;#x27;PeppolContext&amp;#x27; object is not subscriptable\n\nsrc/pac_bdd/peppol.py:99: TypeError\n&#34;}], &#34;test_scenario.py::test_r\u00e9solution_sml_\u00e9chou\u00e9e__participant_non_enregistr\u00e9&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_r\u00e9solution_sml_\u00e9chou\u00e9e__participant_non_enregistr\u00e9&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_r\u00e9solution_sml_\u00e9chou\u00e9e__participant_non_enregistr\u00e9&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;FixtureRequest for &amp;lt;Function test_r\u00e9solution_sml_\u00e9chou\u00e9e__participant_non_enregistr\u00e9&amp;gt;&amp;gt;, argname = &amp;#x27;peppol_service&amp;#x27;\n\n    def getfixturevalue(self, argname: str) -&amp;gt; Any:\n        &amp;quot;&amp;quot;&amp;quot;Dynamically run a named fixture function.\n    \n        Declaring fixtures via function argument is recommended where possible.\n        But if you can only decide whether to use another fixture at test\n        setup time, you may use this function to retrieve it inside a fixture\n        or test function body.\n    \n        This method can be used during the test setup phase or the test run\n        phase, but during the test teardown phase a fixture&amp;#x27;s value may not\n        be available.\n    \n        :param argname:\n            The fixture name.\n        :raises pytest.FixtureLookupError:\n            If the given fixture could not be found.\n        &amp;quot;&amp;quot;&amp;quot;\n        # Note that in addition to the use case described in the docstring,\n        # getfixturevalue() is also called by pytest itself during item and fixture\n        # setup to evaluate the fixtures that are requested statically\n        # (using function parameters, autouse, etc).\n    \n&amp;gt;       fixturedef = self._get_active_fixturedef(argname)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:549: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:640: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1128: in execute\n    result = ihook.pytest_fixture_setup(fixturedef=self, request=request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_hooks.py:512: in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:53: in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:38: in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py:730: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/setuponly.py:36: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1196: in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n                     ^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\npeppol_context = PeppolContext(sml_zone=&amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;, enterprise_id=None, siren=None, siret=None, result=None)\n\n    @pytest.fixture\n    def peppol_service(peppol_context) -&amp;gt; PeppolLookupService:\n        &amp;quot;&amp;quot;&amp;quot;Service PEPPOL configur\u00e9 pour les tests.&amp;quot;&amp;quot;&amp;quot;\n    \n        def mock_dns_resolver(hostname: str) -&amp;gt; Optional[str]:\n            &amp;quot;&amp;quot;&amp;quot;R\u00e9solveur DNS mock pour les tests.&amp;quot;&amp;quot;&amp;quot;\n            return peppol_context[&amp;quot;dns_responses&amp;quot;].get(hostname)\n    \n        service = PeppolLookupService(\n&amp;gt;           environment=peppol_context[&amp;quot;environment&amp;quot;],\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            dns_resolver=mock_dns_resolver,\n        )\nE       TypeError: &amp;#x27;PeppolContext&amp;#x27; object is not subscriptable\n\nsrc/pac_bdd/peppol.py:99: TypeError\n&#34;}], &#34;test_scenario.py::test_r\u00e9cup\u00e9ration_m\u00e9tadonn\u00e9es_smp_r\u00e9ussie&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_r\u00e9cup\u00e9ration_m\u00e9tadonn\u00e9es_smp_r\u00e9ussie&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_r\u00e9cup\u00e9ration_m\u00e9tadonn\u00e9es_smp_r\u00e9ussie&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;FixtureRequest for &amp;lt;Function test_r\u00e9cup\u00e9ration_m\u00e9tadonn\u00e9es_smp_r\u00e9ussie&amp;gt;&amp;gt;, argname = &amp;#x27;peppol_service&amp;#x27;\n\n    def getfixturevalue(self, argname: str) -&amp;gt; Any:\n        &amp;quot;&amp;quot;&amp;quot;Dynamically run a named fixture function.\n    \n        Declaring fixtures via function argument is recommended where possible.\n        But if you can only decide whether to use another fixture at test\n        setup time, you may use this function to retrieve it inside a fixture\n        or test function body.\n    \n        This method can be used during the test setup phase or the test run\n        phase, but during the test teardown phase a fixture&amp;#x27;s value may not\n        be available.\n    \n        :param argname:\n            The fixture name.\n        :raises pytest.FixtureLookupError:\n            If the given fixture could not be found.\n        &amp;quot;&amp;quot;&amp;quot;\n        # Note that in addition to the use case described in the docstring,\n        # getfixturevalue() is also called by pytest itself during item and fixture\n        # setup to evaluate the fixtures that are requested statically\n        # (using function parameters, autouse, etc).\n    \n&amp;gt;       fixturedef = self._get_active_fixturedef(argname)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:549: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:640: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1128: in execute\n    result = ihook.pytest_fixture_setup(fixturedef=self, request=request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_hooks.py:512: in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:53: in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:38: in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py:730: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/setuponly.py:36: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1196: in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n                     ^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\npeppol_context = PeppolContext(sml_zone=&amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;, enterprise_id=None, siren=None, siret=None, result=None)\n\n    @pytest.fixture\n    def peppol_service(peppol_context) -&amp;gt; PeppolLookupService:\n        &amp;quot;&amp;quot;&amp;quot;Service PEPPOL configur\u00e9 pour les tests.&amp;quot;&amp;quot;&amp;quot;\n    \n        def mock_dns_resolver(hostname: str) -&amp;gt; Optional[str]:\n            &amp;quot;&amp;quot;&amp;quot;R\u00e9solveur DNS mock pour les tests.&amp;quot;&amp;quot;&amp;quot;\n            return peppol_context[&amp;quot;dns_responses&amp;quot;].get(hostname)\n    \n        service = PeppolLookupService(\n&amp;gt;           environment=peppol_context[&amp;quot;environment&amp;quot;],\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            dns_resolver=mock_dns_resolver,\n        )\nE       TypeError: &amp;#x27;PeppolContext&amp;#x27; object is not subscriptable\n\nsrc/pac_bdd/peppol.py:99: TypeError\n&#34;}], &#34;test_scenario.py::test_smp_ne_supporte_pas_le_document_type_demand\u00e9&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_smp_ne_supporte_pas_le_document_type_demand\u00e9&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_smp_ne_supporte_pas_le_document_type_demand\u00e9&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;FixtureRequest for &amp;lt;Function test_smp_ne_supporte_pas_le_document_type_demand\u00e9&amp;gt;&amp;gt;, argname = &amp;#x27;peppol_service&amp;#x27;\n\n    def getfixturevalue(self, argname: str) -&amp;gt; Any:\n        &amp;quot;&amp;quot;&amp;quot;Dynamically run a named fixture function.\n    \n        Declaring fixtures via function argument is recommended where possible.\n        But if you can only decide whether to use another fixture at test\n        setup time, you may use this function to retrieve it inside a fixture\n        or test function body.\n    \n        This method can be used during the test setup phase or the test run\n        phase, but during the test teardown phase a fixture&amp;#x27;s value may not\n        be available.\n    \n        :param argname:\n            The fixture name.\n        :raises pytest.FixtureLookupError:\n            If the given fixture could not be found.\n        &amp;quot;&amp;quot;&amp;quot;\n        # Note that in addition to the use case described in the docstring,\n        # getfixturevalue() is also called by pytest itself during item and fixture\n        # setup to evaluate the fixtures that are requested statically\n        # (using function parameters, autouse, etc).\n    \n&amp;gt;       fixturedef = self._get_active_fixturedef(argname)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:549: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:640: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1128: in execute\n    result = ihook.pytest_fixture_setup(fixturedef=self, request=request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_hooks.py:512: in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:53: in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:38: in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py:730: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/setuponly.py:36: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1196: in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n                     ^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\npeppol_context = PeppolContext(sml_zone=&amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;, enterprise_id=None, siren=None, siret=None, result=None)\n\n    @pytest.fixture\n    def peppol_service(peppol_context) -&amp;gt; PeppolLookupService:\n        &amp;quot;&amp;quot;&amp;quot;Service PEPPOL configur\u00e9 pour les tests.&amp;quot;&amp;quot;&amp;quot;\n    \n        def mock_dns_resolver(hostname: str) -&amp;gt; Optional[str]:\n            &amp;quot;&amp;quot;&amp;quot;R\u00e9solveur DNS mock pour les tests.&amp;quot;&amp;quot;&amp;quot;\n            return peppol_context[&amp;quot;dns_responses&amp;quot;].get(hostname)\n    \n        service = PeppolLookupService(\n&amp;gt;           environment=peppol_context[&amp;quot;environment&amp;quot;],\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            dns_resolver=mock_dns_resolver,\n        )\nE       TypeError: &amp;#x27;PeppolContext&amp;#x27; object is not subscriptable\n\nsrc/pac_bdd/peppol.py:99: TypeError\n&#34;}], &#34;test_scenario.py::test_lookup_peppol_complet_r\u00e9ussi_par_siren&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_lookup_peppol_complet_r\u00e9ussi_par_siren&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_lookup_peppol_complet_r\u00e9ussi_par_siren&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;FixtureRequest for &amp;lt;Function test_lookup_peppol_complet_r\u00e9ussi_par_siren&amp;gt;&amp;gt;, argname = &amp;#x27;peppol_service&amp;#x27;\n\n    def getfixturevalue(self, argname: str) -&amp;gt; Any:\n        &amp;quot;&amp;quot;&amp;quot;Dynamically run a named fixture function.\n    \n        Declaring fixtures via function argument is recommended where possible.\n        But if you can only decide whether to use another fixture at test\n        setup time, you may use this function to retrieve it inside a fixture\n        or test function body.\n    \n        This method can be used during the test setup phase or the test run\n        phase, but during the test teardown phase a fixture&amp;#x27;s value may not\n        be available.\n    \n        :param argname:\n            The fixture name.\n        :raises pytest.FixtureLookupError:\n            If the given fixture could not be found.\n        &amp;quot;&amp;quot;&amp;quot;\n        # Note that in addition to the use case described in the docstring,\n        # getfixturevalue() is also called by pytest itself during item and fixture\n        # setup to evaluate the fixtures that are requested statically\n        # (using function parameters, autouse, etc).\n    \n&amp;gt;       fixturedef = self._get_active_fixturedef(argname)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:549: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:640: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1128: in execute\n    result = ihook.pytest_fixture_setup(fixturedef=self, request=request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_hooks.py:512: in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:53: in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:38: in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py:730: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/setuponly.py:36: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1196: in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n                     ^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\npeppol_context = PeppolContext(sml_zone=&amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;, enterprise_id=None, siren=None, siret=None, result=None)\n\n    @pytest.fixture\n    def peppol_service(peppol_context) -&amp;gt; PeppolLookupService:\n        &amp;quot;&amp;quot;&amp;quot;Service PEPPOL configur\u00e9 pour les tests.&amp;quot;&amp;quot;&amp;quot;\n    \n        def mock_dns_resolver(hostname: str) -&amp;gt; Optional[str]:\n            &amp;quot;&amp;quot;&amp;quot;R\u00e9solveur DNS mock pour les tests.&amp;quot;&amp;quot;&amp;quot;\n            return peppol_context[&amp;quot;dns_responses&amp;quot;].get(hostname)\n    \n        service = PeppolLookupService(\n&amp;gt;           environment=peppol_context[&amp;quot;environment&amp;quot;],\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            dns_resolver=mock_dns_resolver,\n        )\nE       TypeError: &amp;#x27;PeppolContext&amp;#x27; object is not subscriptable\n\nsrc/pac_bdd/peppol.py:99: TypeError\n&#34;}], &#34;test_scenario.py::test_lookup_peppol_complet_r\u00e9ussi_par_siret&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_lookup_peppol_complet_r\u00e9ussi_par_siret&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_lookup_peppol_complet_r\u00e9ussi_par_siret&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;FixtureRequest for &amp;lt;Function test_lookup_peppol_complet_r\u00e9ussi_par_siret&amp;gt;&amp;gt;, argname = &amp;#x27;peppol_service&amp;#x27;\n\n    def getfixturevalue(self, argname: str) -&amp;gt; Any:\n        &amp;quot;&amp;quot;&amp;quot;Dynamically run a named fixture function.\n    \n        Declaring fixtures via function argument is recommended where possible.\n        But if you can only decide whether to use another fixture at test\n        setup time, you may use this function to retrieve it inside a fixture\n        or test function body.\n    \n        This method can be used during the test setup phase or the test run\n        phase, but during the test teardown phase a fixture&amp;#x27;s value may not\n        be available.\n    \n        :param argname:\n            The fixture name.\n        :raises pytest.FixtureLookupError:\n            If the given fixture could not be found.\n        &amp;quot;&amp;quot;&amp;quot;\n        # Note that in addition to the use case described in the docstring,\n        # getfixturevalue() is also called by pytest itself during item and fixture\n        # setup to evaluate the fixtures that are requested statically\n        # (using function parameters, autouse, etc).\n    \n&amp;gt;       fixturedef = self._get_active_fixturedef(argname)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:549: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:640: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1128: in execute\n    result = ihook.pytest_fixture_setup(fixturedef=self, request=request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_hooks.py:512: in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:53: in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:38: in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py:730: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/setuponly.py:36: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1196: in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n                     ^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\npeppol_context = PeppolContext(sml_zone=&amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;, enterprise_id=None, siren=None, siret=None, result=None)\n\n    @pytest.fixture\n    def peppol_service(peppol_context) -&amp;gt; PeppolLookupService:\n        &amp;quot;&amp;quot;&amp;quot;Service PEPPOL configur\u00e9 pour les tests.&amp;quot;&amp;quot;&amp;quot;\n    \n        def mock_dns_resolver(hostname: str) -&amp;gt; Optional[str]:\n            &amp;quot;&amp;quot;&amp;quot;R\u00e9solveur DNS mock pour les tests.&amp;quot;&amp;quot;&amp;quot;\n            return peppol_context[&amp;quot;dns_responses&amp;quot;].get(hostname)\n    \n        service = PeppolLookupService(\n&amp;gt;           environment=peppol_context[&amp;quot;environment&amp;quot;],\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            dns_resolver=mock_dns_resolver,\n        )\nE       TypeError: &amp;#x27;PeppolContext&amp;#x27; object is not subscriptable\n\nsrc/pac_bdd/peppol.py:99: TypeError\n&#34;}], &#34;test_scenario.py::test_lookup_peppol_\u00e9chou\u00e9__participant_introuvable&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_lookup_peppol_\u00e9chou\u00e9__participant_introuvable&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_lookup_peppol_\u00e9chou\u00e9__participant_introuvable&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;FixtureRequest for &amp;lt;Function test_lookup_peppol_\u00e9chou\u00e9__participant_introuvable&amp;gt;&amp;gt;, argname = &amp;#x27;peppol_service&amp;#x27;\n\n    def getfixturevalue(self, argname: str) -&amp;gt; Any:\n        &amp;quot;&amp;quot;&amp;quot;Dynamically run a named fixture function.\n    \n        Declaring fixtures via function argument is recommended where possible.\n        But if you can only decide whether to use another fixture at test\n        setup time, you may use this function to retrieve it inside a fixture\n        or test function body.\n    \n        This method can be used during the test setup phase or the test run\n        phase, but during the test teardown phase a fixture&amp;#x27;s value may not\n        be available.\n    \n        :param argname:\n            The fixture name.\n        :raises pytest.FixtureLookupError:\n            If the given fixture could not be found.\n        &amp;quot;&amp;quot;&amp;quot;\n        # Note that in addition to the use case described in the docstring,\n        # getfixturevalue() is also called by pytest itself during item and fixture\n        # setup to evaluate the fixtures that are requested statically\n        # (using function parameters, autouse, etc).\n    \n&amp;gt;       fixturedef = self._get_active_fixturedef(argname)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:549: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:640: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1128: in execute\n    result = ihook.pytest_fixture_setup(fixturedef=self, request=request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_hooks.py:512: in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:53: in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:38: in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py:730: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/setuponly.py:36: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1196: in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n                     ^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\npeppol_context = PeppolContext(sml_zone=&amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;, enterprise_id=None, siren=None, siret=None, result=None)\n\n    @pytest.fixture\n    def peppol_service(peppol_context) -&amp;gt; PeppolLookupService:\n        &amp;quot;&amp;quot;&amp;quot;Service PEPPOL configur\u00e9 pour les tests.&amp;quot;&amp;quot;&amp;quot;\n    \n        def mock_dns_resolver(hostname: str) -&amp;gt; Optional[str]:\n            &amp;quot;&amp;quot;&amp;quot;R\u00e9solveur DNS mock pour les tests.&amp;quot;&amp;quot;&amp;quot;\n            return peppol_context[&amp;quot;dns_responses&amp;quot;].get(hostname)\n    \n        service = PeppolLookupService(\n&amp;gt;           environment=peppol_context[&amp;quot;environment&amp;quot;],\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            dns_resolver=mock_dns_resolver,\n        )\nE       TypeError: &amp;#x27;PeppolContext&amp;#x27; object is not subscriptable\n\nsrc/pac_bdd/peppol.py:99: TypeError\n&#34;}], &#34;test_scenario.py::test_routage_facture_vers_pa_distante_via_peppol&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_routage_facture_vers_pa_distante_via_peppol&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_routage_facture_vers_pa_distante_via_peppol&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;FixtureRequest for &amp;lt;Function test_routage_facture_vers_pa_distante_via_peppol&amp;gt;&amp;gt;, argname = &amp;#x27;peppol_service&amp;#x27;\n\n    def getfixturevalue(self, argname: str) -&amp;gt; Any:\n        &amp;quot;&amp;quot;&amp;quot;Dynamically run a named fixture function.\n    \n        Declaring fixtures via function argument is recommended where possible.\n        But if you can only decide whether to use another fixture at test\n        setup time, you may use this function to retrieve it inside a fixture\n        or test function body.\n    \n        This method can be used during the test setup phase or the test run\n        phase, but during the test teardown phase a fixture&amp;#x27;s value may not\n        be available.\n    \n        :param argname:\n            The fixture name.\n        :raises pytest.FixtureLookupError:\n            If the given fixture could not be found.\n        &amp;quot;&amp;quot;&amp;quot;\n        # Note that in addition to the use case described in the docstring,\n        # getfixturevalue() is also called by pytest itself during item and fixture\n        # setup to evaluate the fixtures that are requested statically\n        # (using function parameters, autouse, etc).\n    \n&amp;gt;       fixturedef = self._get_active_fixturedef(argname)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:549: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:640: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1128: in execute\n    result = ihook.pytest_fixture_setup(fixturedef=self, request=request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_hooks.py:512: in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:53: in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:38: in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py:730: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/setuponly.py:36: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1196: in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n                     ^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\npeppol_context = PeppolContext(sml_zone=&amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;, enterprise_id=None, siren=None, siret=None, result=None)\n\n    @pytest.fixture\n    def peppol_service(peppol_context) -&amp;gt; PeppolLookupService:\n        &amp;quot;&amp;quot;&amp;quot;Service PEPPOL configur\u00e9 pour les tests.&amp;quot;&amp;quot;&amp;quot;\n    \n        def mock_dns_resolver(hostname: str) -&amp;gt; Optional[str]:\n            &amp;quot;&amp;quot;&amp;quot;R\u00e9solveur DNS mock pour les tests.&amp;quot;&amp;quot;&amp;quot;\n            return peppol_context[&amp;quot;dns_responses&amp;quot;].get(hostname)\n    \n        service = PeppolLookupService(\n&amp;gt;           environment=peppol_context[&amp;quot;environment&amp;quot;],\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            dns_resolver=mock_dns_resolver,\n        )\nE       TypeError: &amp;#x27;PeppolContext&amp;#x27; object is not subscriptable\n\nsrc/pac_bdd/peppol.py:99: TypeError\n&#34;}], &#34;test_scenario.py::test_routage_facture__destinataire_local_pas_de_lookup_peppol&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_routage_facture__destinataire_local_pas_de_lookup_peppol&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_routage_facture__destinataire_local_pas_de_lookup_peppol&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;FixtureRequest for &amp;lt;Function test_routage_facture__destinataire_local_pas_de_lookup_peppol&amp;gt;&amp;gt;, argname = &amp;#x27;peppol_service&amp;#x27;\n\n    def getfixturevalue(self, argname: str) -&amp;gt; Any:\n        &amp;quot;&amp;quot;&amp;quot;Dynamically run a named fixture function.\n    \n        Declaring fixtures via function argument is recommended where possible.\n        But if you can only decide whether to use another fixture at test\n        setup time, you may use this function to retrieve it inside a fixture\n        or test function body.\n    \n        This method can be used during the test setup phase or the test run\n        phase, but during the test teardown phase a fixture&amp;#x27;s value may not\n        be available.\n    \n        :param argname:\n            The fixture name.\n        :raises pytest.FixtureLookupError:\n            If the given fixture could not be found.\n        &amp;quot;&amp;quot;&amp;quot;\n        # Note that in addition to the use case described in the docstring,\n        # getfixturevalue() is also called by pytest itself during item and fixture\n        # setup to evaluate the fixtures that are requested statically\n        # (using function parameters, autouse, etc).\n    \n&amp;gt;       fixturedef = self._get_active_fixturedef(argname)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:549: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:640: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1128: in execute\n    result = ihook.pytest_fixture_setup(fixturedef=self, request=request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_hooks.py:512: in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:53: in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:38: in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py:730: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/setuponly.py:36: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1196: in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n                     ^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\npeppol_context = PeppolContext(sml_zone=&amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;, enterprise_id=None, siren=None, siret=None, result=None)\n\n    @pytest.fixture\n    def peppol_service(peppol_context) -&amp;gt; PeppolLookupService:\n        &amp;quot;&amp;quot;&amp;quot;Service PEPPOL configur\u00e9 pour les tests.&amp;quot;&amp;quot;&amp;quot;\n    \n        def mock_dns_resolver(hostname: str) -&amp;gt; Optional[str]:\n            &amp;quot;&amp;quot;&amp;quot;R\u00e9solveur DNS mock pour les tests.&amp;quot;&amp;quot;&amp;quot;\n            return peppol_context[&amp;quot;dns_responses&amp;quot;].get(hostname)\n    \n        service = PeppolLookupService(\n&amp;gt;           environment=peppol_context[&amp;quot;environment&amp;quot;],\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            dns_resolver=mock_dns_resolver,\n        )\nE       TypeError: &amp;#x27;PeppolContext&amp;#x27; object is not subscriptable\n\nsrc/pac_bdd/peppol.py:99: TypeError\n&#34;}], &#34;test_scenario.py::test_routage_facture__fallback_vers_ppf&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_routage_facture__fallback_vers_ppf&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_routage_facture__fallback_vers_ppf&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;FixtureRequest for &amp;lt;Function test_routage_facture__fallback_vers_ppf&amp;gt;&amp;gt;, argname = &amp;#x27;peppol_service&amp;#x27;\n\n    def getfixturevalue(self, argname: str) -&amp;gt; Any:\n        &amp;quot;&amp;quot;&amp;quot;Dynamically run a named fixture function.\n    \n        Declaring fixtures via function argument is recommended where possible.\n        But if you can only decide whether to use another fixture at test\n        setup time, you may use this function to retrieve it inside a fixture\n        or test function body.\n    \n        This method can be used during the test setup phase or the test run\n        phase, but during the test teardown phase a fixture&amp;#x27;s value may not\n        be available.\n    \n        :param argname:\n            The fixture name.\n        :raises pytest.FixtureLookupError:\n            If the given fixture could not be found.\n        &amp;quot;&amp;quot;&amp;quot;\n        # Note that in addition to the use case described in the docstring,\n        # getfixturevalue() is also called by pytest itself during item and fixture\n        # setup to evaluate the fixtures that are requested statically\n        # (using function parameters, autouse, etc).\n    \n&amp;gt;       fixturedef = self._get_active_fixturedef(argname)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:549: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:640: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1128: in execute\n    result = ihook.pytest_fixture_setup(fixturedef=self, request=request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_hooks.py:512: in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:53: in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:38: in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py:730: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/setuponly.py:36: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1196: in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n                     ^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\npeppol_context = PeppolContext(sml_zone=&amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;, enterprise_id=None, siren=None, siret=None, result=None)\n\n    @pytest.fixture\n    def peppol_service(peppol_context) -&amp;gt; PeppolLookupService:\n        &amp;quot;&amp;quot;&amp;quot;Service PEPPOL configur\u00e9 pour les tests.&amp;quot;&amp;quot;&amp;quot;\n    \n        def mock_dns_resolver(hostname: str) -&amp;gt; Optional[str]:\n            &amp;quot;&amp;quot;&amp;quot;R\u00e9solveur DNS mock pour les tests.&amp;quot;&amp;quot;&amp;quot;\n            return peppol_context[&amp;quot;dns_responses&amp;quot;].get(hostname)\n    \n        service = PeppolLookupService(\n&amp;gt;           environment=peppol_context[&amp;quot;environment&amp;quot;],\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            dns_resolver=mock_dns_resolver,\n        )\nE       TypeError: &amp;#x27;PeppolContext&amp;#x27; object is not subscriptable\n\nsrc/pac_bdd/peppol.py:99: TypeError\n&#34;}], &#34;test_scenario.py::test_validation_du_certificat_peppol&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_validation_du_certificat_peppol&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_validation_du_certificat_peppol&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;FixtureRequest for &amp;lt;Function test_validation_du_certificat_peppol&amp;gt;&amp;gt;, argname = &amp;#x27;peppol_service&amp;#x27;\n\n    def getfixturevalue(self, argname: str) -&amp;gt; Any:\n        &amp;quot;&amp;quot;&amp;quot;Dynamically run a named fixture function.\n    \n        Declaring fixtures via function argument is recommended where possible.\n        But if you can only decide whether to use another fixture at test\n        setup time, you may use this function to retrieve it inside a fixture\n        or test function body.\n    \n        This method can be used during the test setup phase or the test run\n        phase, but during the test teardown phase a fixture&amp;#x27;s value may not\n        be available.\n    \n        :param argname:\n            The fixture name.\n        :raises pytest.FixtureLookupError:\n            If the given fixture could not be found.\n        &amp;quot;&amp;quot;&amp;quot;\n        # Note that in addition to the use case described in the docstring,\n        # getfixturevalue() is also called by pytest itself during item and fixture\n        # setup to evaluate the fixtures that are requested statically\n        # (using function parameters, autouse, etc).\n    \n&amp;gt;       fixturedef = self._get_active_fixturedef(argname)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:549: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:640: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1128: in execute\n    result = ihook.pytest_fixture_setup(fixturedef=self, request=request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_hooks.py:512: in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:53: in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:38: in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py:730: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/setuponly.py:36: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1196: in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n                     ^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\npeppol_context = PeppolContext(sml_zone=&amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;, enterprise_id=None, siren=None, siret=None, result=None)\n\n    @pytest.fixture\n    def peppol_service(peppol_context) -&amp;gt; PeppolLookupService:\n        &amp;quot;&amp;quot;&amp;quot;Service PEPPOL configur\u00e9 pour les tests.&amp;quot;&amp;quot;&amp;quot;\n    \n        def mock_dns_resolver(hostname: str) -&amp;gt; Optional[str]:\n            &amp;quot;&amp;quot;&amp;quot;R\u00e9solveur DNS mock pour les tests.&amp;quot;&amp;quot;&amp;quot;\n            return peppol_context[&amp;quot;dns_responses&amp;quot;].get(hostname)\n    \n        service = PeppolLookupService(\n&amp;gt;           environment=peppol_context[&amp;quot;environment&amp;quot;],\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            dns_resolver=mock_dns_resolver,\n        )\nE       TypeError: &amp;#x27;PeppolContext&amp;#x27; object is not subscriptable\n\nsrc/pac_bdd/peppol.py:99: TypeError\n&#34;}], &#34;test_scenario.py::test_v\u00e9rification_de_la_signature_smp&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_v\u00e9rification_de_la_signature_smp&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_v\u00e9rification_de_la_signature_smp&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;FixtureRequest for &amp;lt;Function test_v\u00e9rification_de_la_signature_smp&amp;gt;&amp;gt;, argname = &amp;#x27;peppol_service&amp;#x27;\n\n    def getfixturevalue(self, argname: str) -&amp;gt; Any:\n        &amp;quot;&amp;quot;&amp;quot;Dynamically run a named fixture function.\n    \n        Declaring fixtures via function argument is recommended where possible.\n        But if you can only decide whether to use another fixture at test\n        setup time, you may use this function to retrieve it inside a fixture\n        or test function body.\n    \n        This method can be used during the test setup phase or the test run\n        phase, but during the test teardown phase a fixture&amp;#x27;s value may not\n        be available.\n    \n        :param argname:\n            The fixture name.\n        :raises pytest.FixtureLookupError:\n            If the given fixture could not be found.\n        &amp;quot;&amp;quot;&amp;quot;\n        # Note that in addition to the use case described in the docstring,\n        # getfixturevalue() is also called by pytest itself during item and fixture\n        # setup to evaluate the fixtures that are requested statically\n        # (using function parameters, autouse, etc).\n    \n&amp;gt;       fixturedef = self._get_active_fixturedef(argname)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:549: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:640: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1128: in execute\n    result = ihook.pytest_fixture_setup(fixturedef=self, request=request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_hooks.py:512: in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:53: in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:38: in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py:730: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/setuponly.py:36: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1196: in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n                     ^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\npeppol_context = PeppolContext(sml_zone=&amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;, enterprise_id=None, siren=None, siret=None, result=None)\n\n    @pytest.fixture\n    def peppol_service(peppol_context) -&amp;gt; PeppolLookupService:\n        &amp;quot;&amp;quot;&amp;quot;Service PEPPOL configur\u00e9 pour les tests.&amp;quot;&amp;quot;&amp;quot;\n    \n        def mock_dns_resolver(hostname: str) -&amp;gt; Optional[str]:\n            &amp;quot;&amp;quot;&amp;quot;R\u00e9solveur DNS mock pour les tests.&amp;quot;&amp;quot;&amp;quot;\n            return peppol_context[&amp;quot;dns_responses&amp;quot;].get(hostname)\n    \n        service = PeppolLookupService(\n&amp;gt;           environment=peppol_context[&amp;quot;environment&amp;quot;],\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            dns_resolver=mock_dns_resolver,\n        )\nE       TypeError: &amp;#x27;PeppolContext&amp;#x27; object is not subscriptable\n\nsrc/pac_bdd/peppol.py:99: TypeError\n&#34;}], &#34;test_scenario.py::test_v\u00e9rification_des_document_types_support\u00e9s&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_v\u00e9rification_des_document_types_support\u00e9s&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_v\u00e9rification_des_document_types_support\u00e9s&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;FixtureRequest for &amp;lt;Function test_v\u00e9rification_des_document_types_support\u00e9s&amp;gt;&amp;gt;, argname = &amp;#x27;peppol_service&amp;#x27;\n\n    def getfixturevalue(self, argname: str) -&amp;gt; Any:\n        &amp;quot;&amp;quot;&amp;quot;Dynamically run a named fixture function.\n    \n        Declaring fixtures via function argument is recommended where possible.\n        But if you can only decide whether to use another fixture at test\n        setup time, you may use this function to retrieve it inside a fixture\n        or test function body.\n    \n        This method can be used during the test setup phase or the test run\n        phase, but during the test teardown phase a fixture&amp;#x27;s value may not\n        be available.\n    \n        :param argname:\n            The fixture name.\n        :raises pytest.FixtureLookupError:\n            If the given fixture could not be found.\n        &amp;quot;&amp;quot;&amp;quot;\n        # Note that in addition to the use case described in the docstring,\n        # getfixturevalue() is also called by pytest itself during item and fixture\n        # setup to evaluate the fixtures that are requested statically\n        # (using function parameters, autouse, etc).\n    \n&amp;gt;       fixturedef = self._get_active_fixturedef(argname)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:549: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:640: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1128: in execute\n    result = ihook.pytest_fixture_setup(fixturedef=self, request=request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_hooks.py:512: in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:53: in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:38: in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py:730: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/setuponly.py:36: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1196: in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n                     ^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\npeppol_context = PeppolContext(sml_zone=&amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;, enterprise_id=None, siren=None, siret=None, result=None)\n\n    @pytest.fixture\n    def peppol_service(peppol_context) -&amp;gt; PeppolLookupService:\n        &amp;quot;&amp;quot;&amp;quot;Service PEPPOL configur\u00e9 pour les tests.&amp;quot;&amp;quot;&amp;quot;\n    \n        def mock_dns_resolver(hostname: str) -&amp;gt; Optional[str]:\n            &amp;quot;&amp;quot;&amp;quot;R\u00e9solveur DNS mock pour les tests.&amp;quot;&amp;quot;&amp;quot;\n            return peppol_context[&amp;quot;dns_responses&amp;quot;].get(hostname)\n    \n        service = PeppolLookupService(\n&amp;gt;           environment=peppol_context[&amp;quot;environment&amp;quot;],\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            dns_resolver=mock_dns_resolver,\n        )\nE       TypeError: &amp;#x27;PeppolContext&amp;#x27; object is not subscriptable\n\nsrc/pac_bdd/peppol.py:99: TypeError\n&#34;}], &#34;test_scenario.py::test_timeout_lors_du_lookup_sml&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_timeout_lors_du_lookup_sml&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_timeout_lors_du_lookup_sml&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;FixtureRequest for &amp;lt;Function test_timeout_lors_du_lookup_sml&amp;gt;&amp;gt;, argname = &amp;#x27;peppol_service&amp;#x27;\n\n    def getfixturevalue(self, argname: str) -&amp;gt; Any:\n        &amp;quot;&amp;quot;&amp;quot;Dynamically run a named fixture function.\n    \n        Declaring fixtures via function argument is recommended where possible.\n        But if you can only decide whether to use another fixture at test\n        setup time, you may use this function to retrieve it inside a fixture\n        or test function body.\n    \n        This method can be used during the test setup phase or the test run\n        phase, but during the test teardown phase a fixture&amp;#x27;s value may not\n        be available.\n    \n        :param argname:\n            The fixture name.\n        :raises pytest.FixtureLookupError:\n            If the given fixture could not be found.\n        &amp;quot;&amp;quot;&amp;quot;\n        # Note that in addition to the use case described in the docstring,\n        # getfixturevalue() is also called by pytest itself during item and fixture\n        # setup to evaluate the fixtures that are requested statically\n        # (using function parameters, autouse, etc).\n    \n&amp;gt;       fixturedef = self._get_active_fixturedef(argname)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:549: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:640: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1128: in execute\n    result = ihook.pytest_fixture_setup(fixturedef=self, request=request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_hooks.py:512: in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:53: in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:38: in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py:730: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/setuponly.py:36: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1196: in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n                     ^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\npeppol_context = PeppolContext(sml_zone=&amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;, enterprise_id=None, siren=None, siret=None, result=None)\n\n    @pytest.fixture\n    def peppol_service(peppol_context) -&amp;gt; PeppolLookupService:\n        &amp;quot;&amp;quot;&amp;quot;Service PEPPOL configur\u00e9 pour les tests.&amp;quot;&amp;quot;&amp;quot;\n    \n        def mock_dns_resolver(hostname: str) -&amp;gt; Optional[str]:\n            &amp;quot;&amp;quot;&amp;quot;R\u00e9solveur DNS mock pour les tests.&amp;quot;&amp;quot;&amp;quot;\n            return peppol_context[&amp;quot;dns_responses&amp;quot;].get(hostname)\n    \n        service = PeppolLookupService(\n&amp;gt;           environment=peppol_context[&amp;quot;environment&amp;quot;],\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            dns_resolver=mock_dns_resolver,\n        )\nE       TypeError: &amp;#x27;PeppolContext&amp;#x27; object is not subscriptable\n\nsrc/pac_bdd/peppol.py:99: TypeError\n&#34;}], &#34;test_scenario.py::test_smp_temporairement_indisponible&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_smp_temporairement_indisponible&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_smp_temporairement_indisponible&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;FixtureRequest for &amp;lt;Function test_smp_temporairement_indisponible&amp;gt;&amp;gt;, argname = &amp;#x27;peppol_service&amp;#x27;\n\n    def getfixturevalue(self, argname: str) -&amp;gt; Any:\n        &amp;quot;&amp;quot;&amp;quot;Dynamically run a named fixture function.\n    \n        Declaring fixtures via function argument is recommended where possible.\n        But if you can only decide whether to use another fixture at test\n        setup time, you may use this function to retrieve it inside a fixture\n        or test function body.\n    \n        This method can be used during the test setup phase or the test run\n        phase, but during the test teardown phase a fixture&amp;#x27;s value may not\n        be available.\n    \n        :param argname:\n            The fixture name.\n        :raises pytest.FixtureLookupError:\n            If the given fixture could not be found.\n        &amp;quot;&amp;quot;&amp;quot;\n        # Note that in addition to the use case described in the docstring,\n        # getfixturevalue() is also called by pytest itself during item and fixture\n        # setup to evaluate the fixtures that are requested statically\n        # (using function parameters, autouse, etc).\n    \n&amp;gt;       fixturedef = self._get_active_fixturedef(argname)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:549: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:640: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1128: in execute\n    result = ihook.pytest_fixture_setup(fixturedef=self, request=request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_hooks.py:512: in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:53: in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:38: in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py:730: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/setuponly.py:36: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1196: in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n                     ^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\npeppol_context = PeppolContext(sml_zone=&amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;, enterprise_id=None, siren=None, siret=None, result=None)\n\n    @pytest.fixture\n    def peppol_service(peppol_context) -&amp;gt; PeppolLookupService:\n        &amp;quot;&amp;quot;&amp;quot;Service PEPPOL configur\u00e9 pour les tests.&amp;quot;&amp;quot;&amp;quot;\n    \n        def mock_dns_resolver(hostname: str) -&amp;gt; Optional[str]:\n            &amp;quot;&amp;quot;&amp;quot;R\u00e9solveur DNS mock pour les tests.&amp;quot;&amp;quot;&amp;quot;\n            return peppol_context[&amp;quot;dns_responses&amp;quot;].get(hostname)\n    \n        service = PeppolLookupService(\n&amp;gt;           environment=peppol_context[&amp;quot;environment&amp;quot;],\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            dns_resolver=mock_dns_resolver,\n        )\nE       TypeError: &amp;#x27;PeppolContext&amp;#x27; object is not subscriptable\n\nsrc/pac_bdd/peppol.py:99: TypeError\n&#34;}], &#34;test_scenario.py::test_retry_automatique_apr\u00e8s_\u00e9chec_temporaire&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_retry_automatique_apr\u00e8s_\u00e9chec_temporaire&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_retry_automatique_apr\u00e8s_\u00e9chec_temporaire&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;FixtureRequest for &amp;lt;Function test_retry_automatique_apr\u00e8s_\u00e9chec_temporaire&amp;gt;&amp;gt;, argname = &amp;#x27;peppol_service&amp;#x27;\n\n    def getfixturevalue(self, argname: str) -&amp;gt; Any:\n        &amp;quot;&amp;quot;&amp;quot;Dynamically run a named fixture function.\n    \n        Declaring fixtures via function argument is recommended where possible.\n        But if you can only decide whether to use another fixture at test\n        setup time, you may use this function to retrieve it inside a fixture\n        or test function body.\n    \n        This method can be used during the test setup phase or the test run\n        phase, but during the test teardown phase a fixture&amp;#x27;s value may not\n        be available.\n    \n        :param argname:\n            The fixture name.\n        :raises pytest.FixtureLookupError:\n            If the given fixture could not be found.\n        &amp;quot;&amp;quot;&amp;quot;\n        # Note that in addition to the use case described in the docstring,\n        # getfixturevalue() is also called by pytest itself during item and fixture\n        # setup to evaluate the fixtures that are requested statically\n        # (using function parameters, autouse, etc).\n    \n&amp;gt;       fixturedef = self._get_active_fixturedef(argname)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:549: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:640: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1128: in execute\n    result = ihook.pytest_fixture_setup(fixturedef=self, request=request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_hooks.py:512: in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:53: in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:38: in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py:730: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/setuponly.py:36: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1196: in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n                     ^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\npeppol_context = PeppolContext(sml_zone=&amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;, enterprise_id=None, siren=None, siret=None, result=None)\n\n    @pytest.fixture\n    def peppol_service(peppol_context) -&amp;gt; PeppolLookupService:\n        &amp;quot;&amp;quot;&amp;quot;Service PEPPOL configur\u00e9 pour les tests.&amp;quot;&amp;quot;&amp;quot;\n    \n        def mock_dns_resolver(hostname: str) -&amp;gt; Optional[str]:\n            &amp;quot;&amp;quot;&amp;quot;R\u00e9solveur DNS mock pour les tests.&amp;quot;&amp;quot;&amp;quot;\n            return peppol_context[&amp;quot;dns_responses&amp;quot;].get(hostname)\n    \n        service = PeppolLookupService(\n&amp;gt;           environment=peppol_context[&amp;quot;environment&amp;quot;],\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            dns_resolver=mock_dns_resolver,\n        )\nE       TypeError: &amp;#x27;PeppolContext&amp;#x27; object is not subscriptable\n\nsrc/pac_bdd/peppol.py:99: TypeError\n&#34;}], &#34;test_scenario.py::test_\u00e9chec_d\u00e9finitif_apr\u00e8s_plusieurs_retries&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_\u00e9chec_d\u00e9finitif_apr\u00e8s_plusieurs_retries&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_\u00e9chec_d\u00e9finitif_apr\u00e8s_plusieurs_retries&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;FixtureRequest for &amp;lt;Function test_\u00e9chec_d\u00e9finitif_apr\u00e8s_plusieurs_retries&amp;gt;&amp;gt;, argname = &amp;#x27;peppol_service&amp;#x27;\n\n    def getfixturevalue(self, argname: str) -&amp;gt; Any:\n        &amp;quot;&amp;quot;&amp;quot;Dynamically run a named fixture function.\n    \n        Declaring fixtures via function argument is recommended where possible.\n        But if you can only decide whether to use another fixture at test\n        setup time, you may use this function to retrieve it inside a fixture\n        or test function body.\n    \n        This method can be used during the test setup phase or the test run\n        phase, but during the test teardown phase a fixture&amp;#x27;s value may not\n        be available.\n    \n        :param argname:\n            The fixture name.\n        :raises pytest.FixtureLookupError:\n            If the given fixture could not be found.\n        &amp;quot;&amp;quot;&amp;quot;\n        # Note that in addition to the use case described in the docstring,\n        # getfixturevalue() is also called by pytest itself during item and fixture\n        # setup to evaluate the fixtures that are requested statically\n        # (using function parameters, autouse, etc).\n    \n&amp;gt;       fixturedef = self._get_active_fixturedef(argname)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:549: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:640: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1128: in execute\n    result = ihook.pytest_fixture_setup(fixturedef=self, request=request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_hooks.py:512: in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:53: in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:38: in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py:730: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/setuponly.py:36: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1196: in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n                     ^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\npeppol_context = PeppolContext(sml_zone=&amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;, enterprise_id=None, siren=None, siret=None, result=None)\n\n    @pytest.fixture\n    def peppol_service(peppol_context) -&amp;gt; PeppolLookupService:\n        &amp;quot;&amp;quot;&amp;quot;Service PEPPOL configur\u00e9 pour les tests.&amp;quot;&amp;quot;&amp;quot;\n    \n        def mock_dns_resolver(hostname: str) -&amp;gt; Optional[str]:\n            &amp;quot;&amp;quot;&amp;quot;R\u00e9solveur DNS mock pour les tests.&amp;quot;&amp;quot;&amp;quot;\n            return peppol_context[&amp;quot;dns_responses&amp;quot;].get(hostname)\n    \n        service = PeppolLookupService(\n&amp;gt;           environment=peppol_context[&amp;quot;environment&amp;quot;],\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            dns_resolver=mock_dns_resolver,\n        )\nE       TypeError: &amp;#x27;PeppolContext&amp;#x27; object is not subscriptable\n\nsrc/pac_bdd/peppol.py:99: TypeError\n&#34;}], &#34;test_scenario.py::test_communication_bidirectionnelle_entre_2_pa&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_communication_bidirectionnelle_entre_2_pa&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_communication_bidirectionnelle_entre_2_pa&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;FixtureRequest for &amp;lt;Function test_communication_bidirectionnelle_entre_2_pa&amp;gt;&amp;gt;, argname = &amp;#x27;peppol_service&amp;#x27;\n\n    def getfixturevalue(self, argname: str) -&amp;gt; Any:\n        &amp;quot;&amp;quot;&amp;quot;Dynamically run a named fixture function.\n    \n        Declaring fixtures via function argument is recommended where possible.\n        But if you can only decide whether to use another fixture at test\n        setup time, you may use this function to retrieve it inside a fixture\n        or test function body.\n    \n        This method can be used during the test setup phase or the test run\n        phase, but during the test teardown phase a fixture&amp;#x27;s value may not\n        be available.\n    \n        :param argname:\n            The fixture name.\n        :raises pytest.FixtureLookupError:\n            If the given fixture could not be found.\n        &amp;quot;&amp;quot;&amp;quot;\n        # Note that in addition to the use case described in the docstring,\n        # getfixturevalue() is also called by pytest itself during item and fixture\n        # setup to evaluate the fixtures that are requested statically\n        # (using function parameters, autouse, etc).\n    \n&amp;gt;       fixturedef = self._get_active_fixturedef(argname)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:549: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:640: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1128: in execute\n    result = ihook.pytest_fixture_setup(fixturedef=self, request=request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_hooks.py:512: in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:53: in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:38: in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py:730: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/setuponly.py:36: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1196: in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n                     ^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\npeppol_context = PeppolContext(sml_zone=&amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;, enterprise_id=None, siren=None, siret=None, result=None)\n\n    @pytest.fixture\n    def peppol_service(peppol_context) -&amp;gt; PeppolLookupService:\n        &amp;quot;&amp;quot;&amp;quot;Service PEPPOL configur\u00e9 pour les tests.&amp;quot;&amp;quot;&amp;quot;\n    \n        def mock_dns_resolver(hostname: str) -&amp;gt; Optional[str]:\n            &amp;quot;&amp;quot;&amp;quot;R\u00e9solveur DNS mock pour les tests.&amp;quot;&amp;quot;&amp;quot;\n            return peppol_context[&amp;quot;dns_responses&amp;quot;].get(hostname)\n    \n        service = PeppolLookupService(\n&amp;gt;           environment=peppol_context[&amp;quot;environment&amp;quot;],\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            dns_resolver=mock_dns_resolver,\n        )\nE       TypeError: &amp;#x27;PeppolContext&amp;#x27; object is not subscriptable\n\nsrc/pac_bdd/peppol.py:99: TypeError\n&#34;}], &#34;test_scenario.py::test_r\u00e9ception_dune_facture_via_as4_depuis_une_pa_distante&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_r\u00e9ception_dune_facture_via_as4_depuis_une_pa_distante&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_r\u00e9ception_dune_facture_via_as4_depuis_une_pa_distante&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;FixtureRequest for &amp;lt;Function test_r\u00e9ception_dune_facture_via_as4_depuis_une_pa_distante&amp;gt;&amp;gt;, argname = &amp;#x27;peppol_service&amp;#x27;\n\n    def getfixturevalue(self, argname: str) -&amp;gt; Any:\n        &amp;quot;&amp;quot;&amp;quot;Dynamically run a named fixture function.\n    \n        Declaring fixtures via function argument is recommended where possible.\n        But if you can only decide whether to use another fixture at test\n        setup time, you may use this function to retrieve it inside a fixture\n        or test function body.\n    \n        This method can be used during the test setup phase or the test run\n        phase, but during the test teardown phase a fixture&amp;#x27;s value may not\n        be available.\n    \n        :param argname:\n            The fixture name.\n        :raises pytest.FixtureLookupError:\n            If the given fixture could not be found.\n        &amp;quot;&amp;quot;&amp;quot;\n        # Note that in addition to the use case described in the docstring,\n        # getfixturevalue() is also called by pytest itself during item and fixture\n        # setup to evaluate the fixtures that are requested statically\n        # (using function parameters, autouse, etc).\n    \n&amp;gt;       fixturedef = self._get_active_fixturedef(argname)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:549: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:640: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1128: in execute\n    result = ihook.pytest_fixture_setup(fixturedef=self, request=request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_hooks.py:512: in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:53: in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:38: in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py:730: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/setuponly.py:36: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1196: in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n                     ^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\npeppol_context = PeppolContext(sml_zone=&amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;, enterprise_id=None, siren=None, siret=None, result=None)\n\n    @pytest.fixture\n    def peppol_service(peppol_context) -&amp;gt; PeppolLookupService:\n        &amp;quot;&amp;quot;&amp;quot;Service PEPPOL configur\u00e9 pour les tests.&amp;quot;&amp;quot;&amp;quot;\n    \n        def mock_dns_resolver(hostname: str) -&amp;gt; Optional[str]:\n            &amp;quot;&amp;quot;&amp;quot;R\u00e9solveur DNS mock pour les tests.&amp;quot;&amp;quot;&amp;quot;\n            return peppol_context[&amp;quot;dns_responses&amp;quot;].get(hostname)\n    \n        service = PeppolLookupService(\n&amp;gt;           environment=peppol_context[&amp;quot;environment&amp;quot;],\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            dns_resolver=mock_dns_resolver,\n        )\nE       TypeError: &amp;#x27;PeppolContext&amp;#x27; object is not subscriptable\n\nsrc/pac_bdd/peppol.py:99: TypeError\n&#34;}], &#34;test_scenario.py::test_facture_b2g_via_chorus_pro_peppol&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_facture_b2g_via_chorus_pro_peppol&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_facture_b2g_via_chorus_pro_peppol&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;FixtureRequest for &amp;lt;Function test_facture_b2g_via_chorus_pro_peppol&amp;gt;&amp;gt;, argname = &amp;#x27;peppol_service&amp;#x27;\n\n    def getfixturevalue(self, argname: str) -&amp;gt; Any:\n        &amp;quot;&amp;quot;&amp;quot;Dynamically run a named fixture function.\n    \n        Declaring fixtures via function argument is recommended where possible.\n        But if you can only decide whether to use another fixture at test\n        setup time, you may use this function to retrieve it inside a fixture\n        or test function body.\n    \n        This method can be used during the test setup phase or the test run\n        phase, but during the test teardown phase a fixture&amp;#x27;s value may not\n        be available.\n    \n        :param argname:\n            The fixture name.\n        :raises pytest.FixtureLookupError:\n            If the given fixture could not be found.\n        &amp;quot;&amp;quot;&amp;quot;\n        # Note that in addition to the use case described in the docstring,\n        # getfixturevalue() is also called by pytest itself during item and fixture\n        # setup to evaluate the fixtures that are requested statically\n        # (using function parameters, autouse, etc).\n    \n&amp;gt;       fixturedef = self._get_active_fixturedef(argname)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:549: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:640: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1128: in execute\n    result = ihook.pytest_fixture_setup(fixturedef=self, request=request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_hooks.py:512: in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:53: in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pluggy/_callers.py:38: in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py:730: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/setuponly.py:36: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1196: in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n                     ^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\npeppol_context = PeppolContext(sml_zone=&amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;, enterprise_id=None, siren=None, siret=None, result=None)\n\n    @pytest.fixture\n    def peppol_service(peppol_context) -&amp;gt; PeppolLookupService:\n        &amp;quot;&amp;quot;&amp;quot;Service PEPPOL configur\u00e9 pour les tests.&amp;quot;&amp;quot;&amp;quot;\n    \n        def mock_dns_resolver(hostname: str) -&amp;gt; Optional[str]:\n            &amp;quot;&amp;quot;&amp;quot;R\u00e9solveur DNS mock pour les tests.&amp;quot;&amp;quot;&amp;quot;\n            return peppol_context[&amp;quot;dns_responses&amp;quot;].get(hostname)\n    \n        service = PeppolLookupService(\n&amp;gt;           environment=peppol_context[&amp;quot;environment&amp;quot;],\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            dns_resolver=mock_dns_resolver,\n        )\nE       TypeError: &amp;#x27;PeppolContext&amp;#x27; object is not subscriptable\n\nsrc/pac_bdd/peppol.py:99: TypeError\n&#34;}], &#34;test_scenario.py::test_xxxxx&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_xxxxx&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_xxxxx&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\nvvvvv world fixture starts .......\nvvvvv dbg 10\nvvvvv dbg 30\nvvvvv dbg aenter 10\nvvvvv dbg aenter 20\nvvvvv dbg aenter 30\nvvvvv dbg async with 10\n--------------------------- Captured stdout teardown ---------------------------\nvvvvv dbg async with 20\nvvvvv dbg aexit 10\nvvvvv dbg aexit 20\nvvvvv world fixture ends .......\n&#34;}], &#34;test_scenario.py::test_md5&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_md5&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_md5&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;fixturefunc = &amp;lt;function check_result at 0x763203ff3ba0&amp;gt;, request = &amp;lt;FixtureRequest for &amp;lt;Function test_md5&amp;gt;&amp;gt;\nkwargs = {&amp;#x27;peppol_context&amp;#x27;: PeppolContext(sml_zone=&amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;, enterprise_id=None, siren=None, siret=None, result=&amp;#x27;b881aaeff8eeaed7190491ccdeaa42fc&amp;#x27;), &amp;#x27;result&amp;#x27;: &amp;#x27;6c2675d749449f2c8af1216fd866bb54&amp;#x27;}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -&amp;gt; FixtureValue:\n        if inspect.isgeneratorfunction(fixturefunc):\n            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f&amp;quot;{request.fixturename} did not yield a value&amp;quot;) from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n&amp;gt;           fixture_result = fixturefunc(**kwargs)\n                             ^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\npeppol_context = PeppolContext(sml_zone=&amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;, enterprise_id=None, siren=None, siret=None, result=&amp;#x27;b881aaeff8eeaed7190491ccdeaa42fc&amp;#x27;)\nresult = &amp;#x27;6c2675d749449f2c8af1216fd866bb54&amp;#x27;\n\n    @then(parsers.parse(&amp;#x27;&amp;#x27;&amp;#x27;j&amp;#x27;obtiens &amp;quot;{result}&amp;quot;&amp;#x27;&amp;#x27;&amp;#x27;))\n    def check_result(\n        peppol_context: PeppolContext,\n        result: str,\n    ):\n        &amp;quot;&amp;quot;&amp;quot;\u00e9tape g\u00e9n\u00e9rique pour tester tout r\u00e9sultat&amp;quot;&amp;quot;&amp;quot;\n        if peppol_context.result != result:\n            print(f&amp;quot;result: {peppol_context.result}&amp;quot;)\n            print(f&amp;quot;expecting: {result}&amp;quot;)\n&amp;gt;       assert peppol_context.result == result\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE       AssertionError\n\nsrc/pac_bdd/peppol.py:124: AssertionError\n\n----------------------------- Captured stdout call -----------------------------\nresult: b881aaeff8eeaed7190491ccdeaa42fc\nexpecting: 6c2675d749449f2c8af1216fd866bb54\n&#34;}], &#34;test_scenario.py::test_identification_france&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_identification_france&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_identification_france&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\nxxxx 0002 0002\nxxxx 0009 0009\nxxxx 9957 9957\n&#34;}], &#34;test_scenario.py::test_empreinte_participant&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_empreinte_participant&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_empreinte_participant&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;test_scenario.py::test_h\u00f4te_sml&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_h\u00f4te_sml&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_h\u00f4te_sml&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;test_scenario.py::test_rejet_dolibarr&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_rejet_dolibarr&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_rejet_dolibarr&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;fixturefunc = &amp;lt;function compliance_rule_set at 0x763203f69760&amp;gt;, request = &amp;lt;FixtureRequest for &amp;lt;Function test_rejet_dolibarr&amp;gt;&amp;gt;, kwargs = {}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -&amp;gt; FixtureValue:\n        if inspect.isgeneratorfunction(fixturefunc):\n            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f&amp;quot;{request.fixturename} did not yield a value&amp;quot;) from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n&amp;gt;           fixture_result = fixturefunc(**kwargs)\n                             ^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\n    @when(&amp;quot;je d\u00e9finis un contr\u00f4le de conformit\u00e9 m\u00e9tier fournisseur&amp;quot;)\n    def compliance_rule_set():\n&amp;gt;       raise NotImplementedError()\nE       NotImplementedError\n\nsrc/pac_bdd/tobeimplemented.py:41: NotImplementedError\n&#34;}], &#34;test_scenario.py::test_facture_rejet\u00e9e&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_facture_rejet\u00e9e&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_facture_rejet\u00e9e&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;fixturefunc = &amp;lt;function submit_invoice_simple at 0x763203f68e00&amp;gt;, request = &amp;lt;FixtureRequest for &amp;lt;Function test_facture_rejet\u00e9e&amp;gt;&amp;gt;, kwargs = {}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -&amp;gt; FixtureValue:\n        if inspect.isgeneratorfunction(fixturefunc):\n            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f&amp;quot;{request.fixturename} did not yield a value&amp;quot;) from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n&amp;gt;           fixture_result = fixturefunc(**kwargs)\n                             ^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\n    @when(&amp;quot;je d\u00e9pose une facture&amp;quot;)\n    def submit_invoice_simple():\n        # POST /\n&amp;gt;       raise NotImplementedError()\nE       NotImplementedError\n\nsrc/pac_bdd/tobeimplemented.py:13: NotImplementedError\n&#34;}]}, &#34;renderCollapsed&#34;: [&#34;passed&#34;], &#34;initialSort&#34;: &#34;result&#34;, &#34;title&#34;: &#34;report.html&#34;}"></div>
    <script>
      (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
const { getCollapsedCategory, setCollapsedIds } = require('./storage.js')

class DataManager {
    setManager(data) {
        const collapsedCategories = [...getCollapsedCategory(data.renderCollapsed)]
        const collapsedIds = []
        const tests = Object.values(data.tests).flat().map((test, index) => {
            const collapsed = collapsedCategories.includes(test.result.toLowerCase())
            const id = `test_${index}`
            if (collapsed) {
                collapsedIds.push(id)
            }
            return {
                ...test,
                id,
                collapsed,
            }
        })
        const dataBlob = { ...data, tests }
        this.data = { ...dataBlob }
        this.renderData = { ...dataBlob }
        setCollapsedIds(collapsedIds)
    }

    get allData() {
        return { ...this.data }
    }

    resetRender() {
        this.renderData = { ...this.data }
    }

    setRender(data) {
        this.renderData.tests = [...data]
    }

    toggleCollapsedItem(id) {
        this.renderData.tests = this.renderData.tests.map((test) =>
            test.id === id ? { ...test, collapsed: !test.collapsed } : test,
        )
    }

    set allCollapsed(collapsed) {
        this.renderData = { ...this.renderData, tests: [...this.renderData.tests.map((test) => (
            { ...test, collapsed }
        ))] }
    }

    get testSubset() {
        return [...this.renderData.tests]
    }

    get environment() {
        return this.renderData.environment
    }

    get initialSort() {
        return this.data.initialSort
    }
}

module.exports = {
    manager: new DataManager(),
}

},{"./storage.js":8}],2:[function(require,module,exports){
const mediaViewer = require('./mediaviewer.js')
const templateEnvRow = document.getElementById('template_environment_row')
const templateResult = document.getElementById('template_results-table__tbody')

function htmlToElements(html) {
    const temp = document.createElement('template')
    temp.innerHTML = html
    return temp.content.childNodes
}

const find = (selector, elem) => {
    if (!elem) {
        elem = document
    }
    return elem.querySelector(selector)
}

const findAll = (selector, elem) => {
    if (!elem) {
        elem = document
    }
    return [...elem.querySelectorAll(selector)]
}

const dom = {
    getStaticRow: (key, value) => {
        const envRow = templateEnvRow.content.cloneNode(true)
        const isObj = typeof value === 'object' && value !== null
        const values = isObj ? Object.keys(value).map((k) => `${k}: ${value[k]}`) : null

        const valuesElement = htmlToElements(
            values ? `<ul>${values.map((val) => `<li>${val}</li>`).join('')}<ul>` : `<div>${value}</div>`)[0]
        const td = findAll('td', envRow)
        td[0].textContent = key
        td[1].appendChild(valuesElement)

        return envRow
    },
    getResultTBody: ({ testId, id, log, extras, resultsTableRow, tableHtml, result, collapsed }) => {
        const resultBody = templateResult.content.cloneNode(true)
        resultBody.querySelector('tbody').classList.add(result.toLowerCase())
        resultBody.querySelector('tbody').id = testId
        resultBody.querySelector('.collapsible').dataset.id = id

        resultsTableRow.forEach((html) => {
            const t = document.createElement('template')
            t.innerHTML = html
            resultBody.querySelector('.collapsible').appendChild(t.content)
        })

        if (log) {
            // Wrap lines starting with "E" with span.error to color those lines red
            const wrappedLog = log.replace(/^E.*$/gm, (match) => `<span class="error">${match}</span>`)
            resultBody.querySelector('.log').innerHTML = wrappedLog
        } else {
            resultBody.querySelector('.log').remove()
        }

        if (collapsed) {
            resultBody.querySelector('.collapsible > td')?.classList.add('collapsed')
            resultBody.querySelector('.extras-row').classList.add('hidden')
        } else {
            resultBody.querySelector('.collapsible > td')?.classList.remove('collapsed')
        }

        const media = []
        extras?.forEach(({ name, format_type, content }) => {
            if (['image', 'video'].includes(format_type)) {
                media.push({ path: content, name, format_type })
            }

            if (format_type === 'html') {
                resultBody.querySelector('.extraHTML').insertAdjacentHTML('beforeend', `<div>${content}</div>`)
            }
        })
        mediaViewer.setup(resultBody, media)

        // Add custom html from the pytest_html_results_table_html hook
        tableHtml?.forEach((item) => {
            resultBody.querySelector('td[class="extra"]').insertAdjacentHTML('beforeend', item)
        })

        return resultBody
    },
}

module.exports = {
    dom,
    htmlToElements,
    find,
    findAll,
}

},{"./mediaviewer.js":6}],3:[function(require,module,exports){
const { manager } = require('./datamanager.js')
const { doSort } = require('./sort.js')
const storageModule = require('./storage.js')

const getFilteredSubSet = (filter) =>
    manager.allData.tests.filter(({ result }) => filter.includes(result.toLowerCase()))

const doInitFilter = () => {
    const currentFilter = storageModule.getVisible()
    const filteredSubset = getFilteredSubSet(currentFilter)
    manager.setRender(filteredSubset)
}

const doFilter = (type, show) => {
    if (show) {
        storageModule.showCategory(type)
    } else {
        storageModule.hideCategory(type)
    }

    const currentFilter = storageModule.getVisible()
    const filteredSubset = getFilteredSubSet(currentFilter)
    manager.setRender(filteredSubset)

    const sortColumn = storageModule.getSort()
    doSort(sortColumn, true)
}

module.exports = {
    doFilter,
    doInitFilter,
}

},{"./datamanager.js":1,"./sort.js":7,"./storage.js":8}],4:[function(require,module,exports){
const { redraw, bindEvents, renderStatic } = require('./main.js')
const { doInitFilter } = require('./filter.js')
const { doInitSort } = require('./sort.js')
const { manager } = require('./datamanager.js')
const data = JSON.parse(document.getElementById('data-container').dataset.jsonblob)

function init() {
    manager.setManager(data)
    doInitFilter()
    doInitSort()
    renderStatic()
    redraw()
    bindEvents()
}

init()

},{"./datamanager.js":1,"./filter.js":3,"./main.js":5,"./sort.js":7}],5:[function(require,module,exports){
const { dom, find, findAll } = require('./dom.js')
const { manager } = require('./datamanager.js')
const { doSort } = require('./sort.js')
const { doFilter } = require('./filter.js')
const {
    getVisible,
    getCollapsedIds,
    setCollapsedIds,
    getSort,
    getSortDirection,
    possibleFilters,
} = require('./storage.js')

const removeChildren = (node) => {
    while (node.firstChild) {
        node.removeChild(node.firstChild)
    }
}

const renderStatic = () => {
    const renderEnvironmentTable = () => {
        const environment = manager.environment
        const rows = Object.keys(environment).map((key) => dom.getStaticRow(key, environment[key]))
        const table = document.getElementById('environment')
        removeChildren(table)
        rows.forEach((row) => table.appendChild(row))
    }
    renderEnvironmentTable()
}

const addItemToggleListener = (elem) => {
    elem.addEventListener('click', ({ target }) => {
        const id = target.parentElement.dataset.id
        manager.toggleCollapsedItem(id)

        const collapsedIds = getCollapsedIds()
        if (collapsedIds.includes(id)) {
            const updated = collapsedIds.filter((item) => item !== id)
            setCollapsedIds(updated)
        } else {
            collapsedIds.push(id)
            setCollapsedIds(collapsedIds)
        }
        redraw()
    })
}

const renderContent = (tests) => {
    const sortAttr = getSort(manager.initialSort)
    const sortAsc = JSON.parse(getSortDirection())
    const rows = tests.map(dom.getResultTBody)
    const table = document.getElementById('results-table')
    const tableHeader = document.getElementById('results-table-head')

    const newTable = document.createElement('table')
    newTable.id = 'results-table'

    // remove all sorting classes and set the relevant
    findAll('.sortable', tableHeader).forEach((elem) => elem.classList.remove('asc', 'desc'))
    tableHeader.querySelector(`.sortable[data-column-type="${sortAttr}"]`)?.classList.add(sortAsc ? 'desc' : 'asc')
    newTable.appendChild(tableHeader)

    if (!rows.length) {
        const emptyTable = document.getElementById('template_results-table__body--empty').content.cloneNode(true)
        newTable.appendChild(emptyTable)
    } else {
        rows.forEach((row) => {
            if (!!row) {
                findAll('.collapsible td:not(.col-links', row).forEach(addItemToggleListener)
                find('.logexpander', row).addEventListener('click',
                    (evt) => evt.target.parentNode.classList.toggle('expanded'),
                )
                newTable.appendChild(row)
            }
        })
    }

    table.replaceWith(newTable)
}

const renderDerived = () => {
    const currentFilter = getVisible()
    possibleFilters.forEach((result) => {
        const input = document.querySelector(`input[data-test-result="${result}"]`)
        input.checked = currentFilter.includes(result)
    })
}

const bindEvents = () => {
    const filterColumn = (evt) => {
        const { target: element } = evt
        const { testResult } = element.dataset

        doFilter(testResult, element.checked)
        const collapsedIds = getCollapsedIds()
        const updated = manager.renderData.tests.map((test) => {
            return {
                ...test,
                collapsed: collapsedIds.includes(test.id),
            }
        })
        manager.setRender(updated)
        redraw()
    }

    const header = document.getElementById('environment-header')
    header.addEventListener('click', () => {
        const table = document.getElementById('environment')
        table.classList.toggle('hidden')
        header.classList.toggle('collapsed')
    })

    findAll('input[name="filter_checkbox"]').forEach((elem) => {
        elem.addEventListener('click', filterColumn)
    })

    findAll('.sortable').forEach((elem) => {
        elem.addEventListener('click', (evt) => {
            const { target: element } = evt
            const { columnType } = element.dataset
            doSort(columnType)
            redraw()
        })
    })

    document.getElementById('show_all_details').addEventListener('click', () => {
        manager.allCollapsed = false
        setCollapsedIds([])
        redraw()
    })
    document.getElementById('hide_all_details').addEventListener('click', () => {
        manager.allCollapsed = true
        const allIds = manager.renderData.tests.map((test) => test.id)
        setCollapsedIds(allIds)
        redraw()
    })
}

const redraw = () => {
    const { testSubset } = manager

    renderContent(testSubset)
    renderDerived()
}

module.exports = {
    redraw,
    bindEvents,
    renderStatic,
}

},{"./datamanager.js":1,"./dom.js":2,"./filter.js":3,"./sort.js":7,"./storage.js":8}],6:[function(require,module,exports){
class MediaViewer {
    constructor(assets) {
        this.assets = assets
        this.index = 0
    }

    nextActive() {
        this.index = this.index === this.assets.length - 1 ? 0 : this.index + 1
        return [this.activeFile, this.index]
    }

    prevActive() {
        this.index = this.index === 0 ? this.assets.length - 1 : this.index -1
        return [this.activeFile, this.index]
    }

    get currentIndex() {
        return this.index
    }

    get activeFile() {
        return this.assets[this.index]
    }
}


const setup = (resultBody, assets) => {
    if (!assets.length) {
        resultBody.querySelector('.media').classList.add('hidden')
        return
    }

    const mediaViewer = new MediaViewer(assets)
    const container = resultBody.querySelector('.media-container')
    const leftArrow = resultBody.querySelector('.media-container__nav--left')
    const rightArrow = resultBody.querySelector('.media-container__nav--right')
    const mediaName = resultBody.querySelector('.media__name')
    const counter = resultBody.querySelector('.media__counter')
    const imageEl = resultBody.querySelector('img')
    const sourceEl = resultBody.querySelector('source')
    const videoEl = resultBody.querySelector('video')

    const setImg = (media, index) => {
        if (media?.format_type === 'image') {
            imageEl.src = media.path

            imageEl.classList.remove('hidden')
            videoEl.classList.add('hidden')
        } else if (media?.format_type === 'video') {
            sourceEl.src = media.path

            videoEl.classList.remove('hidden')
            imageEl.classList.add('hidden')
        }

        mediaName.innerText = media?.name
        counter.innerText = `${index + 1} / ${assets.length}`
    }
    setImg(mediaViewer.activeFile, mediaViewer.currentIndex)

    const moveLeft = () => {
        const [media, index] = mediaViewer.prevActive()
        setImg(media, index)
    }
    const doRight = () => {
        const [media, index] = mediaViewer.nextActive()
        setImg(media, index)
    }
    const openImg = () => {
        window.open(mediaViewer.activeFile.path, '_blank')
    }
    if (assets.length === 1) {
        container.classList.add('media-container--fullscreen')
    } else {
        leftArrow.addEventListener('click', moveLeft)
        rightArrow.addEventListener('click', doRight)
    }
    imageEl.addEventListener('click', openImg)
}

module.exports = {
    setup,
}

},{}],7:[function(require,module,exports){
const { manager } = require('./datamanager.js')
const storageModule = require('./storage.js')

const genericSort = (list, key, ascending, customOrder) => {
    let sorted
    if (customOrder) {
        sorted = list.sort((a, b) => {
            const aValue = a.result.toLowerCase()
            const bValue = b.result.toLowerCase()

            const aIndex = customOrder.findIndex((item) => item.toLowerCase() === aValue)
            const bIndex = customOrder.findIndex((item) => item.toLowerCase() === bValue)

            // Compare the indices to determine the sort order
            return aIndex - bIndex
        })
    } else {
        sorted = list.sort((a, b) => a[key] === b[key] ? 0 : a[key] > b[key] ? 1 : -1)
    }

    if (ascending) {
        sorted.reverse()
    }
    return sorted
}

const durationSort = (list, ascending) => {
    const parseDuration = (duration) => {
        if (duration.includes(':')) {
            // If it's in the format "HH:mm:ss"
            const [hours, minutes, seconds] = duration.split(':').map(Number)
            return (hours * 3600 + minutes * 60 + seconds) * 1000
        } else {
            // If it's in the format "nnn ms"
            return parseInt(duration)
        }
    }
    const sorted = list.sort((a, b) => parseDuration(a['duration']) - parseDuration(b['duration']))
    if (ascending) {
        sorted.reverse()
    }
    return sorted
}

const doInitSort = () => {
    const type = storageModule.getSort(manager.initialSort)
    const ascending = storageModule.getSortDirection()
    const list = manager.testSubset
    const initialOrder = ['Error', 'Failed', 'Rerun', 'XFailed', 'XPassed', 'Skipped', 'Passed']

    storageModule.setSort(type)
    storageModule.setSortDirection(ascending)

    if (type?.toLowerCase() === 'original') {
        manager.setRender(list)
    } else {
        let sortedList
        switch (type) {
        case 'duration':
            sortedList = durationSort(list, ascending)
            break
        case 'result':
            sortedList = genericSort(list, type, ascending, initialOrder)
            break
        default:
            sortedList = genericSort(list, type, ascending)
            break
        }
        manager.setRender(sortedList)
    }
}

const doSort = (type, skipDirection) => {
    const newSortType = storageModule.getSort(manager.initialSort) !== type
    const currentAsc = storageModule.getSortDirection()
    let ascending
    if (skipDirection) {
        ascending = currentAsc
    } else {
        ascending = newSortType ? false : !currentAsc
    }
    storageModule.setSort(type)
    storageModule.setSortDirection(ascending)

    const list = manager.testSubset
    const sortedList = type === 'duration' ? durationSort(list, ascending) : genericSort(list, type, ascending)
    manager.setRender(sortedList)
}

module.exports = {
    doInitSort,
    doSort,
}

},{"./datamanager.js":1,"./storage.js":8}],8:[function(require,module,exports){
const possibleFilters = [
    'passed',
    'skipped',
    'failed',
    'error',
    'xfailed',
    'xpassed',
    'rerun',
]

const getVisible = () => {
    const url = new URL(window.location.href)
    const settings = new URLSearchParams(url.search).get('visible')
    const lower = (item) => {
        const lowerItem = item.toLowerCase()
        if (possibleFilters.includes(lowerItem)) {
            return lowerItem
        }
        return null
    }
    return settings === null ?
        possibleFilters :
        [...new Set(settings?.split(',').map(lower).filter((item) => item))]
}

const hideCategory = (categoryToHide) => {
    const url = new URL(window.location.href)
    const visibleParams = new URLSearchParams(url.search).get('visible')
    const currentVisible = visibleParams ? visibleParams.split(',') : [...possibleFilters]
    const settings = [...new Set(currentVisible)].filter((f) => f !== categoryToHide).join(',')

    url.searchParams.set('visible', settings)
    window.history.pushState({}, null, unescape(url.href))
}

const showCategory = (categoryToShow) => {
    if (typeof window === 'undefined') {
        return
    }
    const url = new URL(window.location.href)
    const currentVisible = new URLSearchParams(url.search).get('visible')?.split(',').filter(Boolean) ||
        [...possibleFilters]
    const settings = [...new Set([categoryToShow, ...currentVisible])]
    const noFilter = possibleFilters.length === settings.length || !settings.length

    noFilter ? url.searchParams.delete('visible') : url.searchParams.set('visible', settings.join(','))
    window.history.pushState({}, null, unescape(url.href))
}

const getSort = (initialSort) => {
    const url = new URL(window.location.href)
    let sort = new URLSearchParams(url.search).get('sort')
    if (!sort) {
        sort = initialSort || 'result'
    }
    return sort
}

const setSort = (type) => {
    const url = new URL(window.location.href)
    url.searchParams.set('sort', type)
    window.history.pushState({}, null, unescape(url.href))
}

const getCollapsedCategory = (renderCollapsed) => {
    let categories
    if (typeof window !== 'undefined') {
        const url = new URL(window.location.href)
        const collapsedItems = new URLSearchParams(url.search).get('collapsed')
        switch (true) {
        case !renderCollapsed && collapsedItems === null:
            categories = ['passed']
            break
        case collapsedItems?.length === 0 || /^["']{2}$/.test(collapsedItems):
            categories = []
            break
        case /^all$/.test(collapsedItems) || collapsedItems === null && /^all$/.test(renderCollapsed):
            categories = [...possibleFilters]
            break
        default:
            categories = collapsedItems?.split(',').map((item) => item.toLowerCase()) || renderCollapsed
            break
        }
    } else {
        categories = []
    }
    return categories
}

const getSortDirection = () => JSON.parse(sessionStorage.getItem('sortAsc')) || false
const setSortDirection = (ascending) => sessionStorage.setItem('sortAsc', ascending)

const getCollapsedIds = () => JSON.parse(sessionStorage.getItem('collapsedIds')) || []
const setCollapsedIds = (list) => sessionStorage.setItem('collapsedIds', JSON.stringify(list))

module.exports = {
    getVisible,
    hideCategory,
    showCategory,
    getCollapsedIds,
    setCollapsedIds,
    getSort,
    setSort,
    getSortDirection,
    setSortDirection,
    getCollapsedCategory,
    possibleFilters,
}

},{}]},{},[4]);
    </script>
  </footer>
</html>