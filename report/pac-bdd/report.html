<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title id="head-title">report.html</title>
      <style type="text/css">body {
  font-family: Helvetica, Arial, sans-serif;
  font-size: 12px;
  /* do not increase min-width as some may use split screens */
  min-width: 800px;
  color: #999;
}

h1 {
  font-size: 24px;
  color: black;
}

h2 {
  font-size: 16px;
  color: black;
}

p {
  color: black;
}

a {
  color: #999;
}

table {
  border-collapse: collapse;
}

/******************************
 * SUMMARY INFORMATION
 ******************************/
#environment td {
  padding: 5px;
  border: 1px solid #e6e6e6;
  vertical-align: top;
}
#environment tr:nth-child(odd) {
  background-color: #f6f6f6;
}
#environment ul {
  margin: 0;
  padding: 0 20px;
}

/******************************
 * TEST RESULT COLORS
 ******************************/
span.passed,
.passed .col-result {
  color: green;
}

span.skipped,
span.xfailed,
span.rerun,
.skipped .col-result,
.xfailed .col-result,
.rerun .col-result {
  color: orange;
}

span.error,
span.failed,
span.xpassed,
.error .col-result,
.failed .col-result,
.xpassed .col-result {
  color: red;
}

.col-links__extra {
  margin-right: 3px;
}

/******************************
 * RESULTS TABLE
 *
 * 1. Table Layout
 * 2. Extra
 * 3. Sorting items
 *
 ******************************/
/*------------------
 * 1. Table Layout
 *------------------*/
#results-table {
  border: 1px solid #e6e6e6;
  color: #999;
  font-size: 12px;
  width: 100%;
}
#results-table th,
#results-table td {
  padding: 5px;
  border: 1px solid #e6e6e6;
  text-align: left;
}
#results-table th {
  font-weight: bold;
}

/*------------------
 * 2. Extra
 *------------------*/
.logwrapper {
  max-height: 230px;
  overflow-y: scroll;
  background-color: #e6e6e6;
}
.logwrapper.expanded {
  max-height: none;
}
.logwrapper.expanded .logexpander:after {
  content: "collapse [-]";
}
.logwrapper .logexpander {
  z-index: 1;
  position: sticky;
  top: 10px;
  width: max-content;
  border: 1px solid;
  border-radius: 3px;
  padding: 5px 7px;
  margin: 10px 0 10px calc(100% - 80px);
  cursor: pointer;
  background-color: #e6e6e6;
}
.logwrapper .logexpander:after {
  content: "expand [+]";
}
.logwrapper .logexpander:hover {
  color: #000;
  border-color: #000;
}
.logwrapper .log {
  min-height: 40px;
  position: relative;
  top: -50px;
  height: calc(100% + 50px);
  border: 1px solid #e6e6e6;
  color: black;
  display: block;
  font-family: "Courier New", Courier, monospace;
  padding: 5px;
  padding-right: 80px;
  white-space: pre-wrap;
}

div.media {
  border: 1px solid #e6e6e6;
  float: right;
  height: 240px;
  margin: 0 5px;
  overflow: hidden;
  width: 320px;
}

.media-container {
  display: grid;
  grid-template-columns: 25px auto 25px;
  align-items: center;
  flex: 1 1;
  overflow: hidden;
  height: 200px;
}

.media-container--fullscreen {
  grid-template-columns: 0px auto 0px;
}

.media-container__nav--right,
.media-container__nav--left {
  text-align: center;
  cursor: pointer;
}

.media-container__viewport {
  cursor: pointer;
  text-align: center;
  height: inherit;
}
.media-container__viewport img,
.media-container__viewport video {
  object-fit: cover;
  width: 100%;
  max-height: 100%;
}

.media__name,
.media__counter {
  display: flex;
  flex-direction: row;
  justify-content: space-around;
  flex: 0 0 25px;
  align-items: center;
}

.collapsible td:not(.col-links) {
  cursor: pointer;
}
.collapsible td:not(.col-links):hover::after {
  color: #bbb;
  font-style: italic;
  cursor: pointer;
}

.col-result {
  width: 130px;
}
.col-result:hover::after {
  content: " (hide details)";
}

.col-result.collapsed:hover::after {
  content: " (show details)";
}

#environment-header h2:hover::after {
  content: " (hide details)";
  color: #bbb;
  font-style: italic;
  cursor: pointer;
  font-size: 12px;
}

#environment-header.collapsed h2:hover::after {
  content: " (show details)";
  color: #bbb;
  font-style: italic;
  cursor: pointer;
  font-size: 12px;
}

/*------------------
 * 3. Sorting items
 *------------------*/
.sortable {
  cursor: pointer;
}
.sortable.desc:after {
  content: " ";
  position: relative;
  left: 5px;
  bottom: -12.5px;
  border: 10px solid #4caf50;
  border-bottom: 0;
  border-left-color: transparent;
  border-right-color: transparent;
}
.sortable.asc:after {
  content: " ";
  position: relative;
  left: 5px;
  bottom: 12.5px;
  border: 10px solid #4caf50;
  border-top: 0;
  border-left-color: transparent;
  border-right-color: transparent;
}

.hidden, .summary__reload__button.hidden {
  display: none;
}

.summary__data {
  flex: 0 0 550px;
}
.summary__reload {
  flex: 1 1;
  display: flex;
  justify-content: center;
}
.summary__reload__button {
  flex: 0 0 300px;
  display: flex;
  color: white;
  font-weight: bold;
  background-color: #4caf50;
  text-align: center;
  justify-content: center;
  align-items: center;
  border-radius: 3px;
  cursor: pointer;
}
.summary__reload__button:hover {
  background-color: #46a049;
}
.summary__spacer {
  flex: 0 0 550px;
}

.controls {
  display: flex;
  justify-content: space-between;
}

.filters,
.collapse {
  display: flex;
  align-items: center;
}
.filters button,
.collapse button {
  color: #999;
  border: none;
  background: none;
  cursor: pointer;
  text-decoration: underline;
}
.filters button:hover,
.collapse button:hover {
  color: #ccc;
}

.filter__label {
  margin-right: 10px;
}

      </style>
    
  </head>
  <body>
    <h1 id="title">report.html</h1>
    <p>Report generated on 08-Jan-2026 at 20:09:07 by <a href="https://pypi.python.org/pypi/pytest-html">pytest-html</a>
        v4.1.1</p>
    <div id="environment-header">
      <h2>Environment</h2>
    </div>
    <table id="environment"></table>
    <!-- TEMPLATES -->
      <template id="template_environment_row">
      <tr>
        <td></td>
        <td></td>
      </tr>
    </template>
    <template id="template_results-table__body--empty">
      <tbody class="results-table-row">
        <tr id="not-found-message">
          <td colspan="4">No results found. Check the filters.</th>
        </tr>
    </template>
    <template id="template_results-table__tbody">
      <tbody class="results-table-row">
        <tr class="collapsible">
        </tr>
        <tr class="extras-row">
          <td class="extra" colspan="4">
            <div class="extraHTML"></div>
            <div class="media">
              <div class="media-container">
                  <div class="media-container__nav--left"><</div>
                  <div class="media-container__viewport">
                    <img src="" />
                    <video controls>
                      <source src="" type="video/mp4">
                    </video>
                  </div>
                  <div class="media-container__nav--right">></div>
                </div>
                <div class="media__name"></div>
                <div class="media__counter"></div>
            </div>
            <div class="logwrapper">
              <div class="logexpander"></div>
              <div class="log"></div>
            </div>
          </td>
        </tr>
      </tbody>
    </template>
    <!-- END TEMPLATES -->
    <div class="summary">
      <div class="summary__data">
        <h2>Summary</h2>
        <div class="additional-summary prefix">
        </div>
        <p class="run-count">39 tests took 00:00:42.</p>
        <p class="filter">(Un)check the boxes to filter the results.</p>
        <div class="summary__reload">
          <div class="summary__reload__button hidden" onclick="location.reload()">
            <div>There are still tests running. <br />Reload this page to get the latest results!</div>
          </div>
        </div>
        <div class="summary__spacer"></div>
        <div class="controls">
          <div class="filters">
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="failed" />
            <span class="failed">20 Failed,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="passed" />
            <span class="passed">19 Passed,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="skipped" disabled/>
            <span class="skipped">0 Skipped,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="xfailed" disabled/>
            <span class="xfailed">0 Expected failures,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="xpassed" disabled/>
            <span class="xpassed">0 Unexpected passes,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="error" disabled/>
            <span class="error">0 Errors,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="rerun" disabled/>
            <span class="rerun">0 Reruns</span>
          </div>
          <div class="collapse">
            <button id="show_all_details">Show all details</button>&nbsp;/&nbsp;<button id="hide_all_details">Hide all details</button>
          </div>
        </div>
      </div>
      <div class="additional-summary summary">
      </div>
      <div class="additional-summary postfix">
      </div>
    </div>
    <table id="results-table">
      <thead id="results-table-head">
        <tr>
          <th class="sortable" data-column-type="result">Result</th>
          <th class="sortable" data-column-type="testId">Test</th>
          <th class="sortable" data-column-type="duration">Duration</th>
          <th>Links</th>
        </tr>
      </thead>
    </table>
  </body>
  <footer>
    <div id="data-container" data-jsonblob="{&#34;environment&#34;: {&#34;Python&#34;: &#34;3.13.2&#34;, &#34;Platform&#34;: &#34;Linux-6.8.0-90-generic-x86_64-with-glibc2.39&#34;, &#34;Packages&#34;: {&#34;pytest&#34;: &#34;8.4.2&#34;, &#34;pluggy&#34;: &#34;1.6.0&#34;}, &#34;Plugins&#34;: {&#34;html&#34;: &#34;4.1.1&#34;, &#34;bdd&#34;: &#34;8.1.0&#34;, &#34;metadata&#34;: &#34;3.1.1&#34;, &#34;asyncio&#34;: &#34;1.3.0&#34;, &#34;md-report&#34;: &#34;0.7.0&#34;, &#34;anyio&#34;: &#34;4.12.0&#34;}}, &#34;tests&#34;: {&#34;test_fixture.py::test_dummy_fixture&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;test_fixture.py::test_dummy_fixture&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_fixture.py::test_dummy_fixture&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;test_fixture.py::test_dummy_async_fixture&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;test_fixture.py::test_dummy_async_fixture&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_fixture.py::test_dummy_async_fixture&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;test_openapi.py::test_swagger_flow_service&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_openapi.py::test_swagger_flow_service&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_openapi.py::test_swagger_flow_service&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;def test_swagger_flow_service():\n        url = &amp;#x27;???&amp;#x27;\n&amp;gt;       _test_swagger(\n            url,\n            &amp;quot;docs/norme/XP_Z12-013_SWAGGER_Annexes_A_et_B_V1.2/ANNEXE A - PR XP Z12-013 - AFNOR-Flow_Service-1.1.0-swagger.json&amp;quot;,\n        )\n\ntest_openapi.py:20: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nurl = &amp;#x27;???&amp;#x27;, swagger = &amp;#x27;docs/norme/XP_Z12-013_SWAGGER_Annexes_A_et_B_V1.2/ANNEXE A - PR XP Z12-013 - AFNOR-Flow_Service-1.1.0-swagger.json&amp;#x27;\n\n    def _test_swagger(url: str, swagger: str):\n        &amp;quot;&amp;quot;&amp;quot;\n            V\u00e9rifier si une API respecte une definition Swagger/OpenAPI\n    \n        Cette API doit respecter le versioning indiqu\u00e9 dans l\u2019URL de la route API du Swagger. Dans un objectif de\n        simplification le versioning des routes n\u2019est pas affich\u00e9 dans le pr\u00e9sent document;\n        Dans cette API publi\u00e9e par le Fournisseur API ce dernier peut :\n        \u2022Avoir une URL sp\u00e9cifique en amont du versioning\n        \u2022Ajouter des propri\u00e9t\u00e9s aux objets dans les requ\u00eates.\n        \u2022Ajouter des param\u00e8tres aux routes dans les requ\u00eates.\n        \u2022Ajouter des propri\u00e9t\u00e9s aux objets dans les r\u00e9ponses.\n        \u2022Ajouter des codes erreurs dans les r\u00e9ponses.\n        &amp;quot;&amp;quot;&amp;quot;\n&amp;gt;       raise NotImplementedError(&amp;quot;swagger compliance non test\u00e9&amp;quot;)\nE       NotImplementedError: swagger compliance non test\u00e9\n\ntest_openapi.py:14: NotImplementedError\n&#34;}], &#34;test_openapi.py::test_swagger_directory_service&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_openapi.py::test_swagger_directory_service&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_openapi.py::test_swagger_directory_service&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;def test_swagger_directory_service():\n        url = &amp;quot;???&amp;quot;\n&amp;gt;       _test_swagger(\n            url,\n            &amp;quot;docs/norme/XP_Z12-013_SWAGGER_Annexes_A_et_B_V1.2/ANNEXE B - PR XP Z12-013 - AFNOR-Directory_Service-1.1.0-swagger.json&amp;quot;,\n        )\n\ntest_openapi.py:28: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nurl = &amp;#x27;???&amp;#x27;, swagger = &amp;#x27;docs/norme/XP_Z12-013_SWAGGER_Annexes_A_et_B_V1.2/ANNEXE B - PR XP Z12-013 - AFNOR-Directory_Service-1.1.0-swagger.json&amp;#x27;\n\n    def _test_swagger(url: str, swagger: str):\n        &amp;quot;&amp;quot;&amp;quot;\n            V\u00e9rifier si une API respecte une definition Swagger/OpenAPI\n    \n        Cette API doit respecter le versioning indiqu\u00e9 dans l\u2019URL de la route API du Swagger. Dans un objectif de\n        simplification le versioning des routes n\u2019est pas affich\u00e9 dans le pr\u00e9sent document;\n        Dans cette API publi\u00e9e par le Fournisseur API ce dernier peut :\n        \u2022Avoir une URL sp\u00e9cifique en amont du versioning\n        \u2022Ajouter des propri\u00e9t\u00e9s aux objets dans les requ\u00eates.\n        \u2022Ajouter des param\u00e8tres aux routes dans les requ\u00eates.\n        \u2022Ajouter des propri\u00e9t\u00e9s aux objets dans les r\u00e9ponses.\n        \u2022Ajouter des codes erreurs dans les r\u00e9ponses.\n        &amp;quot;&amp;quot;&amp;quot;\n&amp;gt;       raise NotImplementedError(&amp;quot;swagger compliance non test\u00e9&amp;quot;)\nE       NotImplementedError: swagger compliance non test\u00e9\n\ntest_openapi.py:14: NotImplementedError\n&#34;}], &#34;test_pac0.py::test_pac0_import_services&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_pac0.py::test_pac0_import_services&#34;, &#34;duration&#34;: &#34;6 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_pac0.py::test_pac0_import_services&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;6 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;+ Exception Group Traceback (most recent call last):\n  |   File &amp;quot;/home/philippe/src/PA_Communautaire/packages/pac-bdd/test_pac0.py&amp;quot;, line 17, in test_pac0_import_services\n  |     async with asyncio.TaskGroup() as tg:\n  |                ~~~~~~~~~~~~~~~~~^^\n  |   File &amp;quot;/home/philippe/.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/asyncio/taskgroups.py&amp;quot;, line 71, in __aexit__\n  |     return await self._aexit(et, exc)\n  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  |   File &amp;quot;/home/philippe/.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/asyncio/taskgroups.py&amp;quot;, line 173, in _aexit\n  |     raise BaseExceptionGroup(\n  |     ...&amp;lt;2 lines&amp;gt;...\n  |     ) from None\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Traceback (most recent call last):\n    |   File &amp;quot;/home/philippe/src/PA_Communautaire/packages/pac-bdd/test_pac0.py&amp;quot;, line 18, in test_pac0_import_services\n    |     task1 = tg.create_task(api_gateway_main.app.run())\n    |                            ^^^^^^^^^^^^^^^^^^^^^^^^\n    | AttributeError: &amp;#x27;FastAPI&amp;#x27; object has no attribute &amp;#x27;run&amp;#x27;\n    +------------------------------------\n&#34;}], &#34;test_scenario.py::test_trackingid_fourni&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_trackingid_fourni&#34;, &#34;duration&#34;: &#34;00:00:08&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_trackingid_fourni&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;00:00:08&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;@contextlib.contextmanager\n    def map_httpcore_exceptions() -&amp;gt; typing.Iterator[None]:\n        global HTTPCORE_EXC_MAP\n        if len(HTTPCORE_EXC_MAP) == 0:\n            HTTPCORE_EXC_MAP = _load_httpcore_exceptions()\n        try:\n&amp;gt;           yield\n\n.venv/lib/python3.13/site-packages/httpx/_transports/default.py:101: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv/lib/python3.13/site-packages/httpx/_transports/default.py:250: in handle_request\n    resp = self._pool.handle_request(req)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpcore/_sync/connection_pool.py:256: in handle_request\n    raise exc from None\n.venv/lib/python3.13/site-packages/httpcore/_sync/connection_pool.py:236: in handle_request\n    response = connection.handle_request(\n.venv/lib/python3.13/site-packages/httpcore/_sync/connection.py:103: in handle_request\n    return self._connection.handle_request(request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpcore/_sync/http11.py:136: in handle_request\n    raise exc\n.venv/lib/python3.13/site-packages/httpcore/_sync/http11.py:106: in handle_request\n    ) = self._receive_response_headers(**kwargs)\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpcore/_sync/http11.py:177: in _receive_response_headers\n    event = self._receive_event(timeout=timeout)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpcore/_sync/http11.py:217: in _receive_event\n    data = self._network_stream.read(\n.venv/lib/python3.13/site-packages/httpcore/_backends/sync.py:126: in read\n    with map_exceptions(exc_map):\n         ^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/contextlib.py:162: in __exit__\n    self.gen.throw(value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nmap = {&amp;lt;class &amp;#x27;TimeoutError&amp;#x27;&amp;gt;: &amp;lt;class &amp;#x27;httpcore.ReadTimeout&amp;#x27;&amp;gt;, &amp;lt;class &amp;#x27;OSError&amp;#x27;&amp;gt;: &amp;lt;class &amp;#x27;httpcore.ReadError&amp;#x27;&amp;gt;}\n\n    @contextlib.contextmanager\n    def map_exceptions(map: ExceptionMapping) -&amp;gt; typing.Iterator[None]:\n        try:\n            yield\n        except Exception as exc:  # noqa: PIE786\n            for from_exc, to_exc in map.items():\n                if isinstance(exc, from_exc):\n&amp;gt;                   raise to_exc(exc) from exc\nE                   httpcore.ReadTimeout: timed out\n\n.venv/lib/python3.13/site-packages/httpcore/_exceptions.py:14: ReadTimeout\n\nThe above exception was the direct cause of the following exception:\n\nfixturefunc = &amp;lt;function api_call at 0x7fe79fa647c0&amp;gt;, request = &amp;lt;FixtureRequest for &amp;lt;Function test_trackingid_fourni&amp;gt;&amp;gt;\nkwargs = {&amp;#x27;path&amp;#x27;: &amp;#x27;/flows&amp;#x27;, &amp;#x27;verb&amp;#x27;: &amp;#x27;POST&amp;#x27;, &amp;#x27;world1pac&amp;#x27;: &amp;lt;pac0.shared.test.fixture.WorldContext object at 0x7fe79f9ac050&amp;gt;}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -&amp;gt; FixtureValue:\n        if inspect.isgeneratorfunction(fixturefunc):\n            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f&amp;quot;{request.fixturename} did not yield a value&amp;quot;) from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n&amp;gt;           fixture_result = fixturefunc(**kwargs)\n                             ^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nsrc/pac_bdd/api.py:33: in api_call\n    response = httpx.get(world1pac.pac1.api_base_url)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpx/_api.py:195: in get\n    return request(\n.venv/lib/python3.13/site-packages/httpx/_api.py:109: in request\n    return client.request(\n.venv/lib/python3.13/site-packages/httpx/_client.py:825: in request\n    return self.send(request, auth=auth, follow_redirects=follow_redirects)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpx/_client.py:914: in send\n    response = self._send_handling_auth(\n.venv/lib/python3.13/site-packages/httpx/_client.py:942: in _send_handling_auth\n    response = self._send_handling_redirects(\n.venv/lib/python3.13/site-packages/httpx/_client.py:979: in _send_handling_redirects\n    response = self._send_single_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpx/_client.py:1014: in _send_single_request\n    response = transport.handle_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpx/_transports/default.py:249: in handle_request\n    with map_httpcore_exceptions():\n         ^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/contextlib.py:162: in __exit__\n    self.gen.throw(value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\n    @contextlib.contextmanager\n    def map_httpcore_exceptions() -&amp;gt; typing.Iterator[None]:\n        global HTTPCORE_EXC_MAP\n        if len(HTTPCORE_EXC_MAP) == 0:\n            HTTPCORE_EXC_MAP = _load_httpcore_exceptions()\n        try:\n            yield\n        except Exception as exc:\n            mapped_exc = None\n    \n            for from_exc, to_exc in HTTPCORE_EXC_MAP.items():\n                if not isinstance(exc, from_exc):\n                    continue\n                # We want to map to the most specific exception we can find.\n                # Eg if `exc` is an `httpcore.ReadTimeout`, we want to map to\n                # `httpx.ReadTimeout`, not just `httpx.TimeoutException`.\n                if mapped_exc is None or issubclass(to_exc, mapped_exc):\n                    mapped_exc = to_exc\n    \n            if mapped_exc is None:  # pragma: no cover\n                raise\n    \n            message = str(exc)\n&amp;gt;           raise mapped_exc(message) from exc\nE           httpx.ReadTimeout: timed out\n\n.venv/lib/python3.13/site-packages/httpx/_transports/default.py:118: ReadTimeout\n\n----------------------------- Captured stdout call -----------------------------\n2026-01-08 20:08:24,139 INFO     - *    |            - `Subscriber` waiting for messages\n2026-01-08 20:08:24,245 INFO     - *    |            - `Subscriber` waiting for messages\n2026-01-08 20:08:24,246 INFO     - controle-formats-IN |            - `Process` waiting for messages\n2026-01-08 20:08:24,246 INFO     - test |            - `BaseHandler` waiting for messages\n2026-01-08 20:08:24,247 INFO     - test2 |            - `Handle` waiting for messages\n2026-01-08 20:08:24,248 INFO     - conversion-formats-OUT |            - `Process05To06` waiting for messages\n2026-01-08 20:08:24,249 INFO     - transmission-fiscale-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:24,249 INFO     - validation-metier-OUT |            - `Process04To05` waiting for messages\n2026-01-08 20:08:24,250 INFO     - controle-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:24,251 INFO     - validation-metier-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:24,251 INFO     - routage-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:24,252 INFO     - api-gateway-OUT |            - `Process01To03` waiting for messages\n2026-01-08 20:08:24,252 INFO     - routage-OUT |            - `Process07To08` waiting for messages\n2026-01-08 20:08:24,253 INFO     - api-gateway-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:24,254 INFO     - annuaire-local-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:24,254 INFO     - conversion-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:24,255 INFO     - annuaire-local-OUT |            - `Process06To07` waiting for messages\n2026-01-08 20:08:24,255 INFO     - esb-central-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:24,256 INFO     - controle-formats-OUT |            - `Process03To04` waiting for messages\n2026-01-08 20:08:24,257 INFO     - routage-IN |            - `Process` waiting for messages\n2026-01-08 20:08:24,257 INFO     - *    |            - `Subscriber` waiting for messages\n2026-01-08 20:08:24,258 INFO     - controle-formats-IN |            - `Process` waiting for messages\n2026-01-08 20:08:24,258 INFO     - test |            - `BaseHandler` waiting for messages\n2026-01-08 20:08:24,259 INFO     - test2 |            - `Handle` waiting for messages\n2026-01-08 20:08:24,259 INFO     - conversion-formats-OUT |            - `Process05To06` waiting for messages\n2026-01-08 20:08:24,260 INFO     - transmission-fiscale-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:24,261 INFO     - validation-metier-OUT |            - `Process04To05` waiting for messages\n2026-01-08 20:08:24,261 INFO     - controle-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:24,262 INFO     - validation-metier-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:24,263 INFO     - routage-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:24,263 INFO     - api-gateway-OUT |            - `Process01To03` waiting for messages\n2026-01-08 20:08:24,264 INFO     - routage-OUT |            - `Process07To08` waiting for messages\n2026-01-08 20:08:24,265 INFO     - api-gateway-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:24,265 INFO     - annuaire-local-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:24,266 INFO     - conversion-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:24,267 INFO     - annuaire-local-OUT |            - `Process06To07` waiting for messages\n2026-01-08 20:08:24,267 INFO     - esb-central-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:24,268 INFO     - controle-formats-OUT |            - `Process03To04` waiting for messages\n2026-01-08 20:08:24,269 INFO     - routage-IN |            - `Process` waiting for messages\n2026-01-08 20:08:24,269 INFO     - *    |            - `Subscriber` waiting for messages\n2026-01-08 20:08:24,269 INFO     - controle-formats-IN |            - `Process` waiting for messages\n2026-01-08 20:08:24,270 INFO     - test |            - `BaseHandler` waiting for messages\n2026-01-08 20:08:24,271 INFO     - test2 |            - `Handle` waiting for messages\n2026-01-08 20:08:24,271 INFO     - conversion-formats-OUT |            - `Process05To06` waiting for messages\n2026-01-08 20:08:24,272 INFO     - transmission-fiscale-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:24,272 INFO     - validation-metier-OUT |            - `Process04To05` waiting for messages\n2026-01-08 20:08:24,273 INFO     - controle-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:24,273 INFO     - validation-metier-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:24,274 INFO     - routage-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:24,275 INFO     - api-gateway-OUT |            - `Process01To03` waiting for messages\n2026-01-08 20:08:24,275 INFO     - routage-OUT |            - `Process07To08` waiting for messages\n2026-01-08 20:08:24,276 INFO     - api-gateway-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:24,276 INFO     - annuaire-local-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:24,277 INFO     - conversion-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:24,278 INFO     - annuaire-local-OUT |            - `Process06To07` waiting for messages\n2026-01-08 20:08:24,278 INFO     - esb-central-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:24,279 INFO     - controle-formats-OUT |            - `Process03To04` waiting for messages\n2026-01-08 20:08:24,279 INFO     - routage-IN |            - `Process` waiting for messages\n\n----------------------------- Captured stderr call -----------------------------\nINFO:     Started server process [84508]\nINFO:     Waiting for application startup.\nINFO:     Application startup complete.\nINFO:     Uvicorn running on http://127.0.0.1:8290 (Press CTRL+C to quit)\n2026-01-08 20:08:24,244 INFO     - FastStream app starting...\n2026-01-08 20:08:24,257 INFO     - FastStream app started successfully! To exit, press CTRL+C\n2026-01-08 20:08:24,257 INFO     - FastStream app starting...\n2026-01-08 20:08:24,269 INFO     - FastStream app started successfully! To exit, press CTRL+C\n2026-01-08 20:08:24,269 INFO     - FastStream app starting...\n2026-01-08 20:08:24,279 INFO     - FastStream app started successfully! To exit, press CTRL+C\n--------------------------- Captured stdout teardown ---------------------------\nINFO:     127.0.0.1:52602 - &amp;quot;GET / HTTP/1.1&amp;quot; 200 OK\n\n--------------------------- Captured stderr teardown ---------------------------\nINFO:     Shutting down\nINFO:     Waiting for application shutdown.\nINFO:     Application shutdown complete.\nINFO:     Finished server process [84508]\n&#34;}], &#34;test_scenario.py::test_trackingid_absent&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_trackingid_absent&#34;, &#34;duration&#34;: &#34;00:00:08&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_trackingid_absent&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;00:00:08&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;@contextlib.contextmanager\n    def map_httpcore_exceptions() -&amp;gt; typing.Iterator[None]:\n        global HTTPCORE_EXC_MAP\n        if len(HTTPCORE_EXC_MAP) == 0:\n            HTTPCORE_EXC_MAP = _load_httpcore_exceptions()\n        try:\n&amp;gt;           yield\n\n.venv/lib/python3.13/site-packages/httpx/_transports/default.py:101: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv/lib/python3.13/site-packages/httpx/_transports/default.py:250: in handle_request\n    resp = self._pool.handle_request(req)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpcore/_sync/connection_pool.py:256: in handle_request\n    raise exc from None\n.venv/lib/python3.13/site-packages/httpcore/_sync/connection_pool.py:236: in handle_request\n    response = connection.handle_request(\n.venv/lib/python3.13/site-packages/httpcore/_sync/connection.py:103: in handle_request\n    return self._connection.handle_request(request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpcore/_sync/http11.py:136: in handle_request\n    raise exc\n.venv/lib/python3.13/site-packages/httpcore/_sync/http11.py:106: in handle_request\n    ) = self._receive_response_headers(**kwargs)\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpcore/_sync/http11.py:177: in _receive_response_headers\n    event = self._receive_event(timeout=timeout)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpcore/_sync/http11.py:217: in _receive_event\n    data = self._network_stream.read(\n.venv/lib/python3.13/site-packages/httpcore/_backends/sync.py:126: in read\n    with map_exceptions(exc_map):\n         ^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/contextlib.py:162: in __exit__\n    self.gen.throw(value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nmap = {&amp;lt;class &amp;#x27;TimeoutError&amp;#x27;&amp;gt;: &amp;lt;class &amp;#x27;httpcore.ReadTimeout&amp;#x27;&amp;gt;, &amp;lt;class &amp;#x27;OSError&amp;#x27;&amp;gt;: &amp;lt;class &amp;#x27;httpcore.ReadError&amp;#x27;&amp;gt;}\n\n    @contextlib.contextmanager\n    def map_exceptions(map: ExceptionMapping) -&amp;gt; typing.Iterator[None]:\n        try:\n            yield\n        except Exception as exc:  # noqa: PIE786\n            for from_exc, to_exc in map.items():\n                if isinstance(exc, from_exc):\n&amp;gt;                   raise to_exc(exc) from exc\nE                   httpcore.ReadTimeout: timed out\n\n.venv/lib/python3.13/site-packages/httpcore/_exceptions.py:14: ReadTimeout\n\nThe above exception was the direct cause of the following exception:\n\nfixturefunc = &amp;lt;function api_call at 0x7fe79fa647c0&amp;gt;, request = &amp;lt;FixtureRequest for &amp;lt;Function test_trackingid_absent&amp;gt;&amp;gt;\nkwargs = {&amp;#x27;path&amp;#x27;: &amp;#x27;/flows&amp;#x27;, &amp;#x27;verb&amp;#x27;: &amp;#x27;POST&amp;#x27;, &amp;#x27;world1pac&amp;#x27;: &amp;lt;pac0.shared.test.fixture.WorldContext object at 0x7fe79f9b7250&amp;gt;}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -&amp;gt; FixtureValue:\n        if inspect.isgeneratorfunction(fixturefunc):\n            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f&amp;quot;{request.fixturename} did not yield a value&amp;quot;) from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n&amp;gt;           fixture_result = fixturefunc(**kwargs)\n                             ^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nsrc/pac_bdd/api.py:33: in api_call\n    response = httpx.get(world1pac.pac1.api_base_url)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpx/_api.py:195: in get\n    return request(\n.venv/lib/python3.13/site-packages/httpx/_api.py:109: in request\n    return client.request(\n.venv/lib/python3.13/site-packages/httpx/_client.py:825: in request\n    return self.send(request, auth=auth, follow_redirects=follow_redirects)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpx/_client.py:914: in send\n    response = self._send_handling_auth(\n.venv/lib/python3.13/site-packages/httpx/_client.py:942: in _send_handling_auth\n    response = self._send_handling_redirects(\n.venv/lib/python3.13/site-packages/httpx/_client.py:979: in _send_handling_redirects\n    response = self._send_single_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpx/_client.py:1014: in _send_single_request\n    response = transport.handle_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpx/_transports/default.py:249: in handle_request\n    with map_httpcore_exceptions():\n         ^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/contextlib.py:162: in __exit__\n    self.gen.throw(value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\n    @contextlib.contextmanager\n    def map_httpcore_exceptions() -&amp;gt; typing.Iterator[None]:\n        global HTTPCORE_EXC_MAP\n        if len(HTTPCORE_EXC_MAP) == 0:\n            HTTPCORE_EXC_MAP = _load_httpcore_exceptions()\n        try:\n            yield\n        except Exception as exc:\n            mapped_exc = None\n    \n            for from_exc, to_exc in HTTPCORE_EXC_MAP.items():\n                if not isinstance(exc, from_exc):\n                    continue\n                # We want to map to the most specific exception we can find.\n                # Eg if `exc` is an `httpcore.ReadTimeout`, we want to map to\n                # `httpx.ReadTimeout`, not just `httpx.TimeoutException`.\n                if mapped_exc is None or issubclass(to_exc, mapped_exc):\n                    mapped_exc = to_exc\n    \n            if mapped_exc is None:  # pragma: no cover\n                raise\n    \n            message = str(exc)\n&amp;gt;           raise mapped_exc(message) from exc\nE           httpx.ReadTimeout: timed out\n\n.venv/lib/python3.13/site-packages/httpx/_transports/default.py:118: ReadTimeout\n\n----------------------------- Captured stdout call -----------------------------\n2026-01-08 20:08:32,696 INFO     - *    |            - `Subscriber` waiting for messages\n2026-01-08 20:08:32,801 INFO     - *    |            - `Subscriber` waiting for messages\n2026-01-08 20:08:32,802 INFO     - controle-formats-IN |            - `Process` waiting for messages\n2026-01-08 20:08:32,803 INFO     - test |            - `BaseHandler` waiting for messages\n2026-01-08 20:08:32,803 INFO     - test2 |            - `Handle` waiting for messages\n2026-01-08 20:08:32,804 INFO     - conversion-formats-OUT |            - `Process05To06` waiting for messages\n2026-01-08 20:08:32,805 INFO     - transmission-fiscale-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:32,805 INFO     - validation-metier-OUT |            - `Process04To05` waiting for messages\n2026-01-08 20:08:32,806 INFO     - controle-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:32,806 INFO     - validation-metier-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:32,807 INFO     - routage-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:32,808 INFO     - api-gateway-OUT |            - `Process01To03` waiting for messages\n2026-01-08 20:08:32,808 INFO     - routage-OUT |            - `Process07To08` waiting for messages\n2026-01-08 20:08:32,809 INFO     - api-gateway-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:32,810 INFO     - annuaire-local-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:32,811 INFO     - conversion-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:32,811 INFO     - annuaire-local-OUT |            - `Process06To07` waiting for messages\n2026-01-08 20:08:32,812 INFO     - esb-central-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:32,813 INFO     - controle-formats-OUT |            - `Process03To04` waiting for messages\n2026-01-08 20:08:32,813 INFO     - routage-IN |            - `Process` waiting for messages\n2026-01-08 20:08:32,814 INFO     - *    |            - `Subscriber` waiting for messages\n2026-01-08 20:08:32,814 INFO     - controle-formats-IN |            - `Process` waiting for messages\n2026-01-08 20:08:32,815 INFO     - test |            - `BaseHandler` waiting for messages\n2026-01-08 20:08:32,815 INFO     - test2 |            - `Handle` waiting for messages\n2026-01-08 20:08:32,817 INFO     - conversion-formats-OUT |            - `Process05To06` waiting for messages\n2026-01-08 20:08:32,818 INFO     - transmission-fiscale-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:32,818 INFO     - validation-metier-OUT |            - `Process04To05` waiting for messages\n2026-01-08 20:08:32,819 INFO     - controle-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:32,820 INFO     - validation-metier-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:32,820 INFO     - routage-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:32,821 INFO     - api-gateway-OUT |            - `Process01To03` waiting for messages\n2026-01-08 20:08:32,821 INFO     - routage-OUT |            - `Process07To08` waiting for messages\n2026-01-08 20:08:32,822 INFO     - api-gateway-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:32,822 INFO     - annuaire-local-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:32,823 INFO     - conversion-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:32,823 INFO     - annuaire-local-OUT |            - `Process06To07` waiting for messages\n2026-01-08 20:08:32,824 INFO     - esb-central-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:32,825 INFO     - controle-formats-OUT |            - `Process03To04` waiting for messages\n2026-01-08 20:08:32,825 INFO     - routage-IN |            - `Process` waiting for messages\n2026-01-08 20:08:32,826 INFO     - *    |            - `Subscriber` waiting for messages\n2026-01-08 20:08:32,826 INFO     - controle-formats-IN |            - `Process` waiting for messages\n2026-01-08 20:08:32,827 INFO     - test |            - `BaseHandler` waiting for messages\n2026-01-08 20:08:32,827 INFO     - test2 |            - `Handle` waiting for messages\n2026-01-08 20:08:32,828 INFO     - conversion-formats-OUT |            - `Process05To06` waiting for messages\n2026-01-08 20:08:32,828 INFO     - transmission-fiscale-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:32,829 INFO     - validation-metier-OUT |            - `Process04To05` waiting for messages\n2026-01-08 20:08:32,829 INFO     - controle-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:32,830 INFO     - validation-metier-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:32,830 INFO     - routage-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:32,831 INFO     - api-gateway-OUT |            - `Process01To03` waiting for messages\n2026-01-08 20:08:32,831 INFO     - routage-OUT |            - `Process07To08` waiting for messages\n2026-01-08 20:08:32,832 INFO     - api-gateway-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:32,833 INFO     - annuaire-local-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:32,833 INFO     - conversion-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:32,834 INFO     - annuaire-local-OUT |            - `Process06To07` waiting for messages\n2026-01-08 20:08:32,834 INFO     - esb-central-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:32,835 INFO     - controle-formats-OUT |            - `Process03To04` waiting for messages\n2026-01-08 20:08:32,836 INFO     - routage-IN |            - `Process` waiting for messages\n\n----------------------------- Captured stderr call -----------------------------\nINFO:     Started server process [84508]\nINFO:     Waiting for application startup.\nINFO:     Application startup complete.\nINFO:     Uvicorn running on http://127.0.0.1:8206 (Press CTRL+C to quit)\n2026-01-08 20:08:32,800 INFO     - FastStream app starting...\n2026-01-08 20:08:32,813 INFO     - FastStream app started successfully! To exit, press CTRL+C\n2026-01-08 20:08:32,813 INFO     - FastStream app starting...\n2026-01-08 20:08:32,825 INFO     - FastStream app started successfully! To exit, press CTRL+C\n2026-01-08 20:08:32,825 INFO     - FastStream app starting...\n2026-01-08 20:08:32,836 INFO     - FastStream app started successfully! To exit, press CTRL+C\n--------------------------- Captured stdout teardown ---------------------------\nINFO:     127.0.0.1:35340 - &amp;quot;GET / HTTP/1.1&amp;quot; 200 OK\n\n--------------------------- Captured stderr teardown ---------------------------\nINFO:     Shutting down\nINFO:     Waiting for application shutdown.\nINFO:     Application shutdown complete.\nINFO:     Finished server process [84508]\n&#34;}], &#34;test_scenario.py::test_trackingid_doublon&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_trackingid_doublon&#34;, &#34;duration&#34;: &#34;00:00:08&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_trackingid_doublon&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;00:00:08&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;@contextlib.contextmanager\n    def map_httpcore_exceptions() -&amp;gt; typing.Iterator[None]:\n        global HTTPCORE_EXC_MAP\n        if len(HTTPCORE_EXC_MAP) == 0:\n            HTTPCORE_EXC_MAP = _load_httpcore_exceptions()\n        try:\n&amp;gt;           yield\n\n.venv/lib/python3.13/site-packages/httpx/_transports/default.py:101: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv/lib/python3.13/site-packages/httpx/_transports/default.py:250: in handle_request\n    resp = self._pool.handle_request(req)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpcore/_sync/connection_pool.py:256: in handle_request\n    raise exc from None\n.venv/lib/python3.13/site-packages/httpcore/_sync/connection_pool.py:236: in handle_request\n    response = connection.handle_request(\n.venv/lib/python3.13/site-packages/httpcore/_sync/connection.py:103: in handle_request\n    return self._connection.handle_request(request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpcore/_sync/http11.py:136: in handle_request\n    raise exc\n.venv/lib/python3.13/site-packages/httpcore/_sync/http11.py:106: in handle_request\n    ) = self._receive_response_headers(**kwargs)\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpcore/_sync/http11.py:177: in _receive_response_headers\n    event = self._receive_event(timeout=timeout)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpcore/_sync/http11.py:217: in _receive_event\n    data = self._network_stream.read(\n.venv/lib/python3.13/site-packages/httpcore/_backends/sync.py:126: in read\n    with map_exceptions(exc_map):\n         ^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/contextlib.py:162: in __exit__\n    self.gen.throw(value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nmap = {&amp;lt;class &amp;#x27;TimeoutError&amp;#x27;&amp;gt;: &amp;lt;class &amp;#x27;httpcore.ReadTimeout&amp;#x27;&amp;gt;, &amp;lt;class &amp;#x27;OSError&amp;#x27;&amp;gt;: &amp;lt;class &amp;#x27;httpcore.ReadError&amp;#x27;&amp;gt;}\n\n    @contextlib.contextmanager\n    def map_exceptions(map: ExceptionMapping) -&amp;gt; typing.Iterator[None]:\n        try:\n            yield\n        except Exception as exc:  # noqa: PIE786\n            for from_exc, to_exc in map.items():\n                if isinstance(exc, from_exc):\n&amp;gt;                   raise to_exc(exc) from exc\nE                   httpcore.ReadTimeout: timed out\n\n.venv/lib/python3.13/site-packages/httpcore/_exceptions.py:14: ReadTimeout\n\nThe above exception was the direct cause of the following exception:\n\nfixturefunc = &amp;lt;function api_call at 0x7fe79fa647c0&amp;gt;, request = &amp;lt;FixtureRequest for &amp;lt;Function test_trackingid_doublon&amp;gt;&amp;gt;\nkwargs = {&amp;#x27;path&amp;#x27;: &amp;#x27;/flows&amp;#x27;, &amp;#x27;verb&amp;#x27;: &amp;#x27;POST&amp;#x27;, &amp;#x27;world1pac&amp;#x27;: &amp;lt;pac0.shared.test.fixture.WorldContext object at 0x7fe79f96f110&amp;gt;}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -&amp;gt; FixtureValue:\n        if inspect.isgeneratorfunction(fixturefunc):\n            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f&amp;quot;{request.fixturename} did not yield a value&amp;quot;) from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n&amp;gt;           fixture_result = fixturefunc(**kwargs)\n                             ^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nsrc/pac_bdd/api.py:33: in api_call\n    response = httpx.get(world1pac.pac1.api_base_url)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpx/_api.py:195: in get\n    return request(\n.venv/lib/python3.13/site-packages/httpx/_api.py:109: in request\n    return client.request(\n.venv/lib/python3.13/site-packages/httpx/_client.py:825: in request\n    return self.send(request, auth=auth, follow_redirects=follow_redirects)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpx/_client.py:914: in send\n    response = self._send_handling_auth(\n.venv/lib/python3.13/site-packages/httpx/_client.py:942: in _send_handling_auth\n    response = self._send_handling_redirects(\n.venv/lib/python3.13/site-packages/httpx/_client.py:979: in _send_handling_redirects\n    response = self._send_single_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpx/_client.py:1014: in _send_single_request\n    response = transport.handle_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpx/_transports/default.py:249: in handle_request\n    with map_httpcore_exceptions():\n         ^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/contextlib.py:162: in __exit__\n    self.gen.throw(value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\n    @contextlib.contextmanager\n    def map_httpcore_exceptions() -&amp;gt; typing.Iterator[None]:\n        global HTTPCORE_EXC_MAP\n        if len(HTTPCORE_EXC_MAP) == 0:\n            HTTPCORE_EXC_MAP = _load_httpcore_exceptions()\n        try:\n            yield\n        except Exception as exc:\n            mapped_exc = None\n    \n            for from_exc, to_exc in HTTPCORE_EXC_MAP.items():\n                if not isinstance(exc, from_exc):\n                    continue\n                # We want to map to the most specific exception we can find.\n                # Eg if `exc` is an `httpcore.ReadTimeout`, we want to map to\n                # `httpx.ReadTimeout`, not just `httpx.TimeoutException`.\n                if mapped_exc is None or issubclass(to_exc, mapped_exc):\n                    mapped_exc = to_exc\n    \n            if mapped_exc is None:  # pragma: no cover\n                raise\n    \n            message = str(exc)\n&amp;gt;           raise mapped_exc(message) from exc\nE           httpx.ReadTimeout: timed out\n\n.venv/lib/python3.13/site-packages/httpx/_transports/default.py:118: ReadTimeout\n\n----------------------------- Captured stdout call -----------------------------\n2026-01-08 20:08:41,201 INFO     - *    |            - `Subscriber` waiting for messages\n2026-01-08 20:08:41,306 INFO     - *    |            - `Subscriber` waiting for messages\n2026-01-08 20:08:41,308 INFO     - controle-formats-IN |            - `Process` waiting for messages\n2026-01-08 20:08:41,309 INFO     - test |            - `BaseHandler` waiting for messages\n2026-01-08 20:08:41,310 INFO     - test2 |            - `Handle` waiting for messages\n2026-01-08 20:08:41,311 INFO     - conversion-formats-OUT |            - `Process05To06` waiting for messages\n2026-01-08 20:08:41,312 INFO     - transmission-fiscale-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:41,313 INFO     - validation-metier-OUT |            - `Process04To05` waiting for messages\n2026-01-08 20:08:41,314 INFO     - controle-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:41,315 INFO     - validation-metier-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:41,316 INFO     - routage-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:41,317 INFO     - api-gateway-OUT |            - `Process01To03` waiting for messages\n2026-01-08 20:08:41,318 INFO     - routage-OUT |            - `Process07To08` waiting for messages\n2026-01-08 20:08:41,320 INFO     - api-gateway-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:41,321 INFO     - annuaire-local-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:41,322 INFO     - conversion-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:41,323 INFO     - annuaire-local-OUT |            - `Process06To07` waiting for messages\n2026-01-08 20:08:41,324 INFO     - esb-central-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:41,326 INFO     - controle-formats-OUT |            - `Process03To04` waiting for messages\n2026-01-08 20:08:41,327 INFO     - routage-IN |            - `Process` waiting for messages\n2026-01-08 20:08:41,327 INFO     - *    |            - `Subscriber` waiting for messages\n2026-01-08 20:08:41,328 INFO     - controle-formats-IN |            - `Process` waiting for messages\n2026-01-08 20:08:41,329 INFO     - test |            - `BaseHandler` waiting for messages\n2026-01-08 20:08:41,330 INFO     - test2 |            - `Handle` waiting for messages\n2026-01-08 20:08:41,331 INFO     - conversion-formats-OUT |            - `Process05To06` waiting for messages\n2026-01-08 20:08:41,332 INFO     - transmission-fiscale-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:41,333 INFO     - validation-metier-OUT |            - `Process04To05` waiting for messages\n2026-01-08 20:08:41,333 INFO     - controle-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:41,334 INFO     - validation-metier-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:41,335 INFO     - routage-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:41,336 INFO     - api-gateway-OUT |            - `Process01To03` waiting for messages\n2026-01-08 20:08:41,337 INFO     - routage-OUT |            - `Process07To08` waiting for messages\n2026-01-08 20:08:41,337 INFO     - api-gateway-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:41,338 INFO     - annuaire-local-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:41,339 INFO     - conversion-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:41,340 INFO     - annuaire-local-OUT |            - `Process06To07` waiting for messages\n2026-01-08 20:08:41,341 INFO     - esb-central-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:41,342 INFO     - controle-formats-OUT |            - `Process03To04` waiting for messages\n2026-01-08 20:08:41,343 INFO     - routage-IN |            - `Process` waiting for messages\n2026-01-08 20:08:41,343 INFO     - *    |            - `Subscriber` waiting for messages\n2026-01-08 20:08:41,344 INFO     - controle-formats-IN |            - `Process` waiting for messages\n2026-01-08 20:08:41,345 INFO     - test |            - `BaseHandler` waiting for messages\n2026-01-08 20:08:41,345 INFO     - test2 |            - `Handle` waiting for messages\n2026-01-08 20:08:41,346 INFO     - conversion-formats-OUT |            - `Process05To06` waiting for messages\n2026-01-08 20:08:41,347 INFO     - transmission-fiscale-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:41,348 INFO     - validation-metier-OUT |            - `Process04To05` waiting for messages\n2026-01-08 20:08:41,349 INFO     - controle-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:41,349 INFO     - validation-metier-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:41,350 INFO     - routage-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:41,351 INFO     - api-gateway-OUT |            - `Process01To03` waiting for messages\n2026-01-08 20:08:41,352 INFO     - routage-OUT |            - `Process07To08` waiting for messages\n2026-01-08 20:08:41,353 INFO     - api-gateway-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:41,354 INFO     - annuaire-local-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:41,354 INFO     - conversion-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:41,355 INFO     - annuaire-local-OUT |            - `Process06To07` waiting for messages\n2026-01-08 20:08:41,356 INFO     - esb-central-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:41,357 INFO     - controle-formats-OUT |            - `Process03To04` waiting for messages\n2026-01-08 20:08:41,358 INFO     - routage-IN |            - `Process` waiting for messages\n\n----------------------------- Captured stderr call -----------------------------\nINFO:     Started server process [84508]\nINFO:     Waiting for application startup.\nINFO:     Application startup complete.\nINFO:     Uvicorn running on http://127.0.0.1:8221 (Press CTRL+C to quit)\n2026-01-08 20:08:41,306 INFO     - FastStream app starting...\n2026-01-08 20:08:41,327 INFO     - FastStream app started successfully! To exit, press CTRL+C\n2026-01-08 20:08:41,327 INFO     - FastStream app starting...\n2026-01-08 20:08:41,343 INFO     - FastStream app started successfully! To exit, press CTRL+C\n2026-01-08 20:08:41,343 INFO     - FastStream app starting...\n2026-01-08 20:08:41,358 INFO     - FastStream app started successfully! To exit, press CTRL+C\n--------------------------- Captured stdout teardown ---------------------------\nINFO:     127.0.0.1:39300 - &amp;quot;GET / HTTP/1.1&amp;quot; 200 OK\n\n--------------------------- Captured stderr teardown ---------------------------\nINFO:     Shutting down\nINFO:     Waiting for application shutdown.\nINFO:     Application shutdown complete.\nINFO:     Finished server process [84508]\n&#34;}], &#34;test_scenario.py::test_contr\u00f4le_sha256&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_contr\u00f4le_sha256&#34;, &#34;duration&#34;: &#34;00:00:08&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_contr\u00f4le_sha256&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;00:00:08&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;@contextlib.contextmanager\n    def map_httpcore_exceptions() -&amp;gt; typing.Iterator[None]:\n        global HTTPCORE_EXC_MAP\n        if len(HTTPCORE_EXC_MAP) == 0:\n            HTTPCORE_EXC_MAP = _load_httpcore_exceptions()\n        try:\n&amp;gt;           yield\n\n.venv/lib/python3.13/site-packages/httpx/_transports/default.py:101: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv/lib/python3.13/site-packages/httpx/_transports/default.py:250: in handle_request\n    resp = self._pool.handle_request(req)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpcore/_sync/connection_pool.py:256: in handle_request\n    raise exc from None\n.venv/lib/python3.13/site-packages/httpcore/_sync/connection_pool.py:236: in handle_request\n    response = connection.handle_request(\n.venv/lib/python3.13/site-packages/httpcore/_sync/connection.py:103: in handle_request\n    return self._connection.handle_request(request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpcore/_sync/http11.py:136: in handle_request\n    raise exc\n.venv/lib/python3.13/site-packages/httpcore/_sync/http11.py:106: in handle_request\n    ) = self._receive_response_headers(**kwargs)\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpcore/_sync/http11.py:177: in _receive_response_headers\n    event = self._receive_event(timeout=timeout)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpcore/_sync/http11.py:217: in _receive_event\n    data = self._network_stream.read(\n.venv/lib/python3.13/site-packages/httpcore/_backends/sync.py:126: in read\n    with map_exceptions(exc_map):\n         ^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/contextlib.py:162: in __exit__\n    self.gen.throw(value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nmap = {&amp;lt;class &amp;#x27;TimeoutError&amp;#x27;&amp;gt;: &amp;lt;class &amp;#x27;httpcore.ReadTimeout&amp;#x27;&amp;gt;, &amp;lt;class &amp;#x27;OSError&amp;#x27;&amp;gt;: &amp;lt;class &amp;#x27;httpcore.ReadError&amp;#x27;&amp;gt;}\n\n    @contextlib.contextmanager\n    def map_exceptions(map: ExceptionMapping) -&amp;gt; typing.Iterator[None]:\n        try:\n            yield\n        except Exception as exc:  # noqa: PIE786\n            for from_exc, to_exc in map.items():\n                if isinstance(exc, from_exc):\n&amp;gt;                   raise to_exc(exc) from exc\nE                   httpcore.ReadTimeout: timed out\n\n.venv/lib/python3.13/site-packages/httpcore/_exceptions.py:14: ReadTimeout\n\nThe above exception was the direct cause of the following exception:\n\nfixturefunc = &amp;lt;function api_call at 0x7fe79fa647c0&amp;gt;, request = &amp;lt;FixtureRequest for &amp;lt;Function test_contr\u00f4le_sha256&amp;gt;&amp;gt;\nkwargs = {&amp;#x27;path&amp;#x27;: &amp;#x27;/flows&amp;#x27;, &amp;#x27;verb&amp;#x27;: &amp;#x27;POST&amp;#x27;, &amp;#x27;world1pac&amp;#x27;: &amp;lt;pac0.shared.test.fixture.WorldContext object at 0x7fe79efe5f30&amp;gt;}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -&amp;gt; FixtureValue:\n        if inspect.isgeneratorfunction(fixturefunc):\n            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f&amp;quot;{request.fixturename} did not yield a value&amp;quot;) from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n&amp;gt;           fixture_result = fixturefunc(**kwargs)\n                             ^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nsrc/pac_bdd/api.py:33: in api_call\n    response = httpx.get(world1pac.pac1.api_base_url)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpx/_api.py:195: in get\n    return request(\n.venv/lib/python3.13/site-packages/httpx/_api.py:109: in request\n    return client.request(\n.venv/lib/python3.13/site-packages/httpx/_client.py:825: in request\n    return self.send(request, auth=auth, follow_redirects=follow_redirects)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpx/_client.py:914: in send\n    response = self._send_handling_auth(\n.venv/lib/python3.13/site-packages/httpx/_client.py:942: in _send_handling_auth\n    response = self._send_handling_redirects(\n.venv/lib/python3.13/site-packages/httpx/_client.py:979: in _send_handling_redirects\n    response = self._send_single_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpx/_client.py:1014: in _send_single_request\n    response = transport.handle_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpx/_transports/default.py:249: in handle_request\n    with map_httpcore_exceptions():\n         ^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/contextlib.py:162: in __exit__\n    self.gen.throw(value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\n    @contextlib.contextmanager\n    def map_httpcore_exceptions() -&amp;gt; typing.Iterator[None]:\n        global HTTPCORE_EXC_MAP\n        if len(HTTPCORE_EXC_MAP) == 0:\n            HTTPCORE_EXC_MAP = _load_httpcore_exceptions()\n        try:\n            yield\n        except Exception as exc:\n            mapped_exc = None\n    \n            for from_exc, to_exc in HTTPCORE_EXC_MAP.items():\n                if not isinstance(exc, from_exc):\n                    continue\n                # We want to map to the most specific exception we can find.\n                # Eg if `exc` is an `httpcore.ReadTimeout`, we want to map to\n                # `httpx.ReadTimeout`, not just `httpx.TimeoutException`.\n                if mapped_exc is None or issubclass(to_exc, mapped_exc):\n                    mapped_exc = to_exc\n    \n            if mapped_exc is None:  # pragma: no cover\n                raise\n    \n            message = str(exc)\n&amp;gt;           raise mapped_exc(message) from exc\nE           httpx.ReadTimeout: timed out\n\n.venv/lib/python3.13/site-packages/httpx/_transports/default.py:118: ReadTimeout\n\n----------------------------- Captured stdout call -----------------------------\n2026-01-08 20:08:49,732 INFO     - *    |            - `Subscriber` waiting for messages\n2026-01-08 20:08:49,836 INFO     - *    |            - `Subscriber` waiting for messages\n2026-01-08 20:08:49,837 INFO     - controle-formats-IN |            - `Process` waiting for messages\n2026-01-08 20:08:49,838 INFO     - test |            - `BaseHandler` waiting for messages\n2026-01-08 20:08:49,839 INFO     - test2 |            - `Handle` waiting for messages\n2026-01-08 20:08:49,839 INFO     - conversion-formats-OUT |            - `Process05To06` waiting for messages\n2026-01-08 20:08:49,840 INFO     - transmission-fiscale-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:49,841 INFO     - validation-metier-OUT |            - `Process04To05` waiting for messages\n2026-01-08 20:08:49,842 INFO     - controle-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:49,842 INFO     - validation-metier-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:49,843 INFO     - routage-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:49,844 INFO     - api-gateway-OUT |            - `Process01To03` waiting for messages\n2026-01-08 20:08:49,844 INFO     - routage-OUT |            - `Process07To08` waiting for messages\n2026-01-08 20:08:49,845 INFO     - api-gateway-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:49,845 INFO     - annuaire-local-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:49,846 INFO     - conversion-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:49,847 INFO     - annuaire-local-OUT |            - `Process06To07` waiting for messages\n2026-01-08 20:08:49,848 INFO     - esb-central-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:49,849 INFO     - controle-formats-OUT |            - `Process03To04` waiting for messages\n2026-01-08 20:08:49,849 INFO     - routage-IN |            - `Process` waiting for messages\n2026-01-08 20:08:49,849 INFO     - *    |            - `Subscriber` waiting for messages\n2026-01-08 20:08:49,850 INFO     - controle-formats-IN |            - `Process` waiting for messages\n2026-01-08 20:08:49,851 INFO     - test |            - `BaseHandler` waiting for messages\n2026-01-08 20:08:49,851 INFO     - test2 |            - `Handle` waiting for messages\n2026-01-08 20:08:49,852 INFO     - conversion-formats-OUT |            - `Process05To06` waiting for messages\n2026-01-08 20:08:49,852 INFO     - transmission-fiscale-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:49,853 INFO     - validation-metier-OUT |            - `Process04To05` waiting for messages\n2026-01-08 20:08:49,854 INFO     - controle-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:49,855 INFO     - validation-metier-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:49,855 INFO     - routage-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:49,856 INFO     - api-gateway-OUT |            - `Process01To03` waiting for messages\n2026-01-08 20:08:49,856 INFO     - routage-OUT |            - `Process07To08` waiting for messages\n2026-01-08 20:08:49,857 INFO     - api-gateway-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:49,858 INFO     - annuaire-local-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:49,858 INFO     - conversion-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:49,859 INFO     - annuaire-local-OUT |            - `Process06To07` waiting for messages\n2026-01-08 20:08:49,859 INFO     - esb-central-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:49,860 INFO     - controle-formats-OUT |            - `Process03To04` waiting for messages\n2026-01-08 20:08:49,861 INFO     - routage-IN |            - `Process` waiting for messages\n2026-01-08 20:08:49,861 INFO     - *    |            - `Subscriber` waiting for messages\n2026-01-08 20:08:49,861 INFO     - controle-formats-IN |            - `Process` waiting for messages\n2026-01-08 20:08:49,862 INFO     - test |            - `BaseHandler` waiting for messages\n2026-01-08 20:08:49,863 INFO     - test2 |            - `Handle` waiting for messages\n2026-01-08 20:08:49,863 INFO     - conversion-formats-OUT |            - `Process05To06` waiting for messages\n2026-01-08 20:08:49,864 INFO     - transmission-fiscale-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:49,864 INFO     - validation-metier-OUT |            - `Process04To05` waiting for messages\n2026-01-08 20:08:49,865 INFO     - controle-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:49,866 INFO     - validation-metier-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:49,866 INFO     - routage-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:49,867 INFO     - api-gateway-OUT |            - `Process01To03` waiting for messages\n2026-01-08 20:08:49,867 INFO     - routage-OUT |            - `Process07To08` waiting for messages\n2026-01-08 20:08:49,868 INFO     - api-gateway-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:49,869 INFO     - annuaire-local-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:49,869 INFO     - conversion-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:49,870 INFO     - annuaire-local-OUT |            - `Process06To07` waiting for messages\n2026-01-08 20:08:49,871 INFO     - esb-central-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:49,871 INFO     - controle-formats-OUT |            - `Process03To04` waiting for messages\n2026-01-08 20:08:49,872 INFO     - routage-IN |            - `Process` waiting for messages\n\n----------------------------- Captured stderr call -----------------------------\nINFO:     Started server process [84508]\nINFO:     Waiting for application startup.\nINFO:     Application startup complete.\nINFO:     Uvicorn running on http://127.0.0.1:8262 (Press CTRL+C to quit)\n2026-01-08 20:08:49,836 INFO     - FastStream app starting...\n2026-01-08 20:08:49,849 INFO     - FastStream app started successfully! To exit, press CTRL+C\n2026-01-08 20:08:49,849 INFO     - FastStream app starting...\n2026-01-08 20:08:49,861 INFO     - FastStream app started successfully! To exit, press CTRL+C\n2026-01-08 20:08:49,861 INFO     - FastStream app starting...\n2026-01-08 20:08:49,872 INFO     - FastStream app started successfully! To exit, press CTRL+C\n--------------------------- Captured stdout teardown ---------------------------\nINFO:     127.0.0.1:35014 - &amp;quot;GET / HTTP/1.1&amp;quot; 200 OK\n\n--------------------------- Captured stderr teardown ---------------------------\nINFO:     Shutting down\nINFO:     Waiting for application shutdown.\nINFO:     Application shutdown complete.\nINFO:     Finished server process [84508]\n&#34;}], &#34;test_scenario.py::test_healthcheck_api_ok&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_healthcheck_api_ok&#34;, &#34;duration&#34;: &#34;00:00:08&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_healthcheck_api_ok&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;00:00:08&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;@contextlib.contextmanager\n    def map_httpcore_exceptions() -&amp;gt; typing.Iterator[None]:\n        global HTTPCORE_EXC_MAP\n        if len(HTTPCORE_EXC_MAP) == 0:\n            HTTPCORE_EXC_MAP = _load_httpcore_exceptions()\n        try:\n&amp;gt;           yield\n\n.venv/lib/python3.13/site-packages/httpx/_transports/default.py:101: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv/lib/python3.13/site-packages/httpx/_transports/default.py:250: in handle_request\n    resp = self._pool.handle_request(req)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpcore/_sync/connection_pool.py:256: in handle_request\n    raise exc from None\n.venv/lib/python3.13/site-packages/httpcore/_sync/connection_pool.py:236: in handle_request\n    response = connection.handle_request(\n.venv/lib/python3.13/site-packages/httpcore/_sync/connection.py:103: in handle_request\n    return self._connection.handle_request(request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpcore/_sync/http11.py:136: in handle_request\n    raise exc\n.venv/lib/python3.13/site-packages/httpcore/_sync/http11.py:106: in handle_request\n    ) = self._receive_response_headers(**kwargs)\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpcore/_sync/http11.py:177: in _receive_response_headers\n    event = self._receive_event(timeout=timeout)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpcore/_sync/http11.py:217: in _receive_event\n    data = self._network_stream.read(\n.venv/lib/python3.13/site-packages/httpcore/_backends/sync.py:126: in read\n    with map_exceptions(exc_map):\n         ^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/contextlib.py:162: in __exit__\n    self.gen.throw(value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nmap = {&amp;lt;class &amp;#x27;TimeoutError&amp;#x27;&amp;gt;: &amp;lt;class &amp;#x27;httpcore.ReadTimeout&amp;#x27;&amp;gt;, &amp;lt;class &amp;#x27;OSError&amp;#x27;&amp;gt;: &amp;lt;class &amp;#x27;httpcore.ReadError&amp;#x27;&amp;gt;}\n\n    @contextlib.contextmanager\n    def map_exceptions(map: ExceptionMapping) -&amp;gt; typing.Iterator[None]:\n        try:\n            yield\n        except Exception as exc:  # noqa: PIE786\n            for from_exc, to_exc in map.items():\n                if isinstance(exc, from_exc):\n&amp;gt;                   raise to_exc(exc) from exc\nE                   httpcore.ReadTimeout: timed out\n\n.venv/lib/python3.13/site-packages/httpcore/_exceptions.py:14: ReadTimeout\n\nThe above exception was the direct cause of the following exception:\n\nfixturefunc = &amp;lt;function api_call at 0x7fe79fa647c0&amp;gt;, request = &amp;lt;FixtureRequest for &amp;lt;Function test_healthcheck_api_ok&amp;gt;&amp;gt;\nkwargs = {&amp;#x27;path&amp;#x27;: &amp;#x27;/healthcheck&amp;#x27;, &amp;#x27;verb&amp;#x27;: &amp;#x27;GET&amp;#x27;, &amp;#x27;world1pac&amp;#x27;: &amp;lt;pac0.shared.test.fixture.WorldContext object at 0x7fe79f9d3360&amp;gt;}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -&amp;gt; FixtureValue:\n        if inspect.isgeneratorfunction(fixturefunc):\n            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f&amp;quot;{request.fixturename} did not yield a value&amp;quot;) from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n&amp;gt;           fixture_result = fixturefunc(**kwargs)\n                             ^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nsrc/pac_bdd/api.py:33: in api_call\n    response = httpx.get(world1pac.pac1.api_base_url)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpx/_api.py:195: in get\n    return request(\n.venv/lib/python3.13/site-packages/httpx/_api.py:109: in request\n    return client.request(\n.venv/lib/python3.13/site-packages/httpx/_client.py:825: in request\n    return self.send(request, auth=auth, follow_redirects=follow_redirects)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpx/_client.py:914: in send\n    response = self._send_handling_auth(\n.venv/lib/python3.13/site-packages/httpx/_client.py:942: in _send_handling_auth\n    response = self._send_handling_redirects(\n.venv/lib/python3.13/site-packages/httpx/_client.py:979: in _send_handling_redirects\n    response = self._send_single_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpx/_client.py:1014: in _send_single_request\n    response = transport.handle_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/httpx/_transports/default.py:249: in handle_request\n    with map_httpcore_exceptions():\n         ^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/contextlib.py:162: in __exit__\n    self.gen.throw(value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\n    @contextlib.contextmanager\n    def map_httpcore_exceptions() -&amp;gt; typing.Iterator[None]:\n        global HTTPCORE_EXC_MAP\n        if len(HTTPCORE_EXC_MAP) == 0:\n            HTTPCORE_EXC_MAP = _load_httpcore_exceptions()\n        try:\n            yield\n        except Exception as exc:\n            mapped_exc = None\n    \n            for from_exc, to_exc in HTTPCORE_EXC_MAP.items():\n                if not isinstance(exc, from_exc):\n                    continue\n                # We want to map to the most specific exception we can find.\n                # Eg if `exc` is an `httpcore.ReadTimeout`, we want to map to\n                # `httpx.ReadTimeout`, not just `httpx.TimeoutException`.\n                if mapped_exc is None or issubclass(to_exc, mapped_exc):\n                    mapped_exc = to_exc\n    \n            if mapped_exc is None:  # pragma: no cover\n                raise\n    \n            message = str(exc)\n&amp;gt;           raise mapped_exc(message) from exc\nE           httpx.ReadTimeout: timed out\n\n.venv/lib/python3.13/site-packages/httpx/_transports/default.py:118: ReadTimeout\n\n----------------------------- Captured stdout call -----------------------------\n2026-01-08 20:08:58,357 INFO     - *    |            - `Subscriber` waiting for messages\n2026-01-08 20:08:58,462 INFO     - *    |            - `Subscriber` waiting for messages\n2026-01-08 20:08:58,463 INFO     - controle-formats-IN |            - `Process` waiting for messages\n2026-01-08 20:08:58,463 INFO     - test |            - `BaseHandler` waiting for messages\n2026-01-08 20:08:58,464 INFO     - test2 |            - `Handle` waiting for messages\n2026-01-08 20:08:58,464 INFO     - conversion-formats-OUT |            - `Process05To06` waiting for messages\n2026-01-08 20:08:58,464 INFO     - transmission-fiscale-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:58,465 INFO     - validation-metier-OUT |            - `Process04To05` waiting for messages\n2026-01-08 20:08:58,465 INFO     - controle-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:58,466 INFO     - validation-metier-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:58,467 INFO     - routage-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:58,468 INFO     - api-gateway-OUT |            - `Process01To03` waiting for messages\n2026-01-08 20:08:58,468 INFO     - routage-OUT |            - `Process07To08` waiting for messages\n2026-01-08 20:08:58,469 INFO     - api-gateway-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:58,470 INFO     - annuaire-local-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:58,470 INFO     - conversion-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:58,471 INFO     - annuaire-local-OUT |            - `Process06To07` waiting for messages\n2026-01-08 20:08:58,471 INFO     - esb-central-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:58,472 INFO     - controle-formats-OUT |            - `Process03To04` waiting for messages\n2026-01-08 20:08:58,472 INFO     - routage-IN |            - `Process` waiting for messages\n2026-01-08 20:08:58,473 INFO     - *    |            - `Subscriber` waiting for messages\n2026-01-08 20:08:58,473 INFO     - controle-formats-IN |            - `Process` waiting for messages\n2026-01-08 20:08:58,473 INFO     - test |            - `BaseHandler` waiting for messages\n2026-01-08 20:08:58,474 INFO     - test2 |            - `Handle` waiting for messages\n2026-01-08 20:08:58,474 INFO     - conversion-formats-OUT |            - `Process05To06` waiting for messages\n2026-01-08 20:08:58,475 INFO     - transmission-fiscale-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:58,475 INFO     - validation-metier-OUT |            - `Process04To05` waiting for messages\n2026-01-08 20:08:58,475 INFO     - controle-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:58,476 INFO     - validation-metier-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:58,476 INFO     - routage-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:58,476 INFO     - api-gateway-OUT |            - `Process01To03` waiting for messages\n2026-01-08 20:08:58,477 INFO     - routage-OUT |            - `Process07To08` waiting for messages\n2026-01-08 20:08:58,477 INFO     - api-gateway-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:58,478 INFO     - annuaire-local-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:58,478 INFO     - conversion-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:58,478 INFO     - annuaire-local-OUT |            - `Process06To07` waiting for messages\n2026-01-08 20:08:58,479 INFO     - esb-central-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:58,479 INFO     - controle-formats-OUT |            - `Process03To04` waiting for messages\n2026-01-08 20:08:58,480 INFO     - routage-IN |            - `Process` waiting for messages\n2026-01-08 20:08:58,480 INFO     - *    |            - `Subscriber` waiting for messages\n2026-01-08 20:08:58,480 INFO     - controle-formats-IN |            - `Process` waiting for messages\n2026-01-08 20:08:58,481 INFO     - test |            - `BaseHandler` waiting for messages\n2026-01-08 20:08:58,481 INFO     - test2 |            - `Handle` waiting for messages\n2026-01-08 20:08:58,481 INFO     - conversion-formats-OUT |            - `Process05To06` waiting for messages\n2026-01-08 20:08:58,482 INFO     - transmission-fiscale-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:58,482 INFO     - validation-metier-OUT |            - `Process04To05` waiting for messages\n2026-01-08 20:08:58,483 INFO     - controle-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:58,483 INFO     - validation-metier-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:58,483 INFO     - routage-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:58,484 INFO     - api-gateway-OUT |            - `Process01To03` waiting for messages\n2026-01-08 20:08:58,484 INFO     - routage-OUT |            - `Process07To08` waiting for messages\n2026-01-08 20:08:58,484 INFO     - api-gateway-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:58,485 INFO     - annuaire-local-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:58,485 INFO     - conversion-formats-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:58,486 INFO     - annuaire-local-OUT |            - `Process06To07` waiting for messages\n2026-01-08 20:08:58,486 INFO     - esb-central-ERR |            - `ProcessErr` waiting for messages\n2026-01-08 20:08:58,486 INFO     - controle-formats-OUT |            - `Process03To04` waiting for messages\n2026-01-08 20:08:58,487 INFO     - routage-IN |            - `Process` waiting for messages\n\n----------------------------- Captured stderr call -----------------------------\nINFO:     Started server process [84508]\nINFO:     Waiting for application startup.\nINFO:     Application startup complete.\nINFO:     Uvicorn running on http://127.0.0.1:8209 (Press CTRL+C to quit)\n2026-01-08 20:08:58,462 INFO     - FastStream app starting...\n2026-01-08 20:08:58,472 INFO     - FastStream app started successfully! To exit, press CTRL+C\n2026-01-08 20:08:58,472 INFO     - FastStream app starting...\n2026-01-08 20:08:58,480 INFO     - FastStream app started successfully! To exit, press CTRL+C\n2026-01-08 20:08:58,480 INFO     - FastStream app starting...\n2026-01-08 20:08:58,487 INFO     - FastStream app started successfully! To exit, press CTRL+C\n--------------------------- Captured stdout teardown ---------------------------\nINFO:     127.0.0.1:54336 - &amp;quot;GET / HTTP/1.1&amp;quot; 200 OK\n\n--------------------------- Captured stderr teardown ---------------------------\nINFO:     Shutting down\nINFO:     Waiting for application shutdown.\nINFO:     Application shutdown complete.\nINFO:     Finished server process [84508]\n&#34;}], &#34;test_scenario.py::test_controle_format_facturx&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_controle_format_facturx&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_controle_format_facturx&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;fixturefunc = &amp;lt;function control_invoice at 0x7fe79fa67600&amp;gt;, request = &amp;lt;FixtureRequest for &amp;lt;Function test_controle_format_facturx&amp;gt;&amp;gt;, kwargs = {}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -&amp;gt; FixtureValue:\n        if inspect.isgeneratorfunction(fixturefunc):\n            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f&amp;quot;{request.fixturename} did not yield a value&amp;quot;) from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n&amp;gt;           fixture_result = fixturefunc(**kwargs)\n                             ^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\n    @when(\n        parsers.parse(&amp;quot;je d\u00e9pose pour contr\u00f4le la facture @{invoice}&amp;quot;),\n    )\n    def control_invoice():\n&amp;gt;       raise NotImplementedError()\nE       NotImplementedError\n\nsrc/pac_bdd/tobeimplemented.py:26: NotImplementedError\n&#34;}], &#34;test_scenario.py::test_d\u00e9marrage_dun_serveur_nats&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_d\u00e9marrage_dun_serveur_nats&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_d\u00e9marrage_dun_serveur_nats&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Given &amp;quot;un serveur NATS disponible&amp;quot;. Line 18 in scenario &amp;quot;D\u00e9marrage d&amp;#x27;un serveur NATS&amp;quot; in the feature &amp;quot;/home/philippe/src/PA_Communautaire/docs/briques/02-esb-central/service_lifecycle.feature&amp;quot;\nAll traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.\n&#34;}], &#34;test_scenario.py::test_connexion_dun_broker_au_serveur_nats&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_connexion_dun_broker_au_serveur_nats&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_connexion_dun_broker_au_serveur_nats&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Given &amp;quot;un serveur NATS disponible&amp;quot;. Line 22 in scenario &amp;quot;Connexion d&amp;#x27;un broker au serveur NATS&amp;quot; in the feature &amp;quot;/home/philippe/src/PA_Communautaire/docs/briques/02-esb-central/service_lifecycle.feature&amp;quot;\nAll traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.\n&#34;}], &#34;test_scenario.py::test_d\u00e9marrage_de_plusieurs_pa&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_d\u00e9marrage_de_plusieurs_pa&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_d\u00e9marrage_de_plusieurs_pa&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Given &amp;quot;2 PA d\u00e9marr\u00e9es&amp;quot;. Line 31 in scenario &amp;quot;D\u00e9marrage de plusieurs PA&amp;quot; in the feature &amp;quot;/home/philippe/src/PA_Communautaire/docs/briques/02-esb-central/service_lifecycle.feature&amp;quot;\nAll traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.\n&#34;}], &#34;test_scenario.py::test_healthcheck_message&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_healthcheck_message&#34;, &#34;duration&#34;: &#34;12 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_healthcheck_message&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;12 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;fixturefunc = &amp;lt;function esb_sub_msg at 0x7fe79fa66ca0&amp;gt;, request = &amp;lt;FixtureRequest for &amp;lt;Function test_healthcheck_message&amp;gt;&amp;gt;, kwargs = {&amp;#x27;world&amp;#x27;: WorldContext()}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -&amp;gt; FixtureValue:\n        if inspect.isgeneratorfunction(fixturefunc):\n            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f&amp;quot;{request.fixturename} did not yield a value&amp;quot;) from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n&amp;gt;           fixture_result = fixturefunc(**kwargs)\n                             ^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nsrc/pac_bdd/esb.py:14: in wrapper\n    return asyncio.run(fn(*args, **kwargs))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/asyncio/runners.py:195: in run\n    return runner.run(main)\n           ^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/asyncio/runners.py:118: in run\n    return self._loop.run_until_complete(task)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/asyncio/base_events.py:725: in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\nsrc/pac_bdd/esb.py:72: in esb_sub_msg\n    handle_all.mock.assert_called_once_with(&amp;quot;toto&amp;quot;)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = &amp;lt;MagicMock id=&amp;#x27;140632794332336&amp;#x27;&amp;gt;, args = (&amp;#x27;toto&amp;#x27;,), kwargs = {}, msg = &amp;quot;Expected &amp;#x27;mock&amp;#x27; to be called once. Called 0 times.&amp;quot;\n\n    def assert_called_once_with(self, /, *args, **kwargs):\n        &amp;quot;&amp;quot;&amp;quot;assert that the mock was called exactly once and that that call was\n        with the specified arguments.&amp;quot;&amp;quot;&amp;quot;\n        if not self.call_count == 1:\n            msg = (&amp;quot;Expected &amp;#x27;%s&amp;#x27; to be called once. Called %s times.%s&amp;quot;\n                   % (self._mock_name or &amp;#x27;mock&amp;#x27;,\n                      self.call_count,\n                      self._calls_repr()))\n&amp;gt;           raise AssertionError(msg)\nE           AssertionError: Expected &amp;#x27;mock&amp;#x27; to be called once. Called 0 times.\n\n../../../../.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:988: AssertionError\n\n----------------------------- Captured stdout call -----------------------------\nvvvvv world fixture starts .......\nvvvvv dbg 10\nvvvvv dbg 30\nvvvvv dbg aenter 10\nvvvvv dbg aenter 20\nvvvvv dbg aenter 30\nvvvvv dbg async with 10\nesb_sub canal=&amp;#x27;healthcheck&amp;#x27;...\nesb_pub_msg msg=&amp;#x27;hello&amp;#x27; sur le canal=&amp;#x27;healthcheck&amp;#x27; ...\nrecieving message static ...\n--------------------------- Captured stdout teardown ---------------------------\nvvvvv dbg async with 20\nvvvvv dbg aexit 10\nvvvvv dbg aexit 20\nvvvvv world fixture ends .......\n&#34;}], &#34;test_scenario.py::test_canal_pingpong&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_canal_pingpong&#34;, &#34;duration&#34;: &#34;7 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_canal_pingpong&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;7 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;E   pytest_bdd.exceptions.StepDefinitionNotFoundError: Step definition is not found: Then &amp;quot;j&amp;#x27;obtiens le message &amp;#x27;hello&amp;#x27; sur le canal &amp;#x27;pong&amp;#x27;&amp;quot;. Line 10 in scenario &amp;quot;Canal ping/pong&amp;quot; in the feature &amp;quot;/home/philippe/src/PA_Communautaire/docs/briques/02-esb-central/esb.feature&amp;quot;\nAll traceback entries are hidden. Pass `--full-trace` to see hidden and internal frames.\n\n----------------------------- Captured stdout call -----------------------------\nvvvvv world fixture starts .......\nvvvvv dbg 10\nvvvvv dbg 30\nvvvvv dbg aenter 10\nvvvvv dbg aenter 20\nvvvvv dbg aenter 30\nvvvvv dbg async with 10\nesb_sub canal=&amp;#x27;pong&amp;#x27;...\nesb_pub_msg msg=&amp;#x27;hello&amp;#x27; sur le canal=&amp;#x27;ping&amp;#x27; ...\n--------------------------- Captured stdout teardown ---------------------------\nvvvvv dbg async with 20\nvvvvv dbg aexit 10\nvvvvv dbg aexit 20\nvvvvv world fixture ends .......\n&#34;}], &#34;test_scenario.py::test_pa&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_pa&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_pa&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;fixturefunc = &amp;lt;function job_status at 0x7fe79fa67f60&amp;gt;, request = &amp;lt;FixtureRequest for &amp;lt;Function test_pa&amp;gt;&amp;gt;, kwargs = {&amp;#x27;status&amp;#x27;: &amp;#x27;accepted&amp;#x27;}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -&amp;gt; FixtureValue:\n        if inspect.isgeneratorfunction(fixturefunc):\n            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f&amp;quot;{request.fixturename} did not yield a value&amp;quot;) from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n&amp;gt;           fixture_result = fixturefunc(**kwargs)\n                             ^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nstatus = &amp;#x27;accepted&amp;#x27;\n\n    @then(\n        parsers.parse(&amp;quot;j&amp;#x27;obtiens le statut #{status}&amp;quot;),\n    )\n    def job_status(status):\n        # assert False, f&amp;quot;statut {status} expected but not implemented !&amp;quot;\n&amp;gt;       raise NotImplementedError()\nE       NotImplementedError\n\nsrc/pac_bdd/tobeimplemented.py:56: NotImplementedError\n&#34;}], &#34;test_scenario.py::test_r\u00e9solution_sml_r\u00e9ussie_pour_un_participant_enregistr\u00e9&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_r\u00e9solution_sml_r\u00e9ussie_pour_un_participant_enregistr\u00e9&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_r\u00e9solution_sml_r\u00e9ussie_pour_un_participant_enregistr\u00e9&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\nhostname=&amp;#x27;B-8874539cbfa5af29d56194be355ac1b1.iso6523-actorid-upis.acc.edelivery.tech.ec.europa.eu&amp;#x27;\n&#34;}], &#34;test_scenario.py::test_r\u00e9solution_sml_\u00e9chou\u00e9e__participant_non_enregistr\u00e9&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_r\u00e9solution_sml_\u00e9chou\u00e9e__participant_non_enregistr\u00e9&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_r\u00e9solution_sml_\u00e9chou\u00e9e__participant_non_enregistr\u00e9&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\nhostname=&amp;#x27;B-91b335d8468f95656def2849b18366a7.iso6523-actorid-upis.acc.edelivery.tech.ec.europa.eu&amp;#x27;\n&#34;}], &#34;test_scenario.py::test_r\u00e9cup\u00e9ration_m\u00e9tadonn\u00e9es_smp_r\u00e9ussie&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_r\u00e9cup\u00e9ration_m\u00e9tadonn\u00e9es_smp_r\u00e9ussie&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_r\u00e9cup\u00e9ration_m\u00e9tadonn\u00e9es_smp_r\u00e9ussie&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;test_scenario.py::test_smp_ne_supporte_pas_le_document_type_demand\u00e9&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_smp_ne_supporte_pas_le_document_type_demand\u00e9&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_smp_ne_supporte_pas_le_document_type_demand\u00e9&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;test_scenario.py::test_lookup_peppol_complet_r\u00e9ussi_par_siren&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_lookup_peppol_complet_r\u00e9ussi_par_siren&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_lookup_peppol_complet_r\u00e9ussi_par_siren&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;test_scenario.py::test_lookup_peppol_complet_r\u00e9ussi_par_siret&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_lookup_peppol_complet_r\u00e9ussi_par_siret&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_lookup_peppol_complet_r\u00e9ussi_par_siret&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;test_scenario.py::test_lookup_peppol_\u00e9chou\u00e9__participant_introuvable&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_lookup_peppol_\u00e9chou\u00e9__participant_introuvable&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_lookup_peppol_\u00e9chou\u00e9__participant_introuvable&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;test_scenario.py::test_routage_facture_vers_pa_distante_via_peppol&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_routage_facture_vers_pa_distante_via_peppol&#34;, &#34;duration&#34;: &#34;5 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_routage_facture_vers_pa_distante_via_peppol&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;5 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;test_scenario.py::test_routage_facture__destinataire_local_pas_de_lookup_peppol&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_routage_facture__destinataire_local_pas_de_lookup_peppol&#34;, &#34;duration&#34;: &#34;4 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_routage_facture__destinataire_local_pas_de_lookup_peppol&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;4 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;test_scenario.py::test_routage_facture__fallback_vers_ppf&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_routage_facture__fallback_vers_ppf&#34;, &#34;duration&#34;: &#34;4 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_routage_facture__fallback_vers_ppf&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;4 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;test_scenario.py::test_validation_du_certificat_peppol&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_validation_du_certificat_peppol&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_validation_du_certificat_peppol&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;test_scenario.py::test_v\u00e9rification_de_la_signature_smp&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_v\u00e9rification_de_la_signature_smp&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_v\u00e9rification_de_la_signature_smp&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;test_scenario.py::test_v\u00e9rification_des_document_types_support\u00e9s&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_v\u00e9rification_des_document_types_support\u00e9s&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_v\u00e9rification_des_document_types_support\u00e9s&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;fixturefunc = &amp;lt;function check_document_types_table at 0x7fe79fab5620&amp;gt;, request = &amp;lt;FixtureRequest for &amp;lt;Function test_v\u00e9rification_des_document_types_support\u00e9s&amp;gt;&amp;gt;\nkwargs = {&amp;#x27;datatable&amp;#x27;: [[&amp;#x27;document_type&amp;#x27;], [&amp;#x27;urn:oasis:names:specification:ubl:schema:xsd:Invoice-2::Invoice&amp;#x27;]], &amp;#x27;peppol_contex...ss Point PEPPOL&amp;#x27;, technical_contact_url=None), &amp;#x27;registered&amp;#x27;: True, &amp;#x27;scheme&amp;#x27;: &amp;#x27;0009&amp;#x27;, &amp;#x27;siren&amp;#x27;: &amp;#x27;123456789&amp;#x27;, ...}}, ...}}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -&amp;gt; FixtureValue:\n        if inspect.isgeneratorfunction(fixturefunc):\n            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f&amp;quot;{request.fixturename} did not yield a value&amp;quot;) from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n&amp;gt;           fixture_result = fixturefunc(**kwargs)\n                             ^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\npeppol_context = {&amp;#x27;dns_error&amp;#x27;: None, &amp;#x27;dns_responses&amp;#x27;: {&amp;#x27;B-8874539cbfa5af29d56194be355ac1b1.iso6523-actorid-upis.acc.edelivery.tech.ec.e...ess Point PEPPOL&amp;#x27;, technical_contact_url=None), &amp;#x27;registered&amp;#x27;: True, &amp;#x27;scheme&amp;#x27;: &amp;#x27;0009&amp;#x27;, &amp;#x27;siren&amp;#x27;: &amp;#x27;123456789&amp;#x27;, ...}}, ...}\ndatatable = [[&amp;#x27;document_type&amp;#x27;], [&amp;#x27;urn:oasis:names:specification:ubl:schema:xsd:Invoice-2::Invoice&amp;#x27;]]\n\n    @then(&amp;quot;les document types support\u00e9s incluent:&amp;quot;)\n    def check_document_types_table(peppol_context, datatable):\n        &amp;quot;&amp;quot;&amp;quot;V\u00e9rifie les document types support\u00e9s.&amp;quot;&amp;quot;&amp;quot;\n&amp;gt;       expected_types = [row[&amp;quot;document_type&amp;quot;] for row in datatable]\n                          ^^^^^^^^^^^^^^^^^^^^\nE       TypeError: list indices must be integers or slices, not str\n\nsrc/pac_bdd/peppol.py:827: TypeError\n&#34;}], &#34;test_scenario.py::test_timeout_lors_du_lookup_sml&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_timeout_lors_du_lookup_sml&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_timeout_lors_du_lookup_sml&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;test_scenario.py::test_smp_temporairement_indisponible&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_smp_temporairement_indisponible&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_smp_temporairement_indisponible&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;test_scenario.py::test_retry_automatique_apr\u00e8s_\u00e9chec_temporaire&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_retry_automatique_apr\u00e8s_\u00e9chec_temporaire&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_retry_automatique_apr\u00e8s_\u00e9chec_temporaire&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;test_scenario.py::test_\u00e9chec_d\u00e9finitif_apr\u00e8s_plusieurs_retries&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_\u00e9chec_d\u00e9finitif_apr\u00e8s_plusieurs_retries&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_\u00e9chec_d\u00e9finitif_apr\u00e8s_plusieurs_retries&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;test_scenario.py::test_communication_bidirectionnelle_entre_2_pa&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_communication_bidirectionnelle_entre_2_pa&#34;, &#34;duration&#34;: &#34;4 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_communication_bidirectionnelle_entre_2_pa&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;4 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;fixturefunc = &amp;lt;function check_invoice_routed_via_peppol at 0x7fe79fab76a0&amp;gt;, request = &amp;lt;FixtureRequest for &amp;lt;Function test_communication_bidirectionnelle_entre_2_pa&amp;gt;&amp;gt;\nkwargs = {&amp;#x27;invoice_id&amp;#x27;: &amp;#x27;f1&amp;#x27;, &amp;#x27;pa_id&amp;#x27;: &amp;#x27;pa2&amp;#x27;, &amp;#x27;peppol_context&amp;#x27;: {&amp;#x27;dns_error&amp;#x27;: None, &amp;#x27;dns_responses&amp;#x27;: {}, &amp;#x27;enterprises&amp;#x27;: {&amp;#x27;e1&amp;#x27;: ... &amp;#x27;0009&amp;#x27;, &amp;#x27;siren&amp;#x27;: &amp;#x27;222222222&amp;#x27;, ...}}, &amp;#x27;environment&amp;#x27;: &amp;lt;PeppolEnvironment.TEST: &amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;&amp;gt;, ...}}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -&amp;gt; FixtureValue:\n        if inspect.isgeneratorfunction(fixturefunc):\n            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f&amp;quot;{request.fixturename} did not yield a value&amp;quot;) from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n&amp;gt;           fixture_result = fixturefunc(**kwargs)\n                             ^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\npeppol_context = {&amp;#x27;dns_error&amp;#x27;: None, &amp;#x27;dns_responses&amp;#x27;: {}, &amp;#x27;enterprises&amp;#x27;: {&amp;#x27;e1&amp;#x27;: {&amp;#x27;endpoint&amp;#x27;: None, &amp;#x27;registered&amp;#x27;: False, &amp;#x27;scheme&amp;#x27;: &amp;#x27;0009...: &amp;#x27;0009&amp;#x27;, &amp;#x27;siren&amp;#x27;: &amp;#x27;222222222&amp;#x27;, ...}}, &amp;#x27;environment&amp;#x27;: &amp;lt;PeppolEnvironment.TEST: &amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;&amp;gt;, ...}\ninvoice_id = &amp;#x27;f1&amp;#x27;, pa_id = &amp;#x27;pa2&amp;#x27;\n\n    @then(parsers.parse(&amp;quot;la facture #{invoice_id} est rout\u00e9e vers #{pa_id} via PEPPOL&amp;quot;))\n    def check_invoice_routed_via_peppol(peppol_context, invoice_id: str, pa_id: str):\n        &amp;quot;&amp;quot;&amp;quot;V\u00e9rifie que la facture est rout\u00e9e via PEPPOL.&amp;quot;&amp;quot;&amp;quot;\n        result = peppol_context.get(&amp;quot;routing_result&amp;quot;)\n        assert result is not None\n&amp;gt;       assert result.status == RoutingStatus.ROUTED\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE       AssertionError\n\nsrc/pac_bdd/peppol.py:962: AssertionError\n&#34;}], &#34;test_scenario.py::test_r\u00e9ception_dune_facture_via_as4_depuis_une_pa_distante&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_r\u00e9ception_dune_facture_via_as4_depuis_une_pa_distante&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_r\u00e9ception_dune_facture_via_as4_depuis_une_pa_distante&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;fixturefunc = &amp;lt;function invoice_received_via_as4 at 0x7fe79fab7880&amp;gt;, request = &amp;lt;FixtureRequest for &amp;lt;Function test_r\u00e9ception_dune_facture_via_as4_depuis_une_pa_distante&amp;gt;&amp;gt;\nkwargs = {&amp;#x27;invoice_id&amp;#x27;: &amp;#x27;f1&amp;#x27;, &amp;#x27;peppol_context&amp;#x27;: {&amp;#x27;dns_error&amp;#x27;: None, &amp;#x27;dns_responses&amp;#x27;: {}, &amp;#x27;enterprises&amp;#x27;: {&amp;#x27;e1&amp;#x27;: {&amp;#x27;endpoint&amp;#x27;: Non... &amp;#x27;0009&amp;#x27;, &amp;#x27;siren&amp;#x27;: &amp;#x27;111111111&amp;#x27;, ...}}, &amp;#x27;environment&amp;#x27;: &amp;lt;PeppolEnvironment.TEST: &amp;#x27;acc.edelivery.tech.ec.europa.eu&amp;#x27;&amp;gt;, ...}}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -&amp;gt; FixtureValue:\n        if inspect.isgeneratorfunction(fixturefunc):\n            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f&amp;quot;{request.fixturename} did not yield a value&amp;quot;) from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n&amp;gt;           fixture_result = fixturefunc(**kwargs)\n                             ^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nsrc/pac_bdd/peppol.py:979: in invoice_received_via_as4\n    peppol_context[&amp;quot;invoices&amp;quot;][invoice_id].received_via_as4 = True\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/pydantic/main.py:1032: in __setattr__\n    elif (setattr_handler := self._setattr_handler(name, value)) is not None:\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = InvoiceMessage(invoice_id=&amp;#x27;f1&amp;#x27;, sender_siren=&amp;#x27;999999999&amp;#x27;, sender_siret=None, recipient_siren=&amp;#x27;123456789&amp;#x27;, recipient_siret=None, document_type=&amp;#x27;invoice_ubl&amp;#x27;, payload=&amp;#x27;&amp;lt;Invoice&amp;gt;...&amp;lt;/Invoice&amp;gt;&amp;#x27;, local_recipient=False)\nname = &amp;#x27;received_via_as4&amp;#x27;, value = True\n\n    def _setattr_handler(self, name: str, value: Any) -&amp;gt; Callable[[BaseModel, str, Any], None] | None:\n        &amp;quot;&amp;quot;&amp;quot;Get a handler for setting an attribute on the model instance.\n    \n        Returns:\n            A handler for setting an attribute on the model instance. Used for memoization of the handler.\n            Memoizing the handlers leads to a dramatic performance improvement in `__setattr__`\n            Returns `None` when memoization is not safe, then the attribute is set directly.\n        &amp;quot;&amp;quot;&amp;quot;\n        cls = self.__class__\n        if name in cls.__class_vars__:\n            raise AttributeError(\n                f&amp;#x27;{name!r} is a ClassVar of `{cls.__name__}` and cannot be set on an instance. &amp;#x27;\n                f&amp;#x27;If you want to set a value on the class, use `{cls.__name__}.{name} = value`.&amp;#x27;\n            )\n        elif not _fields.is_valid_field_name(name):\n            if (attribute := cls.__private_attributes__.get(name)) is not None:\n                if hasattr(attribute, &amp;#x27;__set__&amp;#x27;):\n                    return lambda model, _name, val: attribute.__set__(model, val)\n                else:\n                    return _SIMPLE_SETATTR_HANDLERS[&amp;#x27;private&amp;#x27;]\n            else:\n                _object_setattr(self, name, value)\n                return None  # Can not return memoized handler with possibly freeform attr names\n    \n        attr = getattr(cls, name, None)\n        # NOTE: We currently special case properties and `cached_property`, but we might need\n        # to generalize this to all data/non-data descriptors at some point. For non-data descriptors\n        # (such as `cached_property`), it isn&amp;#x27;t obvious though. `cached_property` caches the value\n        # to the instance&amp;#x27;s `__dict__`, but other non-data descriptors might do things differently.\n        if isinstance(attr, cached_property):\n            return _SIMPLE_SETATTR_HANDLERS[&amp;#x27;cached_property&amp;#x27;]\n    \n        _check_frozen(cls, name, value)\n    \n        # We allow properties to be set only on non frozen models for now (to match dataclasses).\n        # This can be changed if it ever gets requested.\n        if isinstance(attr, property):\n            return lambda model, _name, val: attr.__set__(model, val)\n        elif cls.model_config.get(&amp;#x27;validate_assignment&amp;#x27;):\n            return _SIMPLE_SETATTR_HANDLERS[&amp;#x27;validate_assignment&amp;#x27;]\n        elif name not in cls.__pydantic_fields__:\n            if cls.model_config.get(&amp;#x27;extra&amp;#x27;) != &amp;#x27;allow&amp;#x27;:\n                # TODO - matching error\n&amp;gt;               raise ValueError(f&amp;#x27;&amp;quot;{cls.__name__}&amp;quot; object has no field &amp;quot;{name}&amp;quot;&amp;#x27;)\nE               ValueError: &amp;quot;InvoiceMessage&amp;quot; object has no field &amp;quot;received_via_as4&amp;quot;\n\n.venv/lib/python3.13/site-packages/pydantic/main.py:1079: ValueError\n&#34;}], &#34;test_scenario.py::test_facture_b2g_via_chorus_pro_peppol&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_facture_b2g_via_chorus_pro_peppol&#34;, &#34;duration&#34;: &#34;4 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_facture_b2g_via_chorus_pro_peppol&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;4 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;test_scenario.py::test_rejet_dolibarr&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_rejet_dolibarr&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_rejet_dolibarr&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;fixturefunc = &amp;lt;function compliance_rule_set at 0x7fe79fa67ba0&amp;gt;, request = &amp;lt;FixtureRequest for &amp;lt;Function test_rejet_dolibarr&amp;gt;&amp;gt;, kwargs = {}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -&amp;gt; FixtureValue:\n        if inspect.isgeneratorfunction(fixturefunc):\n            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f&amp;quot;{request.fixturename} did not yield a value&amp;quot;) from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n&amp;gt;           fixture_result = fixturefunc(**kwargs)\n                             ^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\n    @when(&amp;quot;je d\u00e9finis un contr\u00f4le de conformit\u00e9 m\u00e9tier fournisseur&amp;quot;)\n    def compliance_rule_set():\n&amp;gt;       raise NotImplementedError()\nE       NotImplementedError\n\nsrc/pac_bdd/tobeimplemented.py:41: NotImplementedError\n&#34;}], &#34;test_scenario.py::test_facture_rejet\u00e9e&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;test_scenario.py::test_facture_rejet\u00e9e&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;test_scenario.py::test_facture_rejet\u00e9e&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;fixturefunc = &amp;lt;function submit_invoice_simple at 0x7fe79fa67240&amp;gt;, request = &amp;lt;FixtureRequest for &amp;lt;Function test_facture_rejet\u00e9e&amp;gt;&amp;gt;, kwargs = {}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -&amp;gt; FixtureValue:\n        if inspect.isgeneratorfunction(fixturefunc):\n            fixturefunc = cast(Callable[..., Generator[FixtureValue]], fixturefunc)\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f&amp;quot;{request.fixturename} did not yield a value&amp;quot;) from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n&amp;gt;           fixture_result = fixturefunc(**kwargs)\n                             ^^^^^^^^^^^^^^^^^^^^^\n\n.venv/lib/python3.13/site-packages/_pytest/fixtures.py:930: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\n    @when(&amp;quot;je d\u00e9pose une facture&amp;quot;)\n    def submit_invoice_simple():\n        # POST /\n&amp;gt;       raise NotImplementedError()\nE       NotImplementedError\n\nsrc/pac_bdd/tobeimplemented.py:13: NotImplementedError\n&#34;}]}, &#34;renderCollapsed&#34;: [&#34;passed&#34;], &#34;initialSort&#34;: &#34;result&#34;, &#34;title&#34;: &#34;report.html&#34;}"></div>
    <script>
      (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
const { getCollapsedCategory, setCollapsedIds } = require('./storage.js')

class DataManager {
    setManager(data) {
        const collapsedCategories = [...getCollapsedCategory(data.renderCollapsed)]
        const collapsedIds = []
        const tests = Object.values(data.tests).flat().map((test, index) => {
            const collapsed = collapsedCategories.includes(test.result.toLowerCase())
            const id = `test_${index}`
            if (collapsed) {
                collapsedIds.push(id)
            }
            return {
                ...test,
                id,
                collapsed,
            }
        })
        const dataBlob = { ...data, tests }
        this.data = { ...dataBlob }
        this.renderData = { ...dataBlob }
        setCollapsedIds(collapsedIds)
    }

    get allData() {
        return { ...this.data }
    }

    resetRender() {
        this.renderData = { ...this.data }
    }

    setRender(data) {
        this.renderData.tests = [...data]
    }

    toggleCollapsedItem(id) {
        this.renderData.tests = this.renderData.tests.map((test) =>
            test.id === id ? { ...test, collapsed: !test.collapsed } : test,
        )
    }

    set allCollapsed(collapsed) {
        this.renderData = { ...this.renderData, tests: [...this.renderData.tests.map((test) => (
            { ...test, collapsed }
        ))] }
    }

    get testSubset() {
        return [...this.renderData.tests]
    }

    get environment() {
        return this.renderData.environment
    }

    get initialSort() {
        return this.data.initialSort
    }
}

module.exports = {
    manager: new DataManager(),
}

},{"./storage.js":8}],2:[function(require,module,exports){
const mediaViewer = require('./mediaviewer.js')
const templateEnvRow = document.getElementById('template_environment_row')
const templateResult = document.getElementById('template_results-table__tbody')

function htmlToElements(html) {
    const temp = document.createElement('template')
    temp.innerHTML = html
    return temp.content.childNodes
}

const find = (selector, elem) => {
    if (!elem) {
        elem = document
    }
    return elem.querySelector(selector)
}

const findAll = (selector, elem) => {
    if (!elem) {
        elem = document
    }
    return [...elem.querySelectorAll(selector)]
}

const dom = {
    getStaticRow: (key, value) => {
        const envRow = templateEnvRow.content.cloneNode(true)
        const isObj = typeof value === 'object' && value !== null
        const values = isObj ? Object.keys(value).map((k) => `${k}: ${value[k]}`) : null

        const valuesElement = htmlToElements(
            values ? `<ul>${values.map((val) => `<li>${val}</li>`).join('')}<ul>` : `<div>${value}</div>`)[0]
        const td = findAll('td', envRow)
        td[0].textContent = key
        td[1].appendChild(valuesElement)

        return envRow
    },
    getResultTBody: ({ testId, id, log, extras, resultsTableRow, tableHtml, result, collapsed }) => {
        const resultBody = templateResult.content.cloneNode(true)
        resultBody.querySelector('tbody').classList.add(result.toLowerCase())
        resultBody.querySelector('tbody').id = testId
        resultBody.querySelector('.collapsible').dataset.id = id

        resultsTableRow.forEach((html) => {
            const t = document.createElement('template')
            t.innerHTML = html
            resultBody.querySelector('.collapsible').appendChild(t.content)
        })

        if (log) {
            // Wrap lines starting with "E" with span.error to color those lines red
            const wrappedLog = log.replace(/^E.*$/gm, (match) => `<span class="error">${match}</span>`)
            resultBody.querySelector('.log').innerHTML = wrappedLog
        } else {
            resultBody.querySelector('.log').remove()
        }

        if (collapsed) {
            resultBody.querySelector('.collapsible > td')?.classList.add('collapsed')
            resultBody.querySelector('.extras-row').classList.add('hidden')
        } else {
            resultBody.querySelector('.collapsible > td')?.classList.remove('collapsed')
        }

        const media = []
        extras?.forEach(({ name, format_type, content }) => {
            if (['image', 'video'].includes(format_type)) {
                media.push({ path: content, name, format_type })
            }

            if (format_type === 'html') {
                resultBody.querySelector('.extraHTML').insertAdjacentHTML('beforeend', `<div>${content}</div>`)
            }
        })
        mediaViewer.setup(resultBody, media)

        // Add custom html from the pytest_html_results_table_html hook
        tableHtml?.forEach((item) => {
            resultBody.querySelector('td[class="extra"]').insertAdjacentHTML('beforeend', item)
        })

        return resultBody
    },
}

module.exports = {
    dom,
    htmlToElements,
    find,
    findAll,
}

},{"./mediaviewer.js":6}],3:[function(require,module,exports){
const { manager } = require('./datamanager.js')
const { doSort } = require('./sort.js')
const storageModule = require('./storage.js')

const getFilteredSubSet = (filter) =>
    manager.allData.tests.filter(({ result }) => filter.includes(result.toLowerCase()))

const doInitFilter = () => {
    const currentFilter = storageModule.getVisible()
    const filteredSubset = getFilteredSubSet(currentFilter)
    manager.setRender(filteredSubset)
}

const doFilter = (type, show) => {
    if (show) {
        storageModule.showCategory(type)
    } else {
        storageModule.hideCategory(type)
    }

    const currentFilter = storageModule.getVisible()
    const filteredSubset = getFilteredSubSet(currentFilter)
    manager.setRender(filteredSubset)

    const sortColumn = storageModule.getSort()
    doSort(sortColumn, true)
}

module.exports = {
    doFilter,
    doInitFilter,
}

},{"./datamanager.js":1,"./sort.js":7,"./storage.js":8}],4:[function(require,module,exports){
const { redraw, bindEvents, renderStatic } = require('./main.js')
const { doInitFilter } = require('./filter.js')
const { doInitSort } = require('./sort.js')
const { manager } = require('./datamanager.js')
const data = JSON.parse(document.getElementById('data-container').dataset.jsonblob)

function init() {
    manager.setManager(data)
    doInitFilter()
    doInitSort()
    renderStatic()
    redraw()
    bindEvents()
}

init()

},{"./datamanager.js":1,"./filter.js":3,"./main.js":5,"./sort.js":7}],5:[function(require,module,exports){
const { dom, find, findAll } = require('./dom.js')
const { manager } = require('./datamanager.js')
const { doSort } = require('./sort.js')
const { doFilter } = require('./filter.js')
const {
    getVisible,
    getCollapsedIds,
    setCollapsedIds,
    getSort,
    getSortDirection,
    possibleFilters,
} = require('./storage.js')

const removeChildren = (node) => {
    while (node.firstChild) {
        node.removeChild(node.firstChild)
    }
}

const renderStatic = () => {
    const renderEnvironmentTable = () => {
        const environment = manager.environment
        const rows = Object.keys(environment).map((key) => dom.getStaticRow(key, environment[key]))
        const table = document.getElementById('environment')
        removeChildren(table)
        rows.forEach((row) => table.appendChild(row))
    }
    renderEnvironmentTable()
}

const addItemToggleListener = (elem) => {
    elem.addEventListener('click', ({ target }) => {
        const id = target.parentElement.dataset.id
        manager.toggleCollapsedItem(id)

        const collapsedIds = getCollapsedIds()
        if (collapsedIds.includes(id)) {
            const updated = collapsedIds.filter((item) => item !== id)
            setCollapsedIds(updated)
        } else {
            collapsedIds.push(id)
            setCollapsedIds(collapsedIds)
        }
        redraw()
    })
}

const renderContent = (tests) => {
    const sortAttr = getSort(manager.initialSort)
    const sortAsc = JSON.parse(getSortDirection())
    const rows = tests.map(dom.getResultTBody)
    const table = document.getElementById('results-table')
    const tableHeader = document.getElementById('results-table-head')

    const newTable = document.createElement('table')
    newTable.id = 'results-table'

    // remove all sorting classes and set the relevant
    findAll('.sortable', tableHeader).forEach((elem) => elem.classList.remove('asc', 'desc'))
    tableHeader.querySelector(`.sortable[data-column-type="${sortAttr}"]`)?.classList.add(sortAsc ? 'desc' : 'asc')
    newTable.appendChild(tableHeader)

    if (!rows.length) {
        const emptyTable = document.getElementById('template_results-table__body--empty').content.cloneNode(true)
        newTable.appendChild(emptyTable)
    } else {
        rows.forEach((row) => {
            if (!!row) {
                findAll('.collapsible td:not(.col-links', row).forEach(addItemToggleListener)
                find('.logexpander', row).addEventListener('click',
                    (evt) => evt.target.parentNode.classList.toggle('expanded'),
                )
                newTable.appendChild(row)
            }
        })
    }

    table.replaceWith(newTable)
}

const renderDerived = () => {
    const currentFilter = getVisible()
    possibleFilters.forEach((result) => {
        const input = document.querySelector(`input[data-test-result="${result}"]`)
        input.checked = currentFilter.includes(result)
    })
}

const bindEvents = () => {
    const filterColumn = (evt) => {
        const { target: element } = evt
        const { testResult } = element.dataset

        doFilter(testResult, element.checked)
        const collapsedIds = getCollapsedIds()
        const updated = manager.renderData.tests.map((test) => {
            return {
                ...test,
                collapsed: collapsedIds.includes(test.id),
            }
        })
        manager.setRender(updated)
        redraw()
    }

    const header = document.getElementById('environment-header')
    header.addEventListener('click', () => {
        const table = document.getElementById('environment')
        table.classList.toggle('hidden')
        header.classList.toggle('collapsed')
    })

    findAll('input[name="filter_checkbox"]').forEach((elem) => {
        elem.addEventListener('click', filterColumn)
    })

    findAll('.sortable').forEach((elem) => {
        elem.addEventListener('click', (evt) => {
            const { target: element } = evt
            const { columnType } = element.dataset
            doSort(columnType)
            redraw()
        })
    })

    document.getElementById('show_all_details').addEventListener('click', () => {
        manager.allCollapsed = false
        setCollapsedIds([])
        redraw()
    })
    document.getElementById('hide_all_details').addEventListener('click', () => {
        manager.allCollapsed = true
        const allIds = manager.renderData.tests.map((test) => test.id)
        setCollapsedIds(allIds)
        redraw()
    })
}

const redraw = () => {
    const { testSubset } = manager

    renderContent(testSubset)
    renderDerived()
}

module.exports = {
    redraw,
    bindEvents,
    renderStatic,
}

},{"./datamanager.js":1,"./dom.js":2,"./filter.js":3,"./sort.js":7,"./storage.js":8}],6:[function(require,module,exports){
class MediaViewer {
    constructor(assets) {
        this.assets = assets
        this.index = 0
    }

    nextActive() {
        this.index = this.index === this.assets.length - 1 ? 0 : this.index + 1
        return [this.activeFile, this.index]
    }

    prevActive() {
        this.index = this.index === 0 ? this.assets.length - 1 : this.index -1
        return [this.activeFile, this.index]
    }

    get currentIndex() {
        return this.index
    }

    get activeFile() {
        return this.assets[this.index]
    }
}


const setup = (resultBody, assets) => {
    if (!assets.length) {
        resultBody.querySelector('.media').classList.add('hidden')
        return
    }

    const mediaViewer = new MediaViewer(assets)
    const container = resultBody.querySelector('.media-container')
    const leftArrow = resultBody.querySelector('.media-container__nav--left')
    const rightArrow = resultBody.querySelector('.media-container__nav--right')
    const mediaName = resultBody.querySelector('.media__name')
    const counter = resultBody.querySelector('.media__counter')
    const imageEl = resultBody.querySelector('img')
    const sourceEl = resultBody.querySelector('source')
    const videoEl = resultBody.querySelector('video')

    const setImg = (media, index) => {
        if (media?.format_type === 'image') {
            imageEl.src = media.path

            imageEl.classList.remove('hidden')
            videoEl.classList.add('hidden')
        } else if (media?.format_type === 'video') {
            sourceEl.src = media.path

            videoEl.classList.remove('hidden')
            imageEl.classList.add('hidden')
        }

        mediaName.innerText = media?.name
        counter.innerText = `${index + 1} / ${assets.length}`
    }
    setImg(mediaViewer.activeFile, mediaViewer.currentIndex)

    const moveLeft = () => {
        const [media, index] = mediaViewer.prevActive()
        setImg(media, index)
    }
    const doRight = () => {
        const [media, index] = mediaViewer.nextActive()
        setImg(media, index)
    }
    const openImg = () => {
        window.open(mediaViewer.activeFile.path, '_blank')
    }
    if (assets.length === 1) {
        container.classList.add('media-container--fullscreen')
    } else {
        leftArrow.addEventListener('click', moveLeft)
        rightArrow.addEventListener('click', doRight)
    }
    imageEl.addEventListener('click', openImg)
}

module.exports = {
    setup,
}

},{}],7:[function(require,module,exports){
const { manager } = require('./datamanager.js')
const storageModule = require('./storage.js')

const genericSort = (list, key, ascending, customOrder) => {
    let sorted
    if (customOrder) {
        sorted = list.sort((a, b) => {
            const aValue = a.result.toLowerCase()
            const bValue = b.result.toLowerCase()

            const aIndex = customOrder.findIndex((item) => item.toLowerCase() === aValue)
            const bIndex = customOrder.findIndex((item) => item.toLowerCase() === bValue)

            // Compare the indices to determine the sort order
            return aIndex - bIndex
        })
    } else {
        sorted = list.sort((a, b) => a[key] === b[key] ? 0 : a[key] > b[key] ? 1 : -1)
    }

    if (ascending) {
        sorted.reverse()
    }
    return sorted
}

const durationSort = (list, ascending) => {
    const parseDuration = (duration) => {
        if (duration.includes(':')) {
            // If it's in the format "HH:mm:ss"
            const [hours, minutes, seconds] = duration.split(':').map(Number)
            return (hours * 3600 + minutes * 60 + seconds) * 1000
        } else {
            // If it's in the format "nnn ms"
            return parseInt(duration)
        }
    }
    const sorted = list.sort((a, b) => parseDuration(a['duration']) - parseDuration(b['duration']))
    if (ascending) {
        sorted.reverse()
    }
    return sorted
}

const doInitSort = () => {
    const type = storageModule.getSort(manager.initialSort)
    const ascending = storageModule.getSortDirection()
    const list = manager.testSubset
    const initialOrder = ['Error', 'Failed', 'Rerun', 'XFailed', 'XPassed', 'Skipped', 'Passed']

    storageModule.setSort(type)
    storageModule.setSortDirection(ascending)

    if (type?.toLowerCase() === 'original') {
        manager.setRender(list)
    } else {
        let sortedList
        switch (type) {
        case 'duration':
            sortedList = durationSort(list, ascending)
            break
        case 'result':
            sortedList = genericSort(list, type, ascending, initialOrder)
            break
        default:
            sortedList = genericSort(list, type, ascending)
            break
        }
        manager.setRender(sortedList)
    }
}

const doSort = (type, skipDirection) => {
    const newSortType = storageModule.getSort(manager.initialSort) !== type
    const currentAsc = storageModule.getSortDirection()
    let ascending
    if (skipDirection) {
        ascending = currentAsc
    } else {
        ascending = newSortType ? false : !currentAsc
    }
    storageModule.setSort(type)
    storageModule.setSortDirection(ascending)

    const list = manager.testSubset
    const sortedList = type === 'duration' ? durationSort(list, ascending) : genericSort(list, type, ascending)
    manager.setRender(sortedList)
}

module.exports = {
    doInitSort,
    doSort,
}

},{"./datamanager.js":1,"./storage.js":8}],8:[function(require,module,exports){
const possibleFilters = [
    'passed',
    'skipped',
    'failed',
    'error',
    'xfailed',
    'xpassed',
    'rerun',
]

const getVisible = () => {
    const url = new URL(window.location.href)
    const settings = new URLSearchParams(url.search).get('visible')
    const lower = (item) => {
        const lowerItem = item.toLowerCase()
        if (possibleFilters.includes(lowerItem)) {
            return lowerItem
        }
        return null
    }
    return settings === null ?
        possibleFilters :
        [...new Set(settings?.split(',').map(lower).filter((item) => item))]
}

const hideCategory = (categoryToHide) => {
    const url = new URL(window.location.href)
    const visibleParams = new URLSearchParams(url.search).get('visible')
    const currentVisible = visibleParams ? visibleParams.split(',') : [...possibleFilters]
    const settings = [...new Set(currentVisible)].filter((f) => f !== categoryToHide).join(',')

    url.searchParams.set('visible', settings)
    window.history.pushState({}, null, unescape(url.href))
}

const showCategory = (categoryToShow) => {
    if (typeof window === 'undefined') {
        return
    }
    const url = new URL(window.location.href)
    const currentVisible = new URLSearchParams(url.search).get('visible')?.split(',').filter(Boolean) ||
        [...possibleFilters]
    const settings = [...new Set([categoryToShow, ...currentVisible])]
    const noFilter = possibleFilters.length === settings.length || !settings.length

    noFilter ? url.searchParams.delete('visible') : url.searchParams.set('visible', settings.join(','))
    window.history.pushState({}, null, unescape(url.href))
}

const getSort = (initialSort) => {
    const url = new URL(window.location.href)
    let sort = new URLSearchParams(url.search).get('sort')
    if (!sort) {
        sort = initialSort || 'result'
    }
    return sort
}

const setSort = (type) => {
    const url = new URL(window.location.href)
    url.searchParams.set('sort', type)
    window.history.pushState({}, null, unescape(url.href))
}

const getCollapsedCategory = (renderCollapsed) => {
    let categories
    if (typeof window !== 'undefined') {
        const url = new URL(window.location.href)
        const collapsedItems = new URLSearchParams(url.search).get('collapsed')
        switch (true) {
        case !renderCollapsed && collapsedItems === null:
            categories = ['passed']
            break
        case collapsedItems?.length === 0 || /^["']{2}$/.test(collapsedItems):
            categories = []
            break
        case /^all$/.test(collapsedItems) || collapsedItems === null && /^all$/.test(renderCollapsed):
            categories = [...possibleFilters]
            break
        default:
            categories = collapsedItems?.split(',').map((item) => item.toLowerCase()) || renderCollapsed
            break
        }
    } else {
        categories = []
    }
    return categories
}

const getSortDirection = () => JSON.parse(sessionStorage.getItem('sortAsc')) || false
const setSortDirection = (ascending) => sessionStorage.setItem('sortAsc', ascending)

const getCollapsedIds = () => JSON.parse(sessionStorage.getItem('collapsedIds')) || []
const setCollapsedIds = (list) => sessionStorage.setItem('collapsedIds', JSON.stringify(list))

module.exports = {
    getVisible,
    hideCategory,
    showCategory,
    getCollapsedIds,
    setCollapsedIds,
    getSort,
    setSort,
    getSortDirection,
    setSortDirection,
    getCollapsedCategory,
    possibleFilters,
}

},{}]},{},[4]);
    </script>
  </footer>
</html>